import{$ as e,A as t,L as n,N as r,Rt as i,W as a,Y as o,c as s,ct as c,d as l,dt as u,g as d,gt as f,l as ee,r as p,rt as m,s as h,st as g,u as _,v,z as y}from"./runtime-core.esm-bundler-ferQsT0-.js";import{S as b}from"./client-B6pqQaKB.js";import{D as x,f as S,l as C,n as w}from"./dist-D-OgZAvI.js";import{t as T}from"./plugin-vue_export-helper-DcQ9_fJ9.js";import{f as E,l as D,p as O,u as k}from"./app-lmdyr51w.js";import{t as te}from"./CodeViewer-BafO_UpN.js";var A=`https://caniuse.pengzhanbo.cn/features.json`,j={"/":{past0:`不显示旧版本`,pastIndex:`旧版本（当前版本 - {index}）`,future0:`不显示未来版本`,futureIndex:`未来版本（当前版本 + {index}）`},"/en/":{past0:`Do not show old versions`,pastIndex:`Old version (current version - {index})`,future0:`Do not show future versions`,futureIndex:`Future version (current version + {index})`}},M=[{label:`caniuse`,value:``},{label:`baseline`,value:`baseline`}];function N(){let e=b(),t=c(`2`),n=c(`1`),r=c(``);return{past:t,future:n,pastList:h(()=>[{label:j[e.value].past0||``,value:`0`},...Array.from({length:5}).fill(0).map((t,n)=>({label:j[e.value]?.pastIndex?.replace(`{index}`,`${n+1}`)??``,value:`${n+1}`}))]),futureList:h(()=>[{label:j[e.value].future0||``,value:`0`},...Array.from({length:3}).fill(0).map((t,n)=>({label:j[e.value]?.futureIndex?.replace(`{index}`,`${n+1}`)??``,value:`${n+1}`}))]),embedType:r,embedTypeList:g(M)}}function P(e,n){let r=S(`plume:caniuse-feature-list`,[]),i=S(`plume:caniuse-feature-list-updated`,Date.now());t(async()=>{typeof document>`u`||r.value.length&&Date.now()-i.value<2592e5||(r.value=await fetch(A).then(e=>e.json())||r.value||[])});let a=c(``),s=c(!1),l=c(),u=c(null);o(()=>[r.value,s.value],()=>{s.value||(l.value=r.value)},{immediate:!0}),w(n,()=>{s.value=!1},{ignore:[e]}),C(e,`input`,x(()=>{u.value=null,a.value=e.value?.value||``,a.value?(l.value=r.value.filter(e=>e.label.includes(a.value)||e.value.includes(a.value)),l.value.length===1&&(u.value=l.value[0])):l.value=r.value},500)),C(e,`focus`,()=>{s.value=!0});function d(t){u.value=t,s.value=!1,e.value&&(e.value.value=t.label)}return{featureList:l,isFocus:s,onSelect:d,feature:h(()=>u.value?.value||``)}}function F({feature:e,embedType:t,past:n,future:r}){return{output:h(()=>{let i=`@[caniuse`;return t.value&&(i+=` ${t.value}`),t.value!==`baseline`&&(n.value!==`-2`||r.value!==`1`)&&(n.value===`0`&&r.value===`0`?i+=`{0}`:i+=`{-${n.value},${r.value}}`),i+=`](`,e.value&&(i+=e.value),`${i})`})}}var I={class:`caniuse-config-wrapper`},L=[`for`],R={class:`feature-input`},z=[`id`,`placeholder`],B=[`onClick`,`onKeydown`,`innerHTML`],V={class:`caniuse-form-item`},H={class:`caniuse-embed-type`},U=[`for`],W=[`id`,`value`],G={key:0,class:`caniuse-form-item`},K={class:`caniuse-browser-version`},q=[`for`],J=[`id`],Y=[`value`],X=[`for`],Z=[`id`],ne=[`value`],re={class:`caniuse-output`},Q=T(v({__name:`CanIUseConfig`,setup(t){let o={"/":{"select-feature":`选择特性：`,placeholder:`输入特性`,"embed-type":`嵌入方式：`,output:`输出：`,"browser-version":`浏览器版本：`,"no-recommend":`不推荐`},"/en/":{"select-feature":`Select feature:`,placeholder:`Input feature`,"embed-type":`Embed type: `,output:`Output:`,"browser-version":`Browser version: `,"no-recommend":`Not recommended`}},c=u(null),g=u(null),v=a(),x=b(),S=h(()=>o[x.value]),{feature:C,featureList:w,onSelect:T,isFocus:A}=P(g,c),{past:j,pastList:M,future:Q,futureList:ie,embedType:$,embedTypeList:ae}=N(),{output:oe}=F({feature:C,embedType:$,past:j,future:Q});return(t,a)=>{let o=y(`CanIUseViewer`);return r(),l(`div`,I,[s(`form`,null,[s(`label`,{class:`caniuse-form-item`,for:`caniuse-feature-input-${f(v)}`},[s(`span`,null,i(S.value[`select-feature`]),1),s(`div`,R,[s(`input`,{id:`caniuse-feature-input-${f(v)}`,ref_key:`inputEl`,ref:g,class:`feature-input__input`,type:`text`,name:`feature`,placeholder:S.value.placeholder},null,8,z),a[3]||=s(`span`,{class:`vpi-chevron-down`},null,-1),e(s(`ul`,{ref_key:`listEl`,ref:c,class:`feature-list`},[(r(!0),l(p,null,n(f(w),e=>(r(),l(`li`,{key:e.value},[s(`button`,{type:`button`,class:`feature-list-item`,onClick:t=>f(T)(e),onKeydown:O(t=>f(T)(e),[`enter`]),innerHTML:e.label},null,40,B)]))),128))],512),[[E,f(A)]])])],8,L),s(`div`,V,[s(`span`,null,i(S.value[`embed-type`]),1),s(`div`,H,[(r(!0),l(p,null,n(f(ae),(t,n)=>(r(),l(`label`,{key:t.label,for:`caniuse-embed-${f(v)}-${n}`},[e(s(`input`,{id:`caniuse-embed-${f(v)}-${n}`,"onUpdate:modelValue":a[0]||=e=>m($)?$.value=e:null,type:`radio`,name:`embedType`,value:t.value},null,8,W),[[D,f($)]]),s(`span`,null,i(t.label),1)],8,U))),128))])]),f($)?_(``,!0):(r(),l(`div`,G,[s(`span`,null,i(S.value[`browser-version`]),1),s(`div`,K,[s(`label`,{for:`caniuse-past-${f(v)}`},[e(s(`select`,{id:`caniuse-past-${f(v)}`,"onUpdate:modelValue":a[1]||=e=>m(j)?j.value=e:null,name:`past`},[(r(!0),l(p,null,n(f(M),e=>(r(),l(`option`,{key:e.value,value:e.value},i(e.label),9,Y))),128))],8,J),[[k,f(j)]])],8,q),a[4]||=s(`span`,null,`-`,-1),s(`label`,{for:`caniuse-future-${f(v)}`},[e(s(`select`,{id:`caniuse-future-${f(v)}`,"onUpdate:modelValue":a[2]||=e=>m(Q)?Q.value=e:null,name:`future`},[(r(!0),l(p,null,n(f(ie),e=>(r(),l(`option`,{key:e.value,value:e.value},i(e.label),9,ne))),128))],8,Z),[[k,f(Q)]])],8,X)])]))]),s(`div`,re,[s(`h4`,null,i(S.value.output),1),d(te,{lang:`md`,content:f(oe)},null,8,[`content`])]),f(C)?(r(),ee(o,{key:0,feature:f(C),past:f(j),future:f(Q),baseline:f($)===`baseline`},null,8,[`feature`,`past`,`future`,`baseline`])):_(``,!0)])}}}),[[`__scopeId`,`data-v-20cc52b5`]]);export{Q as t};