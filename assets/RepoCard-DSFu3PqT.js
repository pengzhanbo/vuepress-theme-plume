import{E as e,Ft as t,Lt as n,N as r,Q as i,Rt as a,Y as o,c as s,ct as c,d as l,gt as u,ht as d,l as f,pt as p,s as m,u as h,v as g}from"./runtime-core.esm-bundler-ferQsT0-.js";import{t as _}from"./client-B6pqQaKB.js";import{f as v}from"./dist-D-OgZAvI.js";import{t as y}from"./plugin-vue_export-helper-DcQ9_fJ9.js";var b=v(`__VUEPRESS_GITHUB_REPO__`,{});function x(e,t){let n=m(()=>{let[t=``,n=``]=d(e).split(`/`);return{owner:t,name:n}}),r=m(()=>d(t)??`github`),i=c(null),a=c(!1);async function s(){let{owner:e,name:t}=d(n);if(!e||!t)return;let o=`${r.value===`github`?``:`${r.value}:`}${e}/${t}`,s=b.value[o];if(s?.info?.name&&Date.now()-s.updatedAt<=864e5){i.value=s.info,a.value=!0;return}a.value=!1;try{let n=await fetch(`https://api.pengzhanbo.cn/${r.value}/repo/${e}/${t}`).then(e=>e.json());a.value=!0,n.convertStars=S(n.stars),n.convertForks=S(n.forks),i.value=n,b.value[o]={info:n,updatedAt:Date.now()}}catch(e){a.value=!0,console.error(`github repo error:`,e)}}return o(n,s,{immediate:!0}),{data:i,loaded:a}}function S(e){return e<1e3?e:`${(e/1e3).toFixed(1)}k`}var C={class:`repo-name`},w={class:`repo-link`},T=[`href`,`title`],E={class:`repo-desc`},D={class:`repo-info`},O={key:0},k=[`title`],A=[`title`],j=[`title`],M=y(g({inheritAttrs:!1,__name:`RepoCard`,props:{repo:{},fullname:{type:Boolean,default:void 0},provider:{default:`github`}},setup(o){let c=o,{loaded:d,data:m}=x(p(c,`repo`),p(c,`provider`));return(c,p)=>(r(),f(u(_),null,{default:i(()=>[u(d)&&u(m)?.name?(r(),l(`div`,e({key:0,class:`vp-repo-card`},c.$attrs),[s(`p`,C,[s(`span`,{class:t(`vpi-${o.provider}-repo`)},null,2),s(`span`,w,[s(`a`,{href:u(m).url,target:`_blank`,rel:`noopener noreferrer`,class:`no-icon`,title:u(m).fullName},a(o.fullname||u(m).ownerType===`Organization`&&o.fullname===void 0?u(m).fullName:u(m).name),9,T)]),s(`span`,{class:t([`repo-visibility`,{archived:u(m).archived}])},a(u(m).visibility+(u(m).template?` Template`:``))+a(u(m).archived?` archive`:``),3)]),s(`p`,E,a(u(m).description),1),s(`div`,D,[u(m).language?(r(),l(`p`,O,[s(`span`,{class:`repo-language`,style:n({"background-color":u(m).languageColor})},null,4),s(`span`,null,a(u(m).language),1)])):h(``,!0),s(`p`,{title:`Github Stars: ${u(m).stars}`},[p[0]||=s(`span`,{class:`vpi-github-star`},null,-1),s(`span`,null,a(u(m).convertStars),1)],8,k),s(`p`,{title:`Github Forks: ${u(m).forks}`},[p[1]||=s(`span`,{class:`vpi-github-fork`},null,-1),s(`span`,null,a(u(m).convertForks),1)],8,A),u(m).license?(r(),l(`p`,{key:1,title:`Github License: ${u(m).license.name}`},[p[2]||=s(`span`,{class:`vpi-github-license`},null,-1),s(`span`,null,a(u(m).license.name),1)],8,j)):h(``,!0)])],16)):h(``,!0)]),_:1}))}}),[[`__scopeId`,`data-v-e3b8cb06`]]);export{M as t};