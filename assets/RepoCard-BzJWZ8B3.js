import{z as C,s as _,P as v,g as b,A as B,k as z,Q as k,j as G,o as d,w as x,c as h,l as m,u as t,m as A,e as a,n as y,t as r,R as D,S as E,a as F}from"./app-DfaIkmfj.js";const $=C("__VUEPRESS_GITHUB_REPO__",{});function N(n,c){const p=_(()=>{const[i="",u=""]=v(n).split("/");return{owner:i,name:u}}),e=_(()=>v(c)??"github"),l=b(null),s=b(!1);async function w(){const{owner:i,name:u}=v(p);if(!i||!u)return;const g=`${e.value==="github"?"":`${e.value}:`}${i}/${u}`,f=$.value[g];if(f?.info?.name&&Date.now()-f.updatedAt<=864e5){l.value=f.info,s.value=!0;return}s.value=!1;try{const o=await fetch(`https://api.pengzhanbo.cn/${e.value}/repo/${i}/${u}`).then(S=>S.json());s.value=!0,o.convertStars=R(o.stars),o.convertForks=R(o.forks),l.value=o,$.value[g]={info:o,updatedAt:Date.now()}}catch(o){s.value=!0,console.error("github repo error:",o)}}return B(p,w,{immediate:!0}),{data:l,loaded:s}}function R(n){return n<1e3?n:`${(n/1e3).toFixed(1)}k`}const P={class:"repo-name"},T={class:"repo-link"},V=["href","title"],O={class:"repo-desc"},j={class:"repo-info"},I={key:0},L=["title"],U=["title"],H=["title"],Q=z({inheritAttrs:!1,__name:"RepoCard",props:{repo:{},fullname:{type:Boolean,default:void 0},provider:{default:"github"}},setup(n){const c=n,{loaded:p,data:e}=N(k(c,"repo"),k(c,"provider"));return(l,s)=>(d(),G(t(E),null,{default:x(()=>[t(p)&&t(e)?.name?(d(),h("div",A({key:0,class:"vp-repo-card"},l.$attrs),[a("p",P,[a("span",{class:y(`vpi-${n.provider}-repo`)},null,2),a("span",T,[a("a",{href:t(e).url,target:"_blank",rel:"noopener noreferrer",class:"no-icon",title:t(e).fullName},r(n.fullname||t(e).ownerType==="Organization"&&typeof n.fullname>"u"?t(e).fullName:t(e).name),9,V)]),a("span",{class:y(["repo-visibility",{archived:t(e).archived}])},r(t(e).visibility+(t(e).template?" Template":""))+r(t(e).archived?" archive":""),3)]),a("p",O,r(t(e).description),1),a("div",j,[t(e).language?(d(),h("p",I,[a("span",{class:"repo-language",style:D({"background-color":t(e).languageColor})},null,4),a("span",null,r(t(e).language),1)])):m("",!0),a("p",{title:`Github Stars: ${t(e).stars}`},[s[0]||(s[0]=a("span",{class:"vpi-github-star"},null,-1)),a("span",null,r(t(e).convertStars),1)],8,L),a("p",{title:`Github Forks: ${t(e).forks}`},[s[1]||(s[1]=a("span",{class:"vpi-github-fork"},null,-1)),a("span",null,r(t(e).convertForks),1)],8,U),t(e).license?(d(),h("p",{key:1,title:`Github License: ${t(e).license.name}`},[s[2]||(s[2]=a("span",{class:"vpi-github-license"},null,-1)),a("span",null,r(t(e).license.name),1)],8,H)):m("",!0)])],16)):m("",!0)]),_:1}))}}),J=F(Q,[["__scopeId","data-v-e3b8cb06"]]);export{J as R};
