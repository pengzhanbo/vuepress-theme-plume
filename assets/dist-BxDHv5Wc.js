import{c as e,d as t,l as n,o as r,r as i,s as a,t as o,u as s}from"./dist-CR9LtEYW.js";var c=class extends Map{constructor(e,t=f){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(let[t,n]of e)this.set(t,n)}get(e){return super.get(l(this,e))}has(e){return super.has(l(this,e))}set(e,t){return super.set(u(this,e),t)}delete(e){return super.delete(d(this,e))}};function l({_intern:e,_key:t},n){let r=t(n);return e.has(r)?e.get(r):n}function u({_intern:e,_key:t},n){let r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function d({_intern:e,_key:t},n){let r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function f(e){return typeof e==`object`&&e?e.valueOf():e}function p(e,t){let n;if(t===void 0)for(let t of e)t!=null&&(n<t||n===void 0&&t>=t)&&(n=t);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function m(e,t){let n;if(t===void 0)for(let t of e)t!=null&&(n>t||n===void 0&&t>=t)&&(n=t);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function h(e,t){let n,r=-1,i=-1;if(t===void 0)for(let t of e)++i,t!=null&&(n>t||n===void 0&&t>=t)&&(n=t,r=i);else for(let a of e)(a=t(a,++i,e))!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);return r}var g={value:()=>{}};function _(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+``)||r in n||/[\s.]/.test(r))throw Error(`illegal type: `+r);n[r]=[]}return new v(n)}function v(e){this._=e}function y(e,t){return e.trim().split(/^|\s+/).map(function(e){var n=``,r=e.indexOf(`.`);if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw Error(`unknown type: `+e);return{type:e,name:n}})}v.prototype=_.prototype={constructor:v,on:function(e,t){var n=this._,r=y(e+``,n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(e=r[a]).type)&&(i=b(n[i],e.name)))return i;return}if(t!=null&&typeof t!=`function`)throw Error(`invalid callback: `+t);for(;++a<o;)if(i=(e=r[a]).type)n[i]=x(n[i],e.name,t);else if(t==null)for(i in n)n[i]=x(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new v(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw Error(`unknown type: `+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw Error(`unknown type: `+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function b(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function x(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=g,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var S={svg:`http://www.w3.org/2000/svg`,xhtml:`http://www.w3.org/1999/xhtml`,xlink:`http://www.w3.org/1999/xlink`,xml:`http://www.w3.org/XML/1998/namespace`,xmlns:`http://www.w3.org/2000/xmlns/`};function C(e){var t=e+=``,n=t.indexOf(`:`);return n>=0&&(t=e.slice(0,n))!==`xmlns`&&(e=e.slice(n+1)),S.hasOwnProperty(t)?{space:S[t],local:e}:e}function w(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===`http://www.w3.org/1999/xhtml`&&t.documentElement.namespaceURI===`http://www.w3.org/1999/xhtml`?t.createElement(e):t.createElementNS(n,e)}}function ee(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function te(e){var t=C(e);return(t.local?ee:w)(t)}function ne(){}function T(e){return e==null?ne:function(){return this.querySelector(e)}}function re(e){typeof e!=`function`&&(e=T(e));for(var t=this._groups,n=t.length,r=Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=Array(o),c,l,u=0;u<o;++u)(c=a[u])&&(l=e.call(c,c.__data__,u,a))&&(`__data__`in c&&(l.__data__=c.__data__),s[u]=l);return new D(r,this._parents)}function ie(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function ae(){return[]}function oe(e){return e==null?ae:function(){return this.querySelectorAll(e)}}function se(e){return function(){return ie(e.apply(this,arguments))}}function ce(e){e=typeof e==`function`?se(e):oe(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o=t[a],s=o.length,c,l=0;l<s;++l)(c=o[l])&&(r.push(e.call(c,c.__data__,l,o)),i.push(c));return new D(r,i)}function le(e){return function(){return this.matches(e)}}function ue(e){return function(t){return t.matches(e)}}var de=Array.prototype.find;function fe(e){return function(){return de.call(this.children,e)}}function pe(){return this.firstElementChild}function me(e){return this.select(e==null?pe:fe(typeof e==`function`?e:ue(e)))}var he=Array.prototype.filter;function ge(){return Array.from(this.children)}function _e(e){return function(){return he.call(this.children,e)}}function ve(e){return this.selectAll(e==null?ge:_e(typeof e==`function`?e:ue(e)))}function ye(e){typeof e!=`function`&&(e=le(e));for(var t=this._groups,n=t.length,r=Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=[],c,l=0;l<o;++l)(c=a[l])&&e.call(c,c.__data__,l,a)&&s.push(c);return new D(r,this._parents)}function be(e){return Array(e.length)}function xe(){return new D(this._enter||this._groups.map(be),this._parents)}function Se(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Se.prototype={constructor:Se,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Ce(e){return function(){return e}}function we(e,t,n,r,i,a){for(var o=0,s,c=t.length,l=a.length;o<l;++o)(s=t[o])?(s.__data__=a[o],r[o]=s):n[o]=new Se(e,a[o]);for(;o<c;++o)(s=t[o])&&(i[o]=s)}function Te(e,t,n,r,i,a,o){var s,c,l=new Map,u=t.length,d=a.length,f=Array(u),p;for(s=0;s<u;++s)(c=t[s])&&(f[s]=p=o.call(c,c.__data__,s,t)+``,l.has(p)?i[s]=c:l.set(p,c));for(s=0;s<d;++s)p=o.call(e,a[s],s,a)+``,(c=l.get(p))?(r[s]=c,c.__data__=a[s],l.delete(p)):n[s]=new Se(e,a[s]);for(s=0;s<u;++s)(c=t[s])&&l.get(f[s])===c&&(i[s]=c)}function Ee(e){return e.__data__}function De(e,t){if(!arguments.length)return Array.from(this,Ee);var n=t?Te:we,r=this._parents,i=this._groups;typeof e!=`function`&&(e=Ce(e));for(var a=i.length,o=Array(a),s=Array(a),c=Array(a),l=0;l<a;++l){var u=r[l],d=i[l],f=d.length,p=Oe(e.call(u,u&&u.__data__,l,r)),m=p.length,h=s[l]=Array(m),g=o[l]=Array(m);n(u,d,h,g,c[l]=Array(f),p,t);for(var _=0,v=0,y,b;_<m;++_)if(y=h[_]){for(_>=v&&(v=_+1);!(b=g[v])&&++v<m;);y._next=b||null}}return o=new D(o,r),o._enter=s,o._exit=c,o}function Oe(e){return typeof e==`object`&&`length`in e?e:Array.from(e)}function ke(){return new D(this._exit||this._groups.map(be),this._parents)}function Ae(e,t,n){var r=this.enter(),i=this,a=this.exit();return typeof e==`function`?(r=e(r),r&&=r.selection()):r=r.append(e+``),t!=null&&(i=t(i),i&&=i.selection()),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function je(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,a=r.length,o=Math.min(i,a),s=Array(i),c=0;c<o;++c)for(var l=n[c],u=r[c],d=l.length,f=s[c]=Array(d),p,m=0;m<d;++m)(p=l[m]||u[m])&&(f[m]=p);for(;c<i;++c)s[c]=n[c];return new D(s,this._parents)}function Me(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function Ne(e){e||=Pe;function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}for(var n=this._groups,r=n.length,i=Array(r),a=0;a<r;++a){for(var o=n[a],s=o.length,c=i[a]=Array(s),l,u=0;u<s;++u)(l=o[u])&&(c[u]=l);c.sort(t)}return new D(i,this._parents).order()}function Pe(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Fe(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Ie(){return Array.from(this)}function Le(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function Re(){let e=0;for(let t of this)++e;return e}function ze(){return!this.node()}function Be(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,o=i.length,s;a<o;++a)(s=i[a])&&e.call(s,s.__data__,a,i);return this}function Ve(e){return function(){this.removeAttribute(e)}}function He(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ue(e,t){return function(){this.setAttribute(e,t)}}function We(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Ge(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Ke(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function qe(e,t){var n=C(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?He:Ve:typeof t==`function`?n.local?Ke:Ge:n.local?We:Ue)(n,t))}function Je(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Ye(e){return function(){this.style.removeProperty(e)}}function Xe(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Ze(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Qe(e,t,n){return arguments.length>1?this.each((t==null?Ye:typeof t==`function`?Ze:Xe)(e,t,n??``)):E(this.node(),e)}function E(e,t){return e.style.getPropertyValue(t)||Je(e).getComputedStyle(e,null).getPropertyValue(t)}function $e(e){return function(){delete this[e]}}function et(e,t){return function(){this[e]=t}}function tt(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function nt(e,t){return arguments.length>1?this.each((t==null?$e:typeof t==`function`?tt:et)(e,t)):this.node()[e]}function rt(e){return e.trim().split(/^|\s+/)}function it(e){return e.classList||new at(e)}function at(e){this._node=e,this._names=rt(e.getAttribute(`class`)||``)}at.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute(`class`,this._names.join(` `)))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute(`class`,this._names.join(` `)))},contains:function(e){return this._names.indexOf(e)>=0}};function ot(e,t){for(var n=it(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function st(e,t){for(var n=it(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function ct(e){return function(){ot(this,e)}}function lt(e){return function(){st(this,e)}}function ut(e,t){return function(){(t.apply(this,arguments)?ot:st)(this,e)}}function dt(e,t){var n=rt(e+``);if(arguments.length<2){for(var r=it(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t==`function`?ut:t?ct:lt)(n,t))}function ft(){this.textContent=``}function pt(e){return function(){this.textContent=e}}function mt(e){return function(){this.textContent=e.apply(this,arguments)??``}}function ht(e){return arguments.length?this.each(e==null?ft:(typeof e==`function`?mt:pt)(e)):this.node().textContent}function gt(){this.innerHTML=``}function _t(e){return function(){this.innerHTML=e}}function vt(e){return function(){this.innerHTML=e.apply(this,arguments)??``}}function yt(e){return arguments.length?this.each(e==null?gt:(typeof e==`function`?vt:_t)(e)):this.node().innerHTML}function bt(){this.nextSibling&&this.parentNode.appendChild(this)}function xt(){return this.each(bt)}function St(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ct(){return this.each(St)}function wt(e){var t=typeof e==`function`?e:te(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Tt(){return null}function Et(e,t){var n=typeof e==`function`?e:te(e),r=t==null?Tt:typeof t==`function`?t:T(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Dt(){var e=this.parentNode;e&&e.removeChild(this)}function Ot(){return this.each(Dt)}function kt(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function At(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function jt(e){return this.select(e?At:kt)}function Mt(e){return arguments.length?this.property(`__data__`,e):this.node().__data__}function Nt(e){return function(t){e.call(this,t,this.__data__)}}function Pt(e){return e.trim().split(/^|\s+/).map(function(e){var t=``,n=e.indexOf(`.`);return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}function Ft(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function It(e,t,n){return function(){var r=this.__on,i,a=Nt(t);if(r){for(var o=0,s=r.length;o<s;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function Lt(e,t,n){var r=Pt(e+``),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var c=0,l=s.length,u;c<l;++c)for(i=0,u=s[c];i<a;++i)if((o=r[i]).type===u.type&&o.name===u.name)return u.value}return}for(s=t?It:Ft,i=0;i<a;++i)this.each(s(r[i],t,n));return this}function Rt(e,t,n){var r=Je(e),i=r.CustomEvent;typeof i==`function`?i=new i(t,n):(i=r.document.createEvent(`Event`),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function zt(e,t){return function(){return Rt(this,e,t)}}function Bt(e,t){return function(){return Rt(this,e,t.apply(this,arguments))}}function Vt(e,t){return this.each((typeof t==`function`?Bt:zt)(e,t))}function*Ht(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var Ut=[null];function D(e,t){this._groups=e,this._parents=t}function O(){return new D([[document.documentElement]],Ut)}function Wt(){return this}D.prototype=O.prototype={constructor:D,select:re,selectAll:ce,selectChild:me,selectChildren:ve,filter:ye,data:De,enter:xe,exit:ke,join:Ae,merge:je,selection:Wt,order:Me,sort:Ne,call:Fe,nodes:Ie,node:Le,size:Re,empty:ze,each:Be,attr:qe,style:Qe,property:nt,classed:dt,text:ht,html:yt,raise:xt,lower:Ct,append:wt,insert:Et,remove:Ot,clone:jt,datum:Mt,on:Lt,dispatch:Vt,[Symbol.iterator]:Ht};function k(e){return typeof e==`string`?new D([[document.querySelector(e)]],[document.documentElement]):new D([[e]],Ut)}function Gt(e){let t;for(;t=e.sourceEvent;)e=t;return e}function A(e,t){if(e=Gt(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Kt={capture:!0,passive:!1};function qt(e){e.preventDefault(),e.stopImmediatePropagation()}function Jt(e){var t=e.document.documentElement,n=k(e).on(`dragstart.drag`,qt,Kt);`onselectstart`in t?n.on(`selectstart.drag`,qt,Kt):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect=`none`)}function Yt(e,t){var n=e.document.documentElement,r=k(e).on(`dragstart.drag`,null);t&&(r.on(`click.drag`,qt,Kt),setTimeout(function(){r.on(`click.drag`,null)},0)),`onselectstart`in n?r.on(`selectstart.drag`,null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Xt(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Zt(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function j(){}var M=.7,Qt=1/M,N=`\\s*([+-]?\\d+)\\s*`,P=`\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*`,F=`\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*`,$t=/^#([0-9a-f]{3,8})$/,en=RegExp(`^rgb\\(${N},${N},${N}\\)$`),tn=RegExp(`^rgb\\(${F},${F},${F}\\)$`),nn=RegExp(`^rgba\\(${N},${N},${N},${P}\\)$`),rn=RegExp(`^rgba\\(${F},${F},${F},${P}\\)$`),an=RegExp(`^hsl\\(${P},${F},${F}\\)$`),on=RegExp(`^hsla\\(${P},${F},${F},${P}\\)$`),sn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Xt(j,I,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:cn,formatHex:cn,formatHex8:ln,formatHsl:un,formatRgb:dn,toString:dn});function cn(){return this.rgb().formatHex()}function ln(){return this.rgb().formatHex8()}function un(){return xn(this).formatHsl()}function dn(){return this.rgb().formatRgb()}function I(e){var t,n;return e=(e+``).trim().toLowerCase(),(t=$t.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?fn(t):n===3?new L(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?pn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?pn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=en.exec(e))?new L(t[1],t[2],t[3],1):(t=tn.exec(e))?new L(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=nn.exec(e))?pn(t[1],t[2],t[3],t[4]):(t=rn.exec(e))?pn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=an.exec(e))?bn(t[1],t[2]/100,t[3]/100,1):(t=on.exec(e))?bn(t[1],t[2]/100,t[3]/100,t[4]):sn.hasOwnProperty(e)?fn(sn[e]):e===`transparent`?new L(NaN,NaN,NaN,0):null}function fn(e){return new L(e>>16&255,e>>8&255,e&255,1)}function pn(e,t,n,r){return r<=0&&(e=t=n=NaN),new L(e,t,n,r)}function mn(e){return e instanceof j||(e=I(e)),e?(e=e.rgb(),new L(e.r,e.g,e.b,e.opacity)):new L}function hn(e,t,n,r){return arguments.length===1?mn(e):new L(e,t,n,r??1)}function L(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Xt(L,hn,Zt(j,{brighter(e){return e=e==null?Qt:Qt**+e,new L(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?M:M**+e,new L(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new L(R(this.r),R(this.g),R(this.b),yn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:gn,formatHex:gn,formatHex8:_n,formatRgb:vn,toString:vn}));function gn(){return`#${z(this.r)}${z(this.g)}${z(this.b)}`}function _n(){return`#${z(this.r)}${z(this.g)}${z(this.b)}${z((isNaN(this.opacity)?1:this.opacity)*255)}`}function vn(){let e=yn(this.opacity);return`${e===1?`rgb(`:`rgba(`}${R(this.r)}, ${R(this.g)}, ${R(this.b)}${e===1?`)`:`, ${e})`}`}function yn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function R(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function z(e){return e=R(e),(e<16?`0`:``)+e.toString(16)}function bn(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new B(e,t,n,r)}function xn(e){if(e instanceof B)return new B(e.h,e.s,e.l,e.opacity);if(e instanceof j||(e=I(e)),!e)return new B;if(e instanceof B)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,s=a-i,c=(a+i)/2;return s?(o=t===a?(n-r)/s+(n<r)*6:n===a?(r-t)/s+2:(t-n)/s+4,s/=c<.5?a+i:2-a-i,o*=60):s=c>0&&c<1?0:o,new B(o,s,c,e.opacity)}function Sn(e,t,n,r){return arguments.length===1?xn(e):new B(e,t,n,r??1)}function B(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Xt(B,Sn,Zt(j,{brighter(e){return e=e==null?Qt:Qt**+e,new B(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?M:M**+e,new B(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new L(Tn(e>=240?e-240:e+120,i,r),Tn(e,i,r),Tn(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new B(Cn(this.h),wn(this.s),wn(this.l),yn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=yn(this.opacity);return`${e===1?`hsl(`:`hsla(`}${Cn(this.h)}, ${wn(this.s)*100}%, ${wn(this.l)*100}%${e===1?`)`:`, ${e})`}`}}));function Cn(e){return e=(e||0)%360,e<0?e+360:e}function wn(e){return Math.max(0,Math.min(1,e||0))}function Tn(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}var En=e=>()=>e;function Dn(e,t){return function(n){return e+n*t}}function On(e,t,n){return e**=+n,t=t**+n-e,n=1/n,function(r){return(e+r*t)**+n}}function kn(e){return(e=+e)==1?An:function(t,n){return n-t?On(t,n,e):En(isNaN(t)?n:t)}}function An(e,t){var n=t-e;return n?Dn(e,n):En(isNaN(e)?t:e)}var jn=(function e(t){var n=kn(t);function r(e,t){var r=n((e=hn(e)).r,(t=hn(t)).r),i=n(e.g,t.g),a=n(e.b,t.b),o=An(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=a(t),e.opacity=o(t),e+``}}return r.gamma=e,r})(1);function V(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Mn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Nn=new RegExp(Mn.source,`g`);function Pn(e){return function(){return e}}function Fn(e){return function(t){return e(t)+``}}function In(e,t){var n=Mn.lastIndex=Nn.lastIndex=0,r,i,a,o=-1,s=[],c=[];for(e+=``,t+=``;(r=Mn.exec(e))&&(i=Nn.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,c.push({i:o,x:V(r,i)})),n=Nn.lastIndex;return n<t.length&&(a=t.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?c[0]?Fn(c[0].x):Pn(t):(t=c.length,function(e){for(var n=0,r;n<t;++n)s[(r=c[n]).i]=r.x(e);return s.join(``)})}var Ln=180/Math.PI,Rn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function zn(e,t,n,r,i,a){var o,s,c;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,c/=s),e*r<t*n&&(e=-e,t=-t,c=-c,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*Ln,skewX:Math.atan(c)*Ln,scaleX:o,scaleY:s}}var Bn;function Vn(e){let t=new(typeof DOMMatrix==`function`?DOMMatrix:WebKitCSSMatrix)(e+``);return t.isIdentity?Rn:zn(t.a,t.b,t.c,t.d,t.e,t.f)}function Hn(e){return e==null||(Bn||=document.createElementNS(`http://www.w3.org/2000/svg`,`g`),Bn.setAttribute(`transform`,e),!(e=Bn.transform.baseVal.consolidate()))?Rn:(e=e.matrix,zn(e.a,e.b,e.c,e.d,e.e,e.f))}function Un(e,t,n,r){function i(e){return e.length?e.pop()+` `:``}function a(e,r,i,a,o,s){if(e!==i||r!==a){var c=o.push(`translate(`,null,t,null,n);s.push({i:c-4,x:V(e,i)},{i:c-2,x:V(r,a)})}else (i||a)&&o.push(`translate(`+i+t+a+n)}function o(e,t,n,a){e===t?t&&n.push(i(n)+`rotate(`+t+r):(e-t>180?t+=360:t-e>180&&(e+=360),a.push({i:n.push(i(n)+`rotate(`,null,r)-2,x:V(e,t)}))}function s(e,t,n,a){e===t?t&&n.push(i(n)+`skewX(`+t+r):a.push({i:n.push(i(n)+`skewX(`,null,r)-2,x:V(e,t)})}function c(e,t,n,r,a,o){if(e!==n||t!==r){var s=a.push(i(a)+`scale(`,null,`,`,null,`)`);o.push({i:s-4,x:V(e,n)},{i:s-2,x:V(t,r)})}else (n!==1||r!==1)&&a.push(i(a)+`scale(`+n+`,`+r+`)`)}return function(t,n){var r=[],i=[];return t=e(t),n=e(n),a(t.translateX,t.translateY,n.translateX,n.translateY,r,i),o(t.rotate,n.rotate,r,i),s(t.skewX,n.skewX,r,i),c(t.scaleX,t.scaleY,n.scaleX,n.scaleY,r,i),t=n=null,function(e){for(var t=-1,n=i.length,a;++t<n;)r[(a=i[t]).i]=a.x(e);return r.join(``)}}}var Wn=Un(Vn,`px, `,`px)`,`deg)`),Gn=Un(Hn,`, `,`)`,`)`),Kn=1e-12;function qn(e){return((e=Math.exp(e))+1/e)/2}function Jn(e){return((e=Math.exp(e))-1/e)/2}function Yn(e){return((e=Math.exp(2*e))-1)/(e+1)}var Xn=(function e(t,n,r){function i(e,i){var a=e[0],o=e[1],s=e[2],c=i[0],l=i[1],u=i[2],d=c-a,f=l-o,p=d*d+f*f,m,h;if(p<Kn)h=Math.log(u/s)/t,m=function(e){return[a+e*d,o+e*f,s*Math.exp(t*e*h)]};else{var g=Math.sqrt(p),_=(u*u-s*s+r*p)/(2*s*n*g),v=(u*u-s*s-r*p)/(2*u*n*g),y=Math.log(Math.sqrt(_*_+1)-_);h=(Math.log(Math.sqrt(v*v+1)-v)-y)/t,m=function(e){var r=e*h,i=qn(y),c=s/(n*g)*(i*Yn(t*r+y)-Jn(y));return[a+c*d,o+c*f,s*i/qn(t*r+y)]}}return m.duration=h*1e3*t/Math.SQRT2,m}return i.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},i})(Math.SQRT2,2,4),H=0,Zn=0,Qn=0,$n=1e3,er,U,tr=0,W=0,nr=0,G=typeof performance==`object`&&performance.now?performance:Date,rr=typeof window==`object`&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ir(){return W||=(rr(ar),G.now()+nr)}function ar(){W=0}function or(){this._call=this._time=this._next=null}or.prototype=sr.prototype={constructor:or,restart:function(e,t,n){if(typeof e!=`function`)throw TypeError(`callback is not a function`);n=(n==null?ir():+n)+(t==null?0:+t),!this._next&&U!==this&&(U?U._next=this:er=this,U=this),this._call=e,this._time=n,fr()},stop:function(){this._call&&(this._call=null,this._time=1/0,fr())}};function sr(e,t,n){var r=new or;return r.restart(e,t,n),r}function cr(){ir(),++H;for(var e=er,t;e;)(t=W-e._time)>=0&&e._call.call(void 0,t),e=e._next;--H}function lr(){W=(tr=G.now())+nr,H=Zn=0;try{cr()}finally{H=0,dr(),W=0}}function ur(){var e=G.now(),t=e-tr;t>$n&&(nr-=t,tr=e)}function dr(){for(var e,t=er,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:er=n);U=e,fr(r)}function fr(e){H||(Zn&&=clearTimeout(Zn),e-W>24?(e<1/0&&(Zn=setTimeout(lr,e-G.now()-nr)),Qn&&=clearInterval(Qn)):(Qn||=(tr=G.now(),setInterval(ur,$n)),H=1,rr(lr)))}function pr(e,t,n){var r=new or;return t=t==null?0:+t,r.restart(n=>{r.stop(),e(n+t)},t,n),r}var mr=_(`start`,`end`,`cancel`,`interrupt`),hr=[];function gr(e,t,n,r,i,a){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;vr(e,n,{name:t,index:r,group:i,on:mr,tween:hr,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})}function _r(e,t){var n=q(e,t);if(n.state>0)throw Error(`too late; already scheduled`);return n}function K(e,t){var n=q(e,t);if(n.state>3)throw Error(`too late; already running`);return n}function q(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw Error(`transition not found`);return n}function vr(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=sr(a,0,n.time);function a(e){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=e&&o(e-n.delay)}function o(a){var l,u,d,f;if(n.state!==1)return c();for(l in r)if(f=r[l],f.name===n.name){if(f.state===3)return pr(o);f.state===4?(f.state=6,f.timer.stop(),f.on.call(`interrupt`,e,e.__data__,f.index,f.group),delete r[l]):+l<t&&(f.state=6,f.timer.stop(),f.on.call(`cancel`,e,e.__data__,f.index,f.group),delete r[l])}if(pr(function(){n.state===3&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(a))}),n.state=2,n.on.call(`start`,e,e.__data__,n.index,n.group),n.state===2){for(n.state=3,i=Array(d=n.tween.length),l=0,u=-1;l<d;++l)(f=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(i[++u]=f);i.length=u+1}}function s(t){for(var r=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(c),n.state=5,1),a=-1,o=i.length;++a<o;)i[a].call(e,r);n.state===5&&(n.on.call(`end`,e,e.__data__,n.index,n.group),c())}function c(){for(var i in n.state=6,n.timer.stop(),delete r[t],r)return;delete e.__transition}}function yr(e,t){var n=e.__transition,r,i,a=!0,o;if(n){for(o in t=t==null?null:t+``,n){if((r=n[o]).name!==t){a=!1;continue}i=r.state>2&&r.state<5,r.state=6,r.timer.stop(),r.on.call(i?`interrupt`:`cancel`,e,e.__data__,r.index,r.group),delete n[o]}a&&delete e.__transition}}function br(e){return this.each(function(){yr(this,e)})}function xr(e,t){var n,r;return function(){var i=K(this,e),a=i.tween;if(a!==n){r=n=a;for(var o=0,s=r.length;o<s;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Sr(e,t,n){var r,i;if(typeof n!=`function`)throw Error();return function(){var a=K(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:t,value:n},c=0,l=i.length;c<l;++c)if(i[c].name===t){i[c]=s;break}c===l&&i.push(s)}a.tween=i}}function Cr(e,t){var n=this._id;if(e+=``,arguments.length<2){for(var r=q(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?xr:Sr)(n,e,t))}function wr(e,t,n){var r=e._id;return e.each(function(){var e=K(this,r);(e.value||={})[t]=n.apply(this,arguments)}),function(e){return q(e,r).value[t]}}function Tr(e,t){var n;return(typeof t==`number`?V:t instanceof I?jn:(n=I(t))?(t=n,jn):In)(e,t)}function Er(e){return function(){this.removeAttribute(e)}}function Dr(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Or(e,t,n){var r,i=n+``,a;return function(){var o=this.getAttribute(e);return o===i?null:o===r?a:a=t(r=o,n)}}function kr(e,t,n){var r,i=n+``,a;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?a:a=t(r=o,n)}}function Ar(e,t,n){var r,i,a;return function(){var o,s=n(this),c;return s==null?void this.removeAttribute(e):(o=this.getAttribute(e),c=s+``,o===c?null:o===r&&c===i?a:(i=c,a=t(r=o,s)))}}function jr(e,t,n){var r,i,a;return function(){var o,s=n(this),c;return s==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),c=s+``,o===c?null:o===r&&c===i?a:(i=c,a=t(r=o,s)))}}function Mr(e,t){var n=C(e),r=n===`transform`?Gn:Tr;return this.attrTween(e,typeof t==`function`?(n.local?jr:Ar)(n,r,wr(this,`attr.`+e,t)):t==null?(n.local?Dr:Er)(n):(n.local?kr:Or)(n,r,t))}function Nr(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Pr(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Fr(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&Pr(e,i)),n}return i._value=t,i}function Ir(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&Nr(e,i)),n}return i._value=t,i}function Lr(e,t){var n=`attr.`+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!=`function`)throw Error();var r=C(e);return this.tween(n,(r.local?Fr:Ir)(r,t))}function Rr(e,t){return function(){_r(this,e).delay=+t.apply(this,arguments)}}function zr(e,t){return t=+t,function(){_r(this,e).delay=t}}function Br(e){var t=this._id;return arguments.length?this.each((typeof e==`function`?Rr:zr)(t,e)):q(this.node(),t).delay}function Vr(e,t){return function(){K(this,e).duration=+t.apply(this,arguments)}}function Hr(e,t){return t=+t,function(){K(this,e).duration=t}}function Ur(e){var t=this._id;return arguments.length?this.each((typeof e==`function`?Vr:Hr)(t,e)):q(this.node(),t).duration}function Wr(e,t){if(typeof t!=`function`)throw Error();return function(){K(this,e).ease=t}}function Gr(e){var t=this._id;return arguments.length?this.each(Wr(t,e)):q(this.node(),t).ease}function Kr(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!=`function`)throw Error();K(this,e).ease=n}}function qr(e){if(typeof e!=`function`)throw Error();return this.each(Kr(this._id,e))}function Jr(e){typeof e!=`function`&&(e=le(e));for(var t=this._groups,n=t.length,r=Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=[],c,l=0;l<o;++l)(c=a[l])&&e.call(c,c.__data__,l,a)&&s.push(c);return new J(r,this._parents,this._name,this._id)}function Yr(e){if(e._id!==this._id)throw Error();for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=Array(r),s=0;s<a;++s)for(var c=t[s],l=n[s],u=c.length,d=o[s]=Array(u),f,p=0;p<u;++p)(f=c[p]||l[p])&&(d[p]=f);for(;s<r;++s)o[s]=t[s];return new J(o,this._parents,this._name,this._id)}function Xr(e){return(e+``).trim().split(/^|\s+/).every(function(e){var t=e.indexOf(`.`);return t>=0&&(e=e.slice(0,t)),!e||e===`start`})}function Zr(e,t,n){var r,i,a=Xr(t)?_r:K;return function(){var o=a(this,e),s=o.on;s!==r&&(i=(r=s).copy()).on(t,n),o.on=i}}function Qr(e,t){var n=this._id;return arguments.length<2?q(this.node(),n).on.on(e):this.each(Zr(n,e,t))}function $r(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function ei(){return this.on(`end.remove`,$r(this._id))}function ti(e){var t=this._name,n=this._id;typeof e!=`function`&&(e=T(e));for(var r=this._groups,i=r.length,a=Array(i),o=0;o<i;++o)for(var s=r[o],c=s.length,l=a[o]=Array(c),u,d,f=0;f<c;++f)(u=s[f])&&(d=e.call(u,u.__data__,f,s))&&(`__data__`in u&&(d.__data__=u.__data__),l[f]=d,gr(l[f],t,n,f,l,q(u,n)));return new J(a,this._parents,t,n)}function ni(e){var t=this._name,n=this._id;typeof e!=`function`&&(e=oe(e));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var c=r[s],l=c.length,u,d=0;d<l;++d)if(u=c[d]){for(var f=e.call(u,u.__data__,d,c),p,m=q(u,n),h=0,g=f.length;h<g;++h)(p=f[h])&&gr(p,t,n,h,f,m);a.push(f),o.push(u)}return new J(a,o,t,n)}var ri=O.prototype.constructor;function ii(){return new ri(this._groups,this._parents)}function ai(e,t){var n,r,i;return function(){var a=E(this,e),o=(this.style.removeProperty(e),E(this,e));return a===o?null:a===n&&o===r?i:i=t(n=a,r=o)}}function oi(e){return function(){this.style.removeProperty(e)}}function si(e,t,n){var r,i=n+``,a;return function(){var o=E(this,e);return o===i?null:o===r?a:a=t(r=o,n)}}function ci(e,t,n){var r,i,a;return function(){var o=E(this,e),s=n(this),c=s+``;return s??(c=s=(this.style.removeProperty(e),E(this,e))),o===c?null:o===r&&c===i?a:(i=c,a=t(r=o,s))}}function li(e,t){var n,r,i,a=`style.`+t,o=`end.`+a,s;return function(){var c=K(this,e),l=c.on,u=c.value[a]==null?s||=oi(t):void 0;(l!==n||i!==u)&&(r=(n=l).copy()).on(o,i=u),c.on=r}}function ui(e,t,n){var r=(e+=``)==`transform`?Wn:Tr;return t==null?this.styleTween(e,ai(e,r)).on(`end.style.`+e,oi(e)):typeof t==`function`?this.styleTween(e,ci(e,r,wr(this,`style.`+e,t))).each(li(this._id,e)):this.styleTween(e,si(e,r,t),n).on(`end.style.`+e,null)}function di(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function fi(e,t,n){var r,i;function a(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&di(e,a,n)),r}return a._value=t,a}function pi(e,t,n){var r=`style.`+(e+=``);if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!=`function`)throw Error();return this.tween(r,fi(e,t,n??``))}function mi(e){return function(){this.textContent=e}}function hi(e){return function(){this.textContent=e(this)??``}}function gi(e){return this.tween(`text`,typeof e==`function`?hi(wr(this,`text`,e)):mi(e==null?``:e+``))}function _i(e){return function(t){this.textContent=e.call(this,t)}}function vi(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&_i(r)),t}return r._value=e,r}function yi(e){var t=`text`;if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!=`function`)throw Error();return this.tween(t,vi(e))}function bi(){for(var e=this._name,t=this._id,n=wi(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,c,l=0;l<s;++l)if(c=o[l]){var u=q(c,t);gr(c,e,n,l,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new J(r,this._parents,e,n)}function xi(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var s={value:o},c={value:function(){--i===0&&a()}};n.each(function(){var n=K(this,r),i=n.on;i!==e&&(t=(e=i).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(c)),n.on=t}),i===0&&a()})}var Si=0;function J(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Ci(e){return O().transition(e)}function wi(){return++Si}var Y=O.prototype;J.prototype=Ci.prototype={constructor:J,select:ti,selectAll:ni,selectChild:Y.selectChild,selectChildren:Y.selectChildren,filter:Jr,merge:Yr,selection:ii,transition:bi,call:Y.call,nodes:Y.nodes,node:Y.node,size:Y.size,empty:Y.empty,each:Y.each,on:Qr,attr:Mr,attrTween:Lr,style:ui,styleTween:pi,text:gi,textTween:yi,remove:ei,tween:Cr,delay:Br,duration:Ur,ease:Gr,easeVarying:qr,end:xi,[Symbol.iterator]:Y[Symbol.iterator]};function Ti(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Ei={time:null,delay:0,duration:250,ease:Ti};function Di(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw Error(`transition ${t} not found`);return n}function Oi(e){var t,n;e instanceof J?(t=e._id,e=e._name):(t=wi(),(n=Ei).time=ir(),e=e==null?null:e+``);for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,c,l=0;l<s;++l)(c=o[l])&&gr(c,e,t,l,o,n||Di(c,t));return new J(r,this._parents,e,t)}O.prototype.interrupt=br,O.prototype.transition=Oi;var{abs:ki,max:Ai,min:ji}=Math;[`w`,`e`].map(Mi),[`n`,`s`].map(Mi),[`n`,`w`,`e`,`s`,`nw`,`ne`,`sw`,`se`].map(Mi);function Mi(e){return{type:e}}var Ni=Math.PI,Pi=2*Ni,X=1e-6,Fi=Pi-X;function Ii(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Li(e){let t=Math.floor(e);if(!(t>=0))throw Error(`invalid digits: ${e}`);if(t>15)return Ii;let n=10**t;return function(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=Math.round(arguments[t]*n)/n+e[t]}}var Ri=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._=``,this._append=e==null?Ii:Li(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,n,r){this._append`Q${+e},${+t},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(e,t,n,r,i,a){this._append`C${+e},${+t},${+n},${+r},${this._x1=+i},${this._y1=+a}`}arcTo(e,t,n,r,i){if(e=+e,t=+t,n=+n,r=+r,i=+i,i<0)throw Error(`negative radius: ${i}`);let a=this._x1,o=this._y1,s=n-e,c=r-t,l=a-e,u=o-t,d=l*l+u*u;if(this._x1===null)this._append`M${this._x1=e},${this._y1=t}`;else if(d>X)if(!(Math.abs(u*s-c*l)>X)||!i)this._append`L${this._x1=e},${this._y1=t}`;else{let f=n-a,p=r-o,m=s*s+c*c,h=f*f+p*p,g=Math.sqrt(m),_=Math.sqrt(d),v=i*Math.tan((Ni-Math.acos((m+d-h)/(2*g*_)))/2),y=v/_,b=v/g;Math.abs(y-1)>X&&this._append`L${e+y*l},${t+y*u}`,this._append`A${i},${i},0,0,${+(u*f>l*p)},${this._x1=e+b*s},${this._y1=t+b*c}`}}arc(e,t,n,r,i,a){if(e=+e,t=+t,n=+n,a=!!a,n<0)throw Error(`negative radius: ${n}`);let o=n*Math.cos(r),s=n*Math.sin(r),c=e+o,l=t+s,u=1^a,d=a?r-i:i-r;this._x1===null?this._append`M${c},${l}`:(Math.abs(this._x1-c)>X||Math.abs(this._y1-l)>X)&&this._append`L${c},${l}`,n&&(d<0&&(d=d%Pi+Pi),d>Fi?this._append`A${n},${n},0,1,${u},${e-o},${t-s}A${n},${n},0,1,${u},${this._x1=c},${this._y1=l}`:d>X&&this._append`A${n},${n},0,${+(d>=Ni)},${u},${this._x1=e+n*Math.cos(i)},${this._y1=t+n*Math.sin(i)}`)}rect(e,t,n,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${n=+n}v${+r}h${-n}Z`}toString(){return this._}};function zi(){return new Ri}zi.prototype=Ri.prototype;function Bi(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const Vi=Symbol(`implicit`);function Hi(){var e=new c,t=[],n=[],r=Vi;function i(i){let a=e.get(i);if(a===void 0){if(r!==Vi)return r;e.set(i,a=t.push(i)-1)}return n[a%n.length]}return i.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new c;for(let r of n)e.has(r)||e.set(r,t.push(r)-1);return i},i.range=function(e){return arguments.length?(n=Array.from(e),i):n.slice()},i.unknown=function(e){return arguments.length?(r=e,i):r},i.copy=function(){return Hi(t,n).unknown(r)},Bi.apply(i,arguments),i}function Ui(e){for(var t=e.length/6|0,n=Array(t),r=0;r<t;)n[r]=`#`+e.slice(r*6,++r*6);return n}var Wi=Ui(`1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf`);function Gi(e){return function(){return e}}function Ki(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{let e=Math.floor(n);if(!(e>=0))throw RangeError(`invalid digits: ${n}`);t=e}return e},()=>new Ri(t)}var qi=Array.prototype.slice;function Ji(e){return e[0]}function Yi(e){return e[1]}var Xi=class{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t);break}this._x0=e,this._y0=t}};function Zi(e){return new Xi(e,!0)}function Qi(e){return e.source}function $i(e){return e.target}function ea(e){let t=Qi,n=$i,r=Ji,i=Yi,a=null,o=null,s=Ki(c);function c(){let c,l=qi.call(arguments),u=t.apply(this,l),d=n.apply(this,l);if(a??(o=e(c=s())),o.lineStart(),l[0]=u,o.point(+r.apply(this,l),+i.apply(this,l)),l[0]=d,o.point(+r.apply(this,l),+i.apply(this,l)),o.lineEnd(),c)return o=null,c+``||null}return c.source=function(e){return arguments.length?(t=e,c):t},c.target=function(e){return arguments.length?(n=e,c):n},c.x=function(e){return arguments.length?(r=typeof e==`function`?e:Gi(+e),c):r},c.y=function(e){return arguments.length?(i=typeof e==`function`?e:Gi(+e),c):i},c.context=function(t){return arguments.length?(t==null?a=o=null:o=e(a=t),c):a},c}function ta(){return ea(Zi)}var na=e=>()=>e;function ra(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Z(e,t,n){this.k=e,this.x=t,this.y=n}Z.prototype={constructor:Z,scale:function(e){return e===1?this:new Z(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Z(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return`translate(`+this.x+`,`+this.y+`) scale(`+this.k+`)`}};var ia=new Z(1,0,0);Q.prototype=Z.prototype;function Q(e){for(;!e.__zoom;)if(!(e=e.parentNode))return ia;return e.__zoom}function aa(e){e.stopImmediatePropagation()}function oa(e){e.preventDefault(),e.stopImmediatePropagation()}function sa(e){return(!e.ctrlKey||e.type===`wheel`)&&!e.button}function ca(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute(`viewBox`)?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function la(){return this.__zoom||ia}function ua(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function da(){return navigator.maxTouchPoints||`ontouchstart`in this}function fa(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}function pa(){var e=sa,t=ca,n=fa,r=ua,i=da,a=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],s=250,c=Xn,l=_(`start`,`zoom`,`end`),u,d,f,p=500,m=150,h=0,g=10;function v(e){e.property(`__zoom`,la).on(`wheel.zoom`,ee,{passive:!1}).on(`mousedown.zoom`,te).on(`dblclick.zoom`,ne).filter(i).on(`touchstart.zoom`,T).on(`touchmove.zoom`,re).on(`touchend.zoom touchcancel.zoom`,ie).style(`-webkit-tap-highlight-color`,`rgba(0,0,0,0)`)}v.transform=function(e,t,n,r){var i=e.selection?e.selection():e;i.property(`__zoom`,la),e===i?i.interrupt().each(function(){C(this,arguments).event(r).start().zoom(null,typeof t==`function`?t.apply(this,arguments):t).end()}):S(e,t,n,r)},v.scaleBy=function(e,t,n,r){v.scaleTo(e,function(){return this.__zoom.k*(typeof t==`function`?t.apply(this,arguments):t)},n,r)},v.scaleTo=function(e,r,i,a){v.transform(e,function(){var e=t.apply(this,arguments),a=this.__zoom,s=i==null?x(e):typeof i==`function`?i.apply(this,arguments):i,c=a.invert(s),l=typeof r==`function`?r.apply(this,arguments):r;return n(b(y(a,l),s,c),e,o)},i,a)},v.translateBy=function(e,r,i,a){v.transform(e,function(){return n(this.__zoom.translate(typeof r==`function`?r.apply(this,arguments):r,typeof i==`function`?i.apply(this,arguments):i),t.apply(this,arguments),o)},null,a)},v.translateTo=function(e,r,i,a,s){v.transform(e,function(){var e=t.apply(this,arguments),s=this.__zoom,c=a==null?x(e):typeof a==`function`?a.apply(this,arguments):a;return n(ia.translate(c[0],c[1]).scale(s.k).translate(typeof r==`function`?-r.apply(this,arguments):-r,typeof i==`function`?-i.apply(this,arguments):-i),e,o)},a,s)};function y(e,t){return t=Math.max(a[0],Math.min(a[1],t)),t===e.k?e:new Z(t,e.x,e.y)}function b(e,t,n){var r=t[0]-n[0]*e.k,i=t[1]-n[1]*e.k;return r===e.x&&i===e.y?e:new Z(e.k,r,i)}function x(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function S(e,n,r,i){e.on(`start.zoom`,function(){C(this,arguments).event(i).start()}).on(`interrupt.zoom end.zoom`,function(){C(this,arguments).event(i).end()}).tween(`zoom`,function(){var e=this,a=arguments,o=C(e,a).event(i),s=t.apply(e,a),l=r==null?x(s):typeof r==`function`?r.apply(e,a):r,u=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),d=e.__zoom,f=typeof n==`function`?n.apply(e,a):n,p=c(d.invert(l).concat(u/d.k),f.invert(l).concat(u/f.k));return function(e){if(e===1)e=f;else{var t=p(e),n=u/t[2];e=new Z(n,l[0]-t[0]*n,l[1]-t[1]*n)}o.zoom(null,e)}})}function C(e,t,n){return!n&&e.__zooming||new w(e,t)}function w(e,n){this.that=e,this.args=n,this.active=0,this.sourceEvent=null,this.extent=t.apply(e,n),this.taps=0}w.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit(`start`)),this},zoom:function(e,t){return this.mouse&&e!==`mouse`&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&e!==`touch`&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&e!==`touch`&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit(`zoom`),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit(`end`)),this},emit:function(e){var t=k(this.that).datum();l.call(e,this.that,new ra(e,{sourceEvent:this.sourceEvent,target:v,type:e,transform:this.that.__zoom,dispatch:l}),t)}};function ee(t,...i){if(!e.apply(this,arguments))return;var s=C(this,i).event(t),c=this.__zoom,l=Math.max(a[0],Math.min(a[1],c.k*2**r.apply(this,arguments))),u=A(t);if(s.wheel)(s.mouse[0][0]!==u[0]||s.mouse[0][1]!==u[1])&&(s.mouse[1]=c.invert(s.mouse[0]=u)),clearTimeout(s.wheel);else if(c.k===l)return;else s.mouse=[u,c.invert(u)],yr(this),s.start();oa(t),s.wheel=setTimeout(d,m),s.zoom(`mouse`,n(b(y(c,l),s.mouse[0],s.mouse[1]),s.extent,o));function d(){s.wheel=null,s.end()}}function te(t,...r){if(f||!e.apply(this,arguments))return;var i=t.currentTarget,a=C(this,r,!0).event(t),s=k(t.view).on(`mousemove.zoom`,d,!0).on(`mouseup.zoom`,p,!0),c=A(t,i),l=t.clientX,u=t.clientY;Jt(t.view),aa(t),a.mouse=[c,this.__zoom.invert(c)],yr(this),a.start();function d(e){if(oa(e),!a.moved){var t=e.clientX-l,r=e.clientY-u;a.moved=t*t+r*r>h}a.event(e).zoom(`mouse`,n(b(a.that.__zoom,a.mouse[0]=A(e,i),a.mouse[1]),a.extent,o))}function p(e){s.on(`mousemove.zoom mouseup.zoom`,null),Yt(e.view,a.moved),oa(e),a.event(e).end()}}function ne(r,...i){if(e.apply(this,arguments)){var a=this.__zoom,c=A(r.changedTouches?r.changedTouches[0]:r,this),l=a.invert(c),u=a.k*(r.shiftKey?.5:2),d=n(b(y(a,u),c,l),t.apply(this,i),o);oa(r),s>0?k(this).transition().duration(s).call(S,d,c,r):k(this).call(v.transform,d,c,r)}}function T(t,...n){if(e.apply(this,arguments)){var r=t.touches,i=r.length,a=C(this,n,t.changedTouches.length===i).event(t),o,s,c,l;for(aa(t),s=0;s<i;++s)c=r[s],l=A(c,this),l=[l,this.__zoom.invert(l),c.identifier],a.touch0?!a.touch1&&a.touch0[2]!==l[2]&&(a.touch1=l,a.taps=0):(a.touch0=l,o=!0,a.taps=1+!!u);u&&=clearTimeout(u),o&&(a.taps<2&&(d=l[0],u=setTimeout(function(){u=null},p)),yr(this),a.start())}}function re(e,...t){if(this.__zooming){var r=C(this,t).event(e),i=e.changedTouches,a=i.length,s,c,l,u;for(oa(e),s=0;s<a;++s)c=i[s],l=A(c,this),r.touch0&&r.touch0[2]===c.identifier?r.touch0[0]=l:r.touch1&&r.touch1[2]===c.identifier&&(r.touch1[0]=l);if(c=r.that.__zoom,r.touch1){var d=r.touch0[0],f=r.touch0[1],p=r.touch1[0],m=r.touch1[1],h=(h=p[0]-d[0])*h+(h=p[1]-d[1])*h,g=(g=m[0]-f[0])*g+(g=m[1]-f[1])*g;c=y(c,Math.sqrt(h/g)),l=[(d[0]+p[0])/2,(d[1]+p[1])/2],u=[(f[0]+m[0])/2,(f[1]+m[1])/2]}else if(r.touch0)l=r.touch0[0],u=r.touch0[1];else return;r.zoom(`touch`,n(b(c,l,u),r.extent,o))}}function ie(e,...t){if(this.__zooming){var n=C(this,t).event(e),r=e.changedTouches,i=r.length,a,o;for(aa(e),f&&clearTimeout(f),f=setTimeout(function(){f=null},p),a=0;a<i;++a)o=r[a],n.touch0&&n.touch0[2]===o.identifier?delete n.touch0:n.touch1&&n.touch1[2]===o.identifier&&delete n.touch1;if(n.touch1&&!n.touch0&&(n.touch0=n.touch1,delete n.touch1),n.touch0)n.touch0[1]=this.__zoom.invert(n.touch0[0]);else if(n.end(),n.taps===2&&(o=A(o,this),Math.hypot(d[0]-o[0],d[1]-o[1])<g)){var s=k(this).on(`dblclick.zoom`);s&&s.apply(this,arguments)}}}return v.wheelDelta=function(e){return arguments.length?(r=typeof e==`function`?e:na(+e),v):r},v.filter=function(t){return arguments.length?(e=typeof t==`function`?t:na(!!t),v):e},v.touchable=function(e){return arguments.length?(i=typeof e==`function`?e:na(!!e),v):i},v.extent=function(e){return arguments.length?(t=typeof e==`function`?e:na([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),v):t},v.scaleExtent=function(e){return arguments.length?(a[0]=+e[0],a[1]=+e[1],v):[a[0],a[1]]},v.translateExtent=function(e){return arguments.length?(o[0][0]=+e[0][0],o[1][0]=+e[1][0],o[0][1]=+e[0][1],o[1][1]=+e[1][1],v):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},v.constrain=function(e){return arguments.length?(n=e,v):n},v.duration=function(e){return arguments.length?(s=+e,v):s},v.interpolate=function(e){return arguments.length?(c=e,v):c},v.on=function(){var e=l.on.apply(l,arguments);return e===l?v:e},v.clickDistance=function(e){return arguments.length?(h=(e=+e)*e,v):Math.sqrt(h)},v.tapDistance=function(e){return arguments.length?(g=+e,v):g},v}var ma=typeof navigator<`u`&&navigator.userAgent.includes(`Macintosh`),ha=Hi(Wi),ga=(e=1,t=3,n=2)=>r=>e+t/n**r.state.depth,_a={autoFit:!1,duration:500,embedGlobalCSS:!0,fitRatio:.95,maxInitialScale:2,scrollForPan:ma,initialExpandLevel:-1,zoom:!0,pan:!0,toggleRecursively:!1,color:e=>ha(`${e.state?.path||``}`),lineWidth:ga(),maxWidth:0,nodeMinHeight:16,paddingX:8,spacingHorizontal:80,spacingVertical:5};function va(e){let t={},n={...e},{color:r,colorFreezeLevel:i,lineWidth:a}=n;if(r?.length===1){let e=r[0];t.color=()=>e}else if(r!=null&&r.length){let e=Hi(r);t.color=t=>e(`${t.state.path}`)}if(i){let e=t.color||_a.color;t.color=t=>(t={...t,state:{...t.state,path:t.state.path.split(`.`).slice(0,i).join(`.`)}},e(t))}return a&&(t.lineWidth=ga(...Array.isArray(a)?a:[a,0,1])),[`duration`,`fitRatio`,`initialExpandLevel`,`maxInitialScale`,`maxWidth`,`nodeMinHeight`,`paddingX`,`spacingHorizontal`,`spacingVertical`].forEach(e=>{let r=n[e];typeof r==`number`&&(t[e]=r)}),[`zoom`,`pan`].forEach(e=>{let r=n[e];r!=null&&(t[e]=!!r)}),t}function ya(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n)|0;return(t>>>0).toString(36)}function $(e){if(typeof e==`string`){let t=e;e=e=>e.matches(t)}let t=e;return function(){let e=Array.from(this.childNodes);return t&&(e=e.filter(e=>t(e))),e}}function ba(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function xa(){return this.eachAfter(ba)}function Sa(e){var t=this,n,r=[t],i,a,o;do for(n=r.reverse(),r=[];t=n.pop();)if(e(t),i=t.children,i)for(a=0,o=i.length;a<o;++a)r.push(i[a]);while(r.length);return this}function Ca(e){for(var t=this,n=[t],r,i;t=n.pop();)if(e(t),r=t.children,r)for(i=r.length-1;i>=0;--i)n.push(r[i]);return this}function wa(e){for(var t=this,n=[t],r=[],i,a,o;t=n.pop();)if(r.push(t),i=t.children,i)for(a=0,o=i.length;a<o;++a)n.push(i[a]);for(;t=r.pop();)e(t);return this}function Ta(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function Ea(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Da(e){for(var t=this,n=Oa(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function Oa(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function ka(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Aa(){var e=[];return this.each(function(t){e.push(t)}),e}function ja(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Ma(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function Na(e,t){var n=new Ra(e),r=+e.value&&(n.value=e.value),i,a=[n],o,s,c,l;for(t??=Fa;i=a.pop();)if(r&&(i.value=+i.data.value),(s=t(i.data))&&(l=s.length))for(i.children=Array(l),c=l-1;c>=0;--c)a.push(o=i.children[c]=new Ra(s[c])),o.parent=i,o.depth=i.depth+1;return n.eachBefore(La)}function Pa(){return Na(this).eachBefore(Ia)}function Fa(e){return e.children}function Ia(e){e.data=e.data.data}function La(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Ra(e){this.data=e,this.depth=this.height=0,this.parent=null}Ra.prototype=Na.prototype={constructor:Ra,count:xa,each:Sa,eachAfter:wa,eachBefore:Ca,sum:Ta,sort:Ea,path:Da,ancestors:ka,descendants:Aa,leaves:ja,links:Ma,copy:Pa};var{version:za}={version:`2.1.2`},Ba=Object.freeze({children:e=>e.children,nodeSize:e=>e.data.size,spacing:0});function Va(e){let t=Object.assign({},Ba,e);function n(e){let n=t[e];return typeof n==`function`?n:()=>n}function r(e){let t=o(a(),e,e=>e.children);return t.update(),t.data}function i(){let e=n(`nodeSize`),t=n(`spacing`);return class n extends Na.prototype.constructor{constructor(e){super(e)}copy(){let e=o(this.constructor,this,e=>e.children);return e.each(e=>e.data=e.data.data),e}get size(){return e(this)}spacing(e){return t(this,e)}get nodes(){return this.descendants()}get xSize(){return this.size[0]}get ySize(){return this.size[1]}get top(){return this.y}get bottom(){return this.y+this.ySize}get left(){return this.x-this.xSize/2}get right(){return this.x+this.xSize/2}get root(){let e=this.ancestors();return e[e.length-1]}get numChildren(){return this.hasChildren?this.children.length:0}get hasChildren(){return!this.noChildren}get noChildren(){return this.children===null}get firstChild(){return this.hasChildren?this.children[0]:null}get lastChild(){return this.hasChildren?this.children[this.numChildren-1]:null}get extents(){return(this.children||[]).reduce((e,t)=>n.maxExtents(e,t.extents),this.nodeExtents)}get nodeExtents(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}static maxExtents(e,t){return{top:Math.min(e.top,t.top),bottom:Math.max(e.bottom,t.bottom),left:Math.min(e.left,t.left),right:Math.max(e.right,t.right)}}}}function a(){let e=i(),t=n(`nodeSize`),r=n(`spacing`);return class extends e{constructor(e){super(e),Object.assign(this,{x:0,y:0,relX:0,prelim:0,shift:0,change:0,lExt:this,lExtRelX:0,lThr:null,rExt:this,rExtRelX:0,rThr:null})}get size(){return t(this.data)}spacing(e){return r(this.data,e.data)}get x(){return this.data.x}set x(e){this.data.x=e}get y(){return this.data.y}set y(e){this.data.y=e}update(){return Ha(this),Ua(this),this}}}function o(e,t,n){let r=(t,i)=>{let a=new e(t);Object.assign(a,{parent:i,depth:i===null?0:i.depth+1,height:0,length:1});let o=n(t)||[];return a.children=o.length===0?null:o.map(e=>r(e,a)),a.children&&Object.assign(a,a.children.reduce((e,t)=>({height:Math.max(e.height,t.height+1),length:e.length+t.length}),a)),a};return r(t,null)}return Object.assign(r,{nodeSize(e){return arguments.length?(t.nodeSize=e,r):t.nodeSize},spacing(e){return arguments.length?(t.spacing=e,r):t.spacing},children(e){return arguments.length?(t.children=e,r):t.children},hierarchy(e,n){let r=typeof n>`u`?t.children:n;return o(i(),e,r)},dump(e){let t=n(`nodeSize`),r=e=>n=>{let i=e+`  `,a=e+`    `,{x:o,y:s}=n,c=t(n),l=n.children||[],u=l.length===0?` `:`,${i}children: [${a}${l.map(r(a)).join(a)}${i}],${e}`;return`{ size: [${c.join(`, `)}],${i}x: ${o}, y: ${s}${u}},`};return r(`
`)(e)}}),r}Va.version=za;var Ha=(e,t=0)=>(e.y=t,(e.children||[]).reduce((t,n)=>{let[r,i]=t;Ha(n,e.y+e.ySize);let a=(r===0?n.lExt:n.rExt).bottom;r!==0&&Ga(e,r,i);let o=$a(a,r,i);return[r+1,o]},[0,null]),Wa(e),Qa(e),e),Ua=(e,t,n)=>{typeof t>`u`&&(t=-e.relX-e.prelim,n=0);let r=t+e.relX;return e.relX=r+e.prelim-n,e.prelim=0,e.x=n+e.relX,(e.children||[]).forEach(t=>Ua(t,r,e.x)),e},Wa=e=>{(e.children||[]).reduce((e,t)=>{let[n,r]=e,i=n+t.shift,a=r+i+t.change;return t.relX+=a,[i,a]},[0,0])},Ga=(e,t,n)=>{let r=e.children[t-1],i=e.children[t],a=r,o=r.relX,s=i,c=i.relX,l=!0;for(;a&&s;){a.bottom>n.lowY&&(n=n.next);let r=o+a.prelim-(c+s.prelim)+a.xSize/2+s.xSize/2+a.spacing(s);(r>0||r<0&&l)&&(c+=r,Ka(i,r),qa(e,t,n.index,r)),l=!1;let u=a.bottom,d=s.bottom;u<=d&&(a=Ya(a),a&&(o+=a.relX)),u>=d&&(s=Ja(s),s&&(c+=s.relX))}!a&&s?Xa(e,t,s,c):a&&!s&&Za(e,t,a,o)},Ka=(e,t)=>{e.relX+=t,e.lExtRelX+=t,e.rExtRelX+=t},qa=(e,t,n,r)=>{let i=e.children[t],a=t-n;if(a>1){let t=r/a;e.children[n+1].shift+=t,i.shift-=t,i.change-=r-t}},Ja=e=>e.hasChildren?e.firstChild:e.lThr,Ya=e=>e.hasChildren?e.lastChild:e.rThr,Xa=(e,t,n,r)=>{let i=e.firstChild,a=i.lExt,o=e.children[t];a.lThr=n;let s=r-n.relX-i.lExtRelX;a.relX+=s,a.prelim-=s,i.lExt=o.lExt,i.lExtRelX=o.lExtRelX},Za=(e,t,n,r)=>{let i=e.children[t],a=i.rExt,o=e.children[t-1];a.rThr=n;let s=r-n.relX-i.rExtRelX;a.relX+=s,a.prelim-=s,i.rExt=o.rExt,i.rExtRelX=o.rExtRelX},Qa=e=>{if(e.hasChildren){let t=e.firstChild,n=e.lastChild,r=(t.prelim+t.relX-t.xSize/2+n.relX+n.prelim+n.xSize/2)/2;Object.assign(e,{prelim:r,lExt:t.lExt,lExtRelX:t.lExtRelX,rExt:n.rExt,rExtRelX:n.rExtRelX})}},$a=(e,t,n)=>{for(;n!==null&&e>=n.lowY;)n=n.next;return{lowY:e,index:t,next:n}},eo=`.markmap{--markmap-max-width: 9999px;--markmap-a-color: #0097e6;--markmap-a-hover-color: #00a8ff;--markmap-code-bg: #f0f0f0;--markmap-code-color: #555;--markmap-highlight-bg: #ffeaa7;--markmap-table-border: 1px solid currentColor;--markmap-font: 300 16px/20px sans-serif;--markmap-circle-open-bg: #fff;--markmap-text-color: #333;--markmap-highlight-node-bg: #ff02;font:var(--markmap-font);color:var(--markmap-text-color)}.markmap-link{fill:none}.markmap-node>circle{cursor:pointer}.markmap-foreign{display:inline-block}.markmap-foreign p{margin:0}.markmap-foreign a{color:var(--markmap-a-color)}.markmap-foreign a:hover{color:var(--markmap-a-hover-color)}.markmap-foreign code{padding:.25em;font-size:calc(1em - 2px);color:var(--markmap-code-color);background-color:var(--markmap-code-bg);border-radius:2px}.markmap-foreign pre{margin:0}.markmap-foreign pre>code{display:block}.markmap-foreign del{text-decoration:line-through}.markmap-foreign em{font-style:italic}.markmap-foreign strong{font-weight:700}.markmap-foreign mark{background:var(--markmap-highlight-bg)}.markmap-foreign table,.markmap-foreign th,.markmap-foreign td{border-collapse:collapse;border:var(--markmap-table-border)}.markmap-foreign img{display:inline-block}.markmap-foreign svg{fill:currentColor}.markmap-foreign>div{width:var(--markmap-max-width);text-align:left}.markmap-foreign>div>div{display:inline-block}.markmap-highlight rect{fill:var(--markmap-highlight-node-bg)}.markmap-dark .markmap{--markmap-code-bg: #1a1b26;--markmap-code-color: #ddd;--markmap-circle-open-bg: #444;--markmap-text-color: #eee}`,to=eo,no=`g.markmap-node`,ro=`path.markmap-link`,io=`g.markmap-highlight`,ao=ta();function oo(e,t){return e[h(e,t)]}function so(e){e.stopPropagation()}var co=new o,lo=class e{constructor(e,t){this.options={..._a},this._disposeList=[],this.handleZoom=e=>{let{transform:t}=e;this.g.attr(`transform`,t)},this.handlePan=e=>{e.preventDefault();let t=Q(this.svg.node()),n=t.translate(-e.deltaX/t.k,-e.deltaY/t.k);this.svg.call(this.zoom.transform,n)},this.handleClick=(e,t)=>{let n=this.options.toggleRecursively;(ma?e.metaKey:e.ctrlKey)&&(n=!n),this.toggleNode(t,n)},this.ensureView=this.ensureVisible,this.svg=e.datum?e:k(e),this.styleNode=this.svg.append(`style`),this.zoom=pa().filter(e=>this.options.scrollForPan&&e.type===`wheel`?e.ctrlKey&&!e.button:(!e.ctrlKey||e.type===`wheel`)&&!e.button).on(`zoom`,this.handleZoom),this.setOptions(t),this.state={id:this.options.id||this.svg.attr(`id`)||a(),rect:{x1:0,y1:0,x2:0,y2:0}},this.g=this.svg.append(`g`),this.g.append(`g`).attr(`class`,`markmap-highlight`),this._observer=new ResizeObserver(r(()=>{this.renderData()},100)),this._disposeList.push(co.tap(()=>{this.setData()}),()=>this._observer.disconnect())}getStyleContent(){let{style:e}=this.options,{id:t}=this.state,n=typeof e==`function`?e(t):``;return[this.options.embedGlobalCSS&&eo,n].filter(Boolean).join(`
`)}updateStyle(){this.svg.attr(`class`,i(this.svg.attr(`class`),`markmap`,this.state.id));let e=this.getStyleContent();this.styleNode.text(e)}async toggleNode(e,n=!1){var r,i;let a=(r=e.payload)!=null&&r.fold?0:1;n?t(e,(e,t)=>{e.payload={...e.payload,fold:a},t()}):e.payload={...e.payload,fold:(i=e.payload)!=null&&i.fold?0:1},await this.renderData(e)}_initializeData(e){let n=0,{color:r,initialExpandLevel:i}=this.options,a=0,o=0;return t(e,(e,t,s)=>{o+=1,e.children=e.children?.map(e=>({...e})),n+=1,e.state={...e.state,depth:o,id:n,rect:{x:0,y:0,width:0,height:0},size:[0,0]},e.state.key=[s?.state?.id,e.state.id].filter(Boolean).join(`.`)+ya(e.content),e.state.path=[s?.state?.path,e.state.id].filter(Boolean).join(`.`),r(e);let c=e.payload?.fold===2;c?a+=1:(a||i>=0&&e.state.depth>=i)&&(e.payload={...e.payload,fold:1}),t(),c&&--a,--o}),e}_relayout(){if(!this.state.data)return;this.g.selectAll($(no)).selectAll($(`foreignObject`)).each(function(e){let t=this.firstChild?.firstChild,n=[t.scrollWidth,t.scrollHeight];e.state.size=n});let{lineWidth:e,paddingX:t,spacingHorizontal:n,spacingVertical:r}=this.options,i=Va({}).children(e=>{var t;if(!((t=e.payload)!=null&&t.fold))return e.children}).nodeSize(e=>{let[r,i]=e.data.state.size;return[i,r+(r?t*2:0)+n]}).spacing((t,n)=>(t.parent===n.parent?r:r*2)+e(t.data)),a=i.hierarchy(this.state.data);i(a);let o=a.descendants();o.forEach(e=>{let t=e.data;t.state.rect={x:e.y,y:e.x-e.xSize/2,width:e.ySize-n,height:e.xSize}}),this.state.rect={x1:m(o,e=>e.data.state.rect.x)||0,y1:m(o,e=>e.data.state.rect.y)||0,x2:p(o,e=>e.data.state.rect.x+e.data.state.rect.width)||0,y2:p(o,e=>e.data.state.rect.y+e.data.state.rect.height)||0}}setOptions(e){this.options={...this.options,...e},this.options.zoom?this.svg.call(this.zoom):this.svg.on(`.zoom`,null),this.options.pan?this.svg.on(`wheel`,this.handlePan):this.svg.on(`wheel`,null)}async setData(e,t){t&&this.setOptions(t),e&&(this.state.data=this._initializeData(e)),this.state.data&&(this.updateStyle(),await this.renderData())}async setHighlight(e){this.state.highlight=e||void 0,await this.renderData()}_getHighlightRect(e){let t=4/Q(this.svg.node()).k,n={...e.state.rect};return n.x-=t,n.y-=t,n.width+=2*t,n.height+=2*t,n}async renderData(e){let{paddingX:n,autoFit:r,color:i,maxWidth:a,lineWidth:o}=this.options,s=this.state.data;if(!s)return;let c={},l={},u=[];t(s,(e,t,n)=>{var r;(r=e.payload)!=null&&r.fold||t(),c[e.state.id]=e,n&&(l[e.state.id]=n.state.id),u.push(e)});let d={},f={},p=e=>{!e||d[e.state.id]||t(e,(t,n)=>{d[t.state.id]=e.state.id,n()})},m=e=>f[d[e.state.id]]||s.state.rect,h=e=>(c[d[e.state.id]]||s).state.rect;f[s.state.id]=s.state.rect,e&&p(e);let{highlight:g}=this.state;g&&!c[g.state.id]&&(g=void 0);let _=this.g.selectAll($(io)).selectAll($(`rect`)).data(g?[this._getHighlightRect(g)]:[]).join(`rect`).attr(`x`,e=>e.x).attr(`y`,e=>e.y).attr(`width`,e=>e.width).attr(`height`,e=>e.height),v=this.g.selectAll($(no)).each(e=>{f[e.state.id]=e.state.rect}).data(u,e=>e.state.key),y=v.enter().append(`g`).attr(`data-depth`,e=>e.state.depth).attr(`data-path`,e=>e.state.path).each(e=>{p(c[l[e.state.id]])}),b=v.exit().each(e=>{p(c[l[e.state.id]])}),x=v.merge(y).attr(`class`,e=>[`markmap-node`,e.payload?.fold&&`markmap-fold`].filter(Boolean).join(` `)),S=x.selectAll($(`line`)).data(e=>[e],e=>e.state.key),C=S.enter().append(`line`).attr(`stroke`,e=>i(e)).attr(`stroke-width`,0),w=S.merge(C),ee=x.selectAll($(`circle`)).data(e=>{var t;return(t=e.children)!=null&&t.length?[e]:[]},e=>e.state.key),te=ee.enter().append(`circle`).attr(`stroke-width`,0).attr(`r`,0).on(`click`,(e,t)=>this.handleClick(e,t)).on(`mousedown`,so).merge(ee).attr(`stroke`,e=>i(e)).attr(`fill`,e=>{var t;return(t=e.payload)!=null&&t.fold&&e.children?i(e):`var(--markmap-circle-open-bg)`}),ne=this._observer,T=x.selectAll($(`foreignObject`)).data(e=>[e],e=>e.state.key),re=T.enter().append(`foreignObject`).attr(`class`,`markmap-foreign`).attr(`x`,n).attr(`y`,0).style(`opacity`,0).on(`mousedown`,so).on(`dblclick`,so);re.append(`xhtml:div`).append(`xhtml:div`).html(e=>e.content).attr(`xmlns`,`http://www.w3.org/1999/xhtml`),re.each(function(){let e=this.firstChild?.firstChild;ne.observe(e)});let ie=b.selectAll($(`foreignObject`));ie.each(function(){let e=this.firstChild?.firstChild;ne.unobserve(e)});let ae=re.merge(T),oe=u.flatMap(e=>{var t;return(t=e.payload)!=null&&t.fold?[]:e.children.map(t=>({source:e,target:t}))}),se=this.g.selectAll($(ro)).data(oe,e=>e.target.state.key),ce=se.exit(),le=se.enter().insert(`path`,`g`).attr(`class`,`markmap-link`).attr(`data-depth`,e=>e.target.state.depth).attr(`data-path`,e=>e.target.state.path).attr(`d`,e=>{let t=m(e.target),n=[t.x+t.width,t.y+t.height];return ao({source:n,target:n})}).attr(`stroke-width`,0).merge(se);this.svg.style(`--markmap-max-width`,a?`${a}px`:null),await new Promise(requestAnimationFrame),this._relayout(),_=_.data(g?[this._getHighlightRect(g)]:[]).join(`rect`),this.transition(_).attr(`x`,e=>e.x).attr(`y`,e=>e.y).attr(`width`,e=>e.width).attr(`height`,e=>e.height),y.attr(`transform`,e=>{let t=m(e);return`translate(${t.x+t.width-e.state.rect.width},${t.y+t.height-e.state.rect.height})`}),this.transition(b).attr(`transform`,e=>{let t=h(e);return`translate(${t.x+t.width-e.state.rect.width},${t.y+t.height-e.state.rect.height})`}).remove(),this.transition(x).attr(`transform`,e=>`translate(${e.state.rect.x},${e.state.rect.y})`);let ue=b.selectAll($(`line`));this.transition(ue).attr(`x1`,e=>e.state.rect.width).attr(`stroke-width`,0),C.attr(`x1`,e=>e.state.rect.width).attr(`x2`,e=>e.state.rect.width),w.attr(`y1`,e=>e.state.rect.height+o(e)/2).attr(`y2`,e=>e.state.rect.height+o(e)/2),this.transition(w).attr(`x1`,-1).attr(`x2`,e=>e.state.rect.width+2).attr(`stroke`,e=>i(e)).attr(`stroke-width`,o);let de=b.selectAll($(`circle`));this.transition(de).attr(`r`,0).attr(`stroke-width`,0),te.attr(`cx`,e=>e.state.rect.width).attr(`cy`,e=>e.state.rect.height+o(e)/2),this.transition(te).attr(`r`,6).attr(`stroke-width`,`1.5`),this.transition(ie).style(`opacity`,0),ae.attr(`width`,e=>Math.max(0,e.state.rect.width-n*2)).attr(`height`,e=>e.state.rect.height),this.transition(ae).style(`opacity`,1),this.transition(ce).attr(`d`,e=>{let t=h(e.target),n=[t.x+t.width,t.y+t.height+o(e.target)/2];return ao({source:n,target:n})}).attr(`stroke-width`,0).remove(),this.transition(le).attr(`stroke`,e=>i(e.target)).attr(`stroke-width`,e=>o(e.target)).attr(`d`,e=>{let t=e.source,n=e.target;return ao({source:[t.state.rect.x+t.state.rect.width,t.state.rect.y+t.state.rect.height+o(t)/2],target:[n.state.rect.x,n.state.rect.y+n.state.rect.height+o(n)/2]})}),r&&this.fit()}transition(e){let{duration:t}=this.options;return e.transition().duration(t)}async fit(e=this.options.maxInitialScale){let{width:t,height:n}=this.svg.node().getBoundingClientRect(),{fitRatio:r}=this.options,{x1:i,y1:a,x2:o,y2:c}=this.state.rect,l=o-i,u=c-a,d=Math.min(t/l*r,n/u*r,e),f=ia.translate((t-l*d)/2-i*d,(n-u*d)/2-a*d).scale(d);return this.transition(this.svg).call(this.zoom.transform,f).end().catch(s)}findElement(e){let t;return this.g.selectAll($(no)).each(function(n){n===e&&(t={data:n,g:this})}),t}async ensureVisible(e,t){let n=this.findElement(e)?.data;if(!n)return;let r=this.svg.node(),i=r.getBoundingClientRect(),a=Q(r),[o,c]=[n.state.rect.x,n.state.rect.x+n.state.rect.width+2].map(e=>e*a.k+a.x),[l,u]=[n.state.rect.y,n.state.rect.y+n.state.rect.height].map(e=>e*a.k+a.y),d={left:0,right:0,top:0,bottom:0,...t},f=[d.left-o,i.width-d.right-c],p=[d.top-l,i.height-d.bottom-u],m=f[0]*f[1]>0?oo(f,Math.abs)/a.k:0,h=p[0]*p[1]>0?oo(p,Math.abs)/a.k:0;if(m||h){let e=a.translate(m,h);return this.transition(this.svg).call(this.zoom.transform,e).end().catch(s)}}async centerNode(e,t){let n=this.findElement(e)?.data;if(!n)return;let r=this.svg.node(),i=r.getBoundingClientRect(),a=Q(r),o=(n.state.rect.x+n.state.rect.width/2)*a.k+a.x,c=(n.state.rect.y+n.state.rect.height/2)*a.k+a.y,l={left:0,right:0,top:0,bottom:0,...t},u=(l.left+i.width-l.right)/2,d=(l.top+i.height-l.bottom)/2,f=(u-o)/a.k,p=(d-c)/a.k;if(f||p){let e=a.translate(f,p);return this.transition(this.svg).call(this.zoom.transform,e).end().catch(s)}}async rescale(e){let t=this.svg.node(),{width:n,height:r}=t.getBoundingClientRect(),i=n/2,a=r/2,o=Q(t),c=o.translate((i-o.x)*(1-e)/o.k,(a-o.y)*(1-e)/o.k).scale(e);return this.transition(this.svg).call(this.zoom.transform,c).end().catch(s)}destroy(){this.svg.on(`.zoom`,null),this.svg.html(null),this._disposeList.forEach(e=>{e()})}static create(t,n,r=null){let i=new e(t,n);return r&&i.setData(r).then(()=>{i.fit()}),i}};export{lo as Markmap,$ as childSelector,ha as defaultColorFn,_a as defaultOptions,va as deriveOptions,to as globalCSS,ma as isMacintosh,ga as lineWidthFactory,e as loadCSS,n as loadJS,co as refreshHook,ya as simpleHash};