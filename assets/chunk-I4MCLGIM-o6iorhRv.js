import{t as e}from"./chunk-VELTKBKT-D4etArbK.js";import{V as t,q as n}from"./chunk-56PIJBDL-D246tURG.js";import{G as r,H as i,R as a,U as o,Y as s,g as c,k as l,m as u,q as d,y as f}from"./chunk-SQX4BMY3-n7esmWhz.js";import{f as p,l as m,o as h,t as g}from"./chunk-H7M3GQKH-BonHuyKC.js";import{i as _,s as v}from"./chunk-6UYDIWFQ-Dxk3renJ.js";import{t as y}from"./chunk-6UVSVS4N-DmGsEiX7.js";import{a as b,i as x,r as S,t as C}from"./chunk-QYD3RZ7T-B3QDJark.js";var w=e(async(n,r,i)=>{let a,s=r.useHtmlLabels||u(o()?.htmlLabels);a=i||`node default`;let l=n.insert(`g`).attr(`class`,a).attr(`id`,r.domId||r.id),f=l.insert(`g`).attr(`class`,`label`).attr(`style`,m(r.labelStyle)),h;h=r.label===void 0?``:typeof r.label==`string`?r.label:r.label[0];let v=await _(f,d(p(h),o()),{useHtmlLabels:s,width:r.width||o().flowchart?.wrappingWidth,cssClasses:`markdown-node-label`,style:r.labelStyle,addSvgBackground:!!r.icon||!!r.img}),y=v.getBBox(),b=(r?.padding??0)/2;if(s){let n=v.children[0],r=t(v),i=n.getElementsByTagName(`img`);if(i){let t=h.replace(/<img[^>]*>/g,``).trim()===``;await Promise.all([...i].map(n=>new Promise(r=>{function i(){if(n.style.display=`flex`,n.style.flexDirection=`column`,t){let[e=c.fontSize]=g(o().fontSize?o().fontSize:window.getComputedStyle(document.body).fontSize),t=e*5+`px`;n.style.minWidth=t,n.style.maxWidth=t}else n.style.width=`100%`;r(n)}e(i,`setupImage`),setTimeout(()=>{n.complete&&i()}),n.addEventListener(`error`,i),n.addEventListener(`load`,i)})))}y=n.getBoundingClientRect(),r.attr(`width`,y.width),r.attr(`height`,y.height)}return s?f.attr(`transform`,`translate(`+-y.width/2+`, `+-y.height/2+`)`):f.attr(`transform`,`translate(0, `+-y.height/2+`)`),r.centerLabel&&f.attr(`transform`,`translate(`+-y.width/2+`, `+-y.height/2+`)`),f.insert(`rect`,`:first-child`),{shapeSvg:l,bbox:y,halfPadding:b,label:f}},`labelHelper`),T=e(async(e,n,r)=>{let i=r.useHtmlLabels||u(o()?.flowchart?.htmlLabels),a=e.insert(`g`).attr(`class`,`label`).attr(`style`,r.labelStyle||``),s=await _(a,d(p(n),o()),{useHtmlLabels:i,width:r.width||o()?.flowchart?.wrappingWidth,style:r.labelStyle,addSvgBackground:!!r.icon||!!r.img}),c=s.getBBox(),l=r.padding/2;if(u(o()?.flowchart?.htmlLabels)){let e=s.children[0],n=t(s);c=e.getBoundingClientRect(),n.attr(`width`,c.width),n.attr(`height`,c.height)}return i?a.attr(`transform`,`translate(`+-c.width/2+`, `+-c.height/2+`)`):a.attr(`transform`,`translate(0, `+-c.height/2+`)`),r.centerLabel&&a.attr(`transform`,`translate(`+-c.width/2+`, `+-c.height/2+`)`),a.insert(`rect`,`:first-child`),{shapeSvg:e,bbox:c,halfPadding:l,label:a}},`insertLabel`),E=e((e,t)=>{let n=t.node().getBBox();e.width=n.width,e.height=n.height},`updateNodeBounds`),D=e((e,t)=>(e.look===`handDrawn`?`rough-node`:`node`)+` `+e.cssClasses+` `+(t||``),`getNodeClasses`);function O(e){let t=e.map((e,t)=>`${t===0?`M`:`L`}${e.x},${e.y}`);return t.push(`Z`),t.join(` `)}e(O,`createPathFromPoints`);function k(e,t,n,r,i,a){let o=[],s=n-e,c=r-t,l=s/a,u=2*Math.PI/l,d=t+c/2;for(let t=0;t<=50;t++){let n=e+t/50*s,r=d+i*Math.sin(u*(n-e));o.push({x:n,y:r})}return o}e(k,`generateFullSineWavePoints`);function A(e,t,n,r,i,a){let o=[],s=i*Math.PI/180,c=(a*Math.PI/180-s)/(r-1);for(let i=0;i<r;i++){let r=s+i*c,a=e+n*Math.cos(r),l=t+n*Math.sin(r);o.push({x:-a,y:-l})}return o}e(A,`generateCirclePoints`);function j(e,t,n){if(e&&e.length){let[r,i]=t,a=Math.PI/180*n,o=Math.cos(a),s=Math.sin(a);for(let t of e){let[e,n]=t;t[0]=(e-r)*o-(n-i)*s+r,t[1]=(e-r)*s+(n-i)*o+i}}}e(j,`t`);function M(e,t){return e[0]===t[0]&&e[1]===t[1]}e(M,`e`);function N(e,t,n,r=1){let i=n,a=Math.max(t,.1),o=e[0]&&e[0][0]&&typeof e[0][0]==`number`?[e]:e,s=[0,0];if(i)for(let e of o)j(e,s,i);let c=(function(e,t,n){let r=[];for(let t of e){let e=[...t];M(e[0],e[e.length-1])||e.push([e[0][0],e[0][1]]),e.length>2&&r.push(e)}let i=[];t=Math.max(t,.1);let a=[];for(let e of r)for(let t=0;t<e.length-1;t++){let n=e[t],r=e[t+1];if(n[1]!==r[1]){let e=Math.min(n[1],r[1]);a.push({ymin:e,ymax:Math.max(n[1],r[1]),x:e===n[1]?n[0]:r[0],islope:(r[0]-n[0])/(r[1]-n[1])})}}if(a.sort(((e,t)=>e.ymin<t.ymin?-1:e.ymin>t.ymin?1:e.x<t.x?-1:e.x>t.x?1:e.ymax===t.ymax?0:(e.ymax-t.ymax)/Math.abs(e.ymax-t.ymax))),!a.length)return i;let o=[],s=a[0].ymin,c=0;for(;o.length||a.length;){if(a.length){let e=-1;for(let t=0;t<a.length&&!(a[t].ymin>s);t++)e=t;a.splice(0,e+1).forEach((e=>{o.push({s,edge:e})}))}if(o=o.filter((e=>!(e.edge.ymax<=s))),o.sort(((e,t)=>e.edge.x===t.edge.x?0:(e.edge.x-t.edge.x)/Math.abs(e.edge.x-t.edge.x))),(n!==1||c%t==0)&&o.length>1)for(let e=0;e<o.length;e+=2){let t=e+1;if(t>=o.length)break;let n=o[e].edge,r=o[t].edge;i.push([[Math.round(n.x),s],[Math.round(r.x),s]])}s+=n,o.forEach((e=>{e.edge.x=e.edge.x+n*e.edge.islope})),c++}return i})(o,a,r);if(i){for(let e of o)j(e,s,-i);(function(e,t,n){let r=[];e.forEach((e=>r.push(...e))),j(r,t,n)})(c,s,-i)}return c}e(N,`s`);function P(e,t){let n=t.hachureAngle+90,r=t.hachureGap;r<0&&(r=4*t.strokeWidth),r=Math.round(Math.max(r,.1));let i=1;return t.roughness>=1&&(t.randomizer?.next()||Math.random())>.7&&(i=r),N(e,r,n,i||1)}e(P,`n`);var F=class{static{e(this,`o`)}constructor(e){this.helper=e}fillPolygons(e,t){return this._fillPolygons(e,t)}_fillPolygons(e,t){let n=P(e,t);return{type:`fillSketch`,ops:this.renderLines(n,t)}}renderLines(e,t){let n=[];for(let r of e)n.push(...this.helper.doubleLineOps(r[0][0],r[0][1],r[1][0],r[1][1],t));return n}};function I(e){let t=e[0],n=e[1];return Math.sqrt((t[0]-n[0])**2+(t[1]-n[1])**2)}e(I,`a`);var L=class extends F{static{e(this,`h`)}fillPolygons(e,t){let n=t.hachureGap;n<0&&(n=4*t.strokeWidth),n=Math.max(n,.1);let r=P(e,Object.assign({},t,{hachureGap:n})),i=Math.PI/180*t.hachureAngle,a=[],o=.5*n*Math.cos(i),s=.5*n*Math.sin(i);for(let[e,t]of r)I([e,t])&&a.push([[e[0]-o,e[1]+s],[...t]],[[e[0]+o,e[1]-s],[...t]]);return{type:`fillSketch`,ops:this.renderLines(a,t)}}},R=class extends F{static{e(this,`r`)}fillPolygons(e,t){let n=this._fillPolygons(e,t),r=Object.assign({},t,{hachureAngle:t.hachureAngle+90}),i=this._fillPolygons(e,r);return n.ops=n.ops.concat(i.ops),n}},ee=class{static{e(this,`i`)}constructor(e){this.helper=e}fillPolygons(e,t){let n=P(e,t=Object.assign({},t,{hachureAngle:0}));return this.dotsOnLines(n,t)}dotsOnLines(e,t){let n=[],r=t.hachureGap;r<0&&(r=4*t.strokeWidth),r=Math.max(r,.1);let i=t.fillWeight;i<0&&(i=t.strokeWidth/2);let a=r/4;for(let o of e){let e=I(o),s=e/r,c=Math.ceil(s)-1,l=e-c*r,u=(o[0][0]+o[1][0])/2-r/4,d=Math.min(o[0][1],o[1][1]);for(let e=0;e<c;e++){let o=d+l+e*r,s=u-a+2*Math.random()*a,c=o-a+2*Math.random()*a,f=this.helper.ellipse(s,c,i,i,t);n.push(...f.ops)}}return{type:`fillSketch`,ops:n}}},te=class{static{e(this,`c`)}constructor(e){this.helper=e}fillPolygons(e,t){let n=P(e,t);return{type:`fillSketch`,ops:this.dashedLine(n,t)}}dashedLine(e,t){let n=t.dashOffset<0?t.hachureGap<0?4*t.strokeWidth:t.hachureGap:t.dashOffset,r=t.dashGap<0?t.hachureGap<0?4*t.strokeWidth:t.hachureGap:t.dashGap,i=[];return e.forEach((e=>{let a=I(e),o=Math.floor(a/(n+r)),s=(a+r-o*(n+r))/2,c=e[0],l=e[1];c[0]>l[0]&&(c=e[1],l=e[0]);let u=Math.atan((l[1]-c[1])/(l[0]-c[0]));for(let e=0;e<o;e++){let a=e*(n+r),o=a+n,l=[c[0]+a*Math.cos(u)+s*Math.cos(u),c[1]+a*Math.sin(u)+s*Math.sin(u)],d=[c[0]+o*Math.cos(u)+s*Math.cos(u),c[1]+o*Math.sin(u)+s*Math.sin(u)];i.push(...this.helper.doubleLineOps(l[0],l[1],d[0],d[1],t))}})),i}},ne=class{static{e(this,`l`)}constructor(e){this.helper=e}fillPolygons(e,t){let n=t.hachureGap<0?4*t.strokeWidth:t.hachureGap,r=t.zigzagOffset<0?n:t.zigzagOffset,i=P(e,t=Object.assign({},t,{hachureGap:n+r}));return{type:`fillSketch`,ops:this.zigzagLines(i,r,t)}}zigzagLines(e,t,n){let r=[];return e.forEach((e=>{let i=I(e),a=Math.round(i/(2*t)),o=e[0],s=e[1];o[0]>s[0]&&(o=e[1],s=e[0]);let c=Math.atan((s[1]-o[1])/(s[0]-o[0]));for(let e=0;e<a;e++){let i=2*e*t,a=2*(e+1)*t,s=Math.sqrt(2*t**2),l=[o[0]+i*Math.cos(c),o[1]+i*Math.sin(c)],u=[o[0]+a*Math.cos(c),o[1]+a*Math.sin(c)],d=[l[0]+s*Math.cos(c+Math.PI/4),l[1]+s*Math.sin(c+Math.PI/4)];r.push(...this.helper.doubleLineOps(l[0],l[1],d[0],d[1],n),...this.helper.doubleLineOps(d[0],d[1],u[0],u[1],n))}})),r}},z={},re=class{static{e(this,`p`)}constructor(e){this.seed=e}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}},ie=0,B=1,ae=2,oe={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function se(e,t){return e.type===t}e(se,`k`);function ce(e){let t=[],n=(function(e){let t=[];for(;e!==``;)if(e.match(/^([ \t\r\n,]+)/))e=e.substr(RegExp.$1.length);else if(e.match(/^([aAcChHlLmMqQsStTvVzZ])/))t[t.length]={type:ie,text:RegExp.$1},e=e.substr(RegExp.$1.length);else{if(!e.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];t[t.length]={type:B,text:`${parseFloat(RegExp.$1)}`},e=e.substr(RegExp.$1.length)}return t[t.length]={type:ae,text:``},t})(e),r=`BOD`,i=0,a=n[i];for(;!se(a,ae);){let o=0,s=[];if(r===`BOD`){if(a.text!==`M`&&a.text!==`m`)return ce(`M0,0`+e);i++,o=oe[a.text],r=a.text}else se(a,B)?o=oe[r]:(i++,o=oe[a.text],r=a.text);if(!(i+o<n.length))throw Error(`Path data ended short`);for(let e=i;e<i+o;e++){let t=n[e];if(!se(t,B))throw Error(`Param not a number: `+r+`,`+t.text);s[s.length]=+t.text}if(typeof oe[r]!=`number`)throw Error(`Bad segment: `+r);{let e={key:r,data:s};t.push(e),i+=o,a=n[i],r===`M`&&(r=`L`),r===`m`&&(r=`l`)}}return t}e(ce,`b`);function le(e){let t=0,n=0,r=0,i=0,a=[];for(let{key:o,data:s}of e)switch(o){case`M`:a.push({key:`M`,data:[...s]}),[t,n]=s,[r,i]=s;break;case`m`:t+=s[0],n+=s[1],a.push({key:`M`,data:[t,n]}),r=t,i=n;break;case`L`:a.push({key:`L`,data:[...s]}),[t,n]=s;break;case`l`:t+=s[0],n+=s[1],a.push({key:`L`,data:[t,n]});break;case`C`:a.push({key:`C`,data:[...s]}),t=s[4],n=s[5];break;case`c`:{let e=s.map(((e,r)=>r%2?e+n:e+t));a.push({key:`C`,data:e}),t=e[4],n=e[5];break}case`Q`:a.push({key:`Q`,data:[...s]}),t=s[2],n=s[3];break;case`q`:{let e=s.map(((e,r)=>r%2?e+n:e+t));a.push({key:`Q`,data:e}),t=e[2],n=e[3];break}case`A`:a.push({key:`A`,data:[...s]}),t=s[5],n=s[6];break;case`a`:t+=s[5],n+=s[6],a.push({key:`A`,data:[s[0],s[1],s[2],s[3],s[4],t,n]});break;case`H`:a.push({key:`H`,data:[...s]}),t=s[0];break;case`h`:t+=s[0],a.push({key:`H`,data:[t]});break;case`V`:a.push({key:`V`,data:[...s]}),n=s[0];break;case`v`:n+=s[0],a.push({key:`V`,data:[n]});break;case`S`:a.push({key:`S`,data:[...s]}),t=s[2],n=s[3];break;case`s`:{let e=s.map(((e,r)=>r%2?e+n:e+t));a.push({key:`S`,data:e}),t=e[2],n=e[3];break}case`T`:a.push({key:`T`,data:[...s]}),t=s[0],n=s[1];break;case`t`:t+=s[0],n+=s[1],a.push({key:`T`,data:[t,n]});break;case`Z`:case`z`:a.push({key:`Z`,data:[]}),t=r,n=i}return a}e(le,`y`);function ue(e){let t=[],n=``,r=0,i=0,a=0,o=0,s=0,c=0;for(let{key:l,data:u}of e){switch(l){case`M`:t.push({key:`M`,data:[...u]}),[r,i]=u,[a,o]=u;break;case`C`:t.push({key:`C`,data:[...u]}),r=u[4],i=u[5],s=u[2],c=u[3];break;case`L`:t.push({key:`L`,data:[...u]}),[r,i]=u;break;case`H`:r=u[0],t.push({key:`L`,data:[r,i]});break;case`V`:i=u[0],t.push({key:`L`,data:[r,i]});break;case`S`:{let e=0,a=0;n===`C`||n===`S`?(e=r+(r-s),a=i+(i-c)):(e=r,a=i),t.push({key:`C`,data:[e,a,...u]}),s=u[0],c=u[1],r=u[2],i=u[3];break}case`T`:{let[e,a]=u,o=0,l=0;n===`Q`||n===`T`?(o=r+(r-s),l=i+(i-c)):(o=r,l=i);let d=r+2*(o-r)/3,f=i+2*(l-i)/3,p=e+2*(o-e)/3,m=a+2*(l-a)/3;t.push({key:`C`,data:[d,f,p,m,e,a]}),s=o,c=l,r=e,i=a;break}case`Q`:{let[e,n,a,o]=u,l=r+2*(e-r)/3,d=i+2*(n-i)/3,f=a+2*(e-a)/3,p=o+2*(n-o)/3;t.push({key:`C`,data:[l,d,f,p,a,o]}),s=e,c=n,r=a,i=o;break}case`A`:{let e=Math.abs(u[0]),n=Math.abs(u[1]),a=u[2],o=u[3],s=u[4],c=u[5],l=u[6];e===0||n===0?(t.push({key:`C`,data:[r,i,c,l,c,l]}),r=c,i=l):(r!==c||i!==l)&&(fe(r,i,c,l,e,n,a,o,s).forEach((function(e){t.push({key:`C`,data:e})})),r=c,i=l);break}case`Z`:t.push({key:`Z`,data:[]}),r=a,i=o}n=l}return t}e(ue,`m`);function de(e,t,n){return[e*Math.cos(n)-t*Math.sin(n),e*Math.sin(n)+t*Math.cos(n)]}e(de,`w`);function fe(e,t,n,r,i,a,o,s,c,l){let u=(d=o,Math.PI*d/180);var d;let f=[],p=0,m=0,h=0,g=0;if(l)[p,m,h,g]=l;else{[e,t]=de(e,t,-u),[n,r]=de(n,r,-u);let o=(e-n)/2,l=(t-r)/2,d=o*o/(i*i)+l*l/(a*a);d>1&&(d=Math.sqrt(d),i*=d,a*=d);let f=i*i,_=a*a,v=f*_-f*l*l-_*o*o,y=f*l*l+_*o*o,b=(s===c?-1:1)*Math.sqrt(Math.abs(v/y));h=b*i*l/a+(e+n)/2,g=b*-a*o/i+(t+r)/2,p=Math.asin(parseFloat(((t-g)/a).toFixed(9))),m=Math.asin(parseFloat(((r-g)/a).toFixed(9))),e<h&&(p=Math.PI-p),n<h&&(m=Math.PI-m),p<0&&(p=2*Math.PI+p),m<0&&(m=2*Math.PI+m),c&&p>m&&(p-=2*Math.PI),!c&&m>p&&(m-=2*Math.PI)}let _=m-p;if(Math.abs(_)>120*Math.PI/180){let e=m,t=n,s=r;m=c&&m>p?p+120*Math.PI/180*1:p+120*Math.PI/180*-1,f=fe(n=h+i*Math.cos(m),r=g+a*Math.sin(m),t,s,i,a,o,0,c,[m,e,h,g])}_=m-p;let v=Math.cos(p),y=Math.sin(p),b=Math.cos(m),x=Math.sin(m),S=Math.tan(_/4),C=4/3*i*S,w=4/3*a*S,T=[e,t],E=[e+C*y,t-w*v],D=[n+C*x,r-w*b],O=[n,r];if(E[0]=2*T[0]-E[0],E[1]=2*T[1]-E[1],l)return[E,D,O].concat(f);{f=[E,D,O].concat(f);let e=[];for(let t=0;t<f.length;t+=3){let n=de(f[t][0],f[t][1],u),r=de(f[t+1][0],f[t+1][1],u),i=de(f[t+2][0],f[t+2][1],u);e.push([n[0],n[1],r[0],r[1],i[0],i[1]])}return e}}e(fe,`x`);var pe={randOffset:e(function(e,t){return H(e,t)},`randOffset`),randOffsetWithRange:e(function(e,t,n){return Te(e,t,n)},`randOffsetWithRange`),ellipse:e(function(e,t,n,r,i){return ye(e,t,i,ve(n,r,i)).opset},`ellipse`),doubleLineOps:e(function(e,t,n,r,i){return U(e,t,n,r,i,!0)},`doubleLineOps`)};function me(e,t,n,r,i){return{type:`path`,ops:U(e,t,n,r,i)}}e(me,`v`);function he(e,t,n){let r=(e||[]).length;if(r>2){let i=[];for(let t=0;t<r-1;t++)i.push(...U(e[t][0],e[t][1],e[t+1][0],e[t+1][1],n));return t&&i.push(...U(e[r-1][0],e[r-1][1],e[0][0],e[0][1],n)),{type:`path`,ops:i}}return r===2?me(e[0][0],e[0][1],e[1][0],e[1][1],n):{type:`path`,ops:[]}}e(he,`S`);function ge(e,t,n,r,i){return(function(e,t){return he(e,!0,t)})([[e,t],[e+n,t],[e+n,t+r],[e,t+r]],i)}e(ge,`O`);function _e(e,t){if(e.length){let n=typeof e[0][0]==`number`?[e]:e,r=De(n[0],1*(1+.2*t.roughness),t),i=t.disableMultiStroke?[]:De(n[0],1.5*(1+.22*t.roughness),Ce(t));for(let e=1;e<n.length;e++){let a=n[e];if(a.length){let e=De(a,1*(1+.2*t.roughness),t),n=t.disableMultiStroke?[]:De(a,1.5*(1+.22*t.roughness),Ce(t));for(let t of e)t.op!==`move`&&r.push(t);for(let e of n)e.op!==`move`&&i.push(e)}}return{type:`path`,ops:r.concat(i)}}return{type:`path`,ops:[]}}e(_e,`L`);function ve(e,t,n){let r=Math.sqrt(2*Math.PI*Math.sqrt(((e/2)**2+(t/2)**2)/2)),i=Math.ceil(Math.max(n.curveStepCount,n.curveStepCount/Math.sqrt(200)*r)),a=2*Math.PI/i,o=Math.abs(e/2),s=Math.abs(t/2),c=1-n.curveFitting;return o+=H(o*c,n),s+=H(s*c,n),{increment:a,rx:o,ry:s}}e(ve,`T`);function ye(e,t,n,r){let[i,a]=ke(r.increment,e,t,r.rx,r.ry,1,r.increment*Te(.1,Te(.4,1,n),n),n),o=Oe(i,null,n);if(!n.disableMultiStroke&&n.roughness!==0){let[i]=ke(r.increment,e,t,r.rx,r.ry,1.5,0,n),a=Oe(i,null,n);o=o.concat(a)}return{estimatedPoints:a,opset:{type:`path`,ops:o}}}e(ye,`D`);function be(e,t,n,r,i,a,o,s,c){let l=e,u=t,d=Math.abs(n/2),f=Math.abs(r/2);d+=H(.01*d,c),f+=H(.01*f,c);let p=i,m=a;for(;p<0;)p+=2*Math.PI,m+=2*Math.PI;m-p>2*Math.PI&&(p=0,m=2*Math.PI);let h=2*Math.PI/c.curveStepCount,g=Math.min(h/2,(m-p)/2),_=Ae(g,l,u,d,f,p,m,1,c);if(!c.disableMultiStroke){let e=Ae(g,l,u,d,f,p,m,1.5,c);_.push(...e)}return o&&(s?_.push(...U(l,u,l+d*Math.cos(p),u+f*Math.sin(p),c),...U(l,u,l+d*Math.cos(m),u+f*Math.sin(m),c)):_.push({op:`lineTo`,data:[l,u]},{op:`lineTo`,data:[l+d*Math.cos(p),u+f*Math.sin(p)]})),{type:`path`,ops:_}}e(be,`A`);function xe(e,t){let n=ue(le(ce(e))),r=[],i=[0,0],a=[0,0];for(let{key:e,data:o}of n)switch(e){case`M`:a=[o[0],o[1]],i=[o[0],o[1]];break;case`L`:r.push(...U(a[0],a[1],o[0],o[1],t)),a=[o[0],o[1]];break;case`C`:{let[e,n,i,s,c,l]=o;r.push(...je(e,n,i,s,c,l,a,t)),a=[c,l];break}case`Z`:r.push(...U(a[0],a[1],i[0],i[1],t)),a=[i[0],i[1]]}return{type:`path`,ops:r}}e(xe,`_`);function Se(e,t){let n=[];for(let r of e)if(r.length){let e=t.maxRandomnessOffset||0,i=r.length;if(i>2){n.push({op:`move`,data:[r[0][0]+H(e,t),r[0][1]+H(e,t)]});for(let a=1;a<i;a++)n.push({op:`lineTo`,data:[r[a][0]+H(e,t),r[a][1]+H(e,t)]})}}return{type:`fillPath`,ops:n}}e(Se,`I`);function V(e,t){return(function(e,t){let n=e.fillStyle||`hachure`;if(!z[n])switch(n){case`zigzag`:z[n]||(z[n]=new L(t));break;case`cross-hatch`:z[n]||(z[n]=new R(t));break;case`dots`:z[n]||(z[n]=new ee(t));break;case`dashed`:z[n]||(z[n]=new te(t));break;case`zigzag-line`:z[n]||(z[n]=new ne(t));break;default:n=`hachure`,z[n]||(z[n]=new F(t))}return z[n]})(t,pe).fillPolygons(e,t)}e(V,`C`);function Ce(e){let t=Object.assign({},e);return t.randomizer=void 0,e.seed&&(t.seed=e.seed+1),t}e(Ce,`z`);function we(e){return e.randomizer||=new re(e.seed||0),e.randomizer.next()}e(we,`W`);function Te(e,t,n,r=1){return n.roughness*r*(we(n)*(t-e)+e)}e(Te,`E`);function H(e,t,n=1){return Te(-e,e,t,n)}e(H,`G`);function U(e,t,n,r,i,a=!1){let o=a?i.disableMultiStrokeFill:i.disableMultiStroke,s=Ee(e,t,n,r,i,!0,!1);if(o)return s;let c=Ee(e,t,n,r,i,!0,!0);return s.concat(c)}e(U,`$`);function Ee(t,n,r,i,a,o,s){let c=(t-r)**2+(n-i)**2,l=Math.sqrt(c),u=1;u=l<200?1:l>500?.4:-.0016668*l+1.233334;let d=a.maxRandomnessOffset||0;d*d*100>c&&(d=l/10);let f=d/2,p=.2+.2*we(a),m=a.bowing*a.maxRandomnessOffset*(i-n)/200,h=a.bowing*a.maxRandomnessOffset*(t-r)/200;m=H(m,a,u),h=H(h,a,u);let g=[],_=e(()=>H(f,a,u),`M`),v=e(()=>H(d,a,u),`k`),y=a.preserveVertices;return o&&(s?g.push({op:`move`,data:[t+(y?0:_()),n+(y?0:_())]}):g.push({op:`move`,data:[t+(y?0:H(d,a,u)),n+(y?0:H(d,a,u))]})),s?g.push({op:`bcurveTo`,data:[m+t+(r-t)*p+_(),h+n+(i-n)*p+_(),m+t+2*(r-t)*p+_(),h+n+2*(i-n)*p+_(),r+(y?0:_()),i+(y?0:_())]}):g.push({op:`bcurveTo`,data:[m+t+(r-t)*p+v(),h+n+(i-n)*p+v(),m+t+2*(r-t)*p+v(),h+n+2*(i-n)*p+v(),r+(y?0:v()),i+(y?0:v())]}),g}e(Ee,`R`);function De(e,t,n){if(!e.length)return[];let r=[];r.push([e[0][0]+H(t,n),e[0][1]+H(t,n)]),r.push([e[0][0]+H(t,n),e[0][1]+H(t,n)]);for(let i=1;i<e.length;i++)r.push([e[i][0]+H(t,n),e[i][1]+H(t,n)]),i===e.length-1&&r.push([e[i][0]+H(t,n),e[i][1]+H(t,n)]);return Oe(r,null,n)}e(De,`j`);function Oe(e,t,n){let r=e.length,i=[];if(r>3){let a=[],o=1-n.curveTightness;i.push({op:`move`,data:[e[1][0],e[1][1]]});for(let t=1;t+2<r;t++){let n=e[t];a[0]=[n[0],n[1]],a[1]=[n[0]+(o*e[t+1][0]-o*e[t-1][0])/6,n[1]+(o*e[t+1][1]-o*e[t-1][1])/6],a[2]=[e[t+1][0]+(o*e[t][0]-o*e[t+2][0])/6,e[t+1][1]+(o*e[t][1]-o*e[t+2][1])/6],a[3]=[e[t+1][0],e[t+1][1]],i.push({op:`bcurveTo`,data:[a[1][0],a[1][1],a[2][0],a[2][1],a[3][0],a[3][1]]})}if(t&&t.length===2){let e=n.maxRandomnessOffset;i.push({op:`lineTo`,data:[t[0]+H(e,n),t[1]+H(e,n)]})}}else r===3?(i.push({op:`move`,data:[e[1][0],e[1][1]]}),i.push({op:`bcurveTo`,data:[e[1][0],e[1][1],e[2][0],e[2][1],e[2][0],e[2][1]]})):r===2&&i.push(...Ee(e[0][0],e[0][1],e[1][0],e[1][1],n,!0,!0));return i}e(Oe,`q`);function ke(e,t,n,r,i,a,o,s){let c=[],l=[];if(s.roughness===0){e/=4,l.push([t+r*Math.cos(-e),n+i*Math.sin(-e)]);for(let a=0;a<=2*Math.PI;a+=e){let e=[t+r*Math.cos(a),n+i*Math.sin(a)];c.push(e),l.push(e)}l.push([t+r*Math.cos(0),n+i*Math.sin(0)]),l.push([t+r*Math.cos(e),n+i*Math.sin(e)])}else{let u=H(.5,s)-Math.PI/2;l.push([H(a,s)+t+.9*r*Math.cos(u-e),H(a,s)+n+.9*i*Math.sin(u-e)]);let d=2*Math.PI+u-.01;for(let o=u;o<d;o+=e){let e=[H(a,s)+t+r*Math.cos(o),H(a,s)+n+i*Math.sin(o)];c.push(e),l.push(e)}l.push([H(a,s)+t+r*Math.cos(u+2*Math.PI+.5*o),H(a,s)+n+i*Math.sin(u+2*Math.PI+.5*o)]),l.push([H(a,s)+t+.98*r*Math.cos(u+o),H(a,s)+n+.98*i*Math.sin(u+o)]),l.push([H(a,s)+t+.9*r*Math.cos(u+.5*o),H(a,s)+n+.9*i*Math.sin(u+.5*o)])}return[l,c]}e(ke,`F`);function Ae(e,t,n,r,i,a,o,s,c){let l=a+H(.1,c),u=[];u.push([H(s,c)+t+.9*r*Math.cos(l-e),H(s,c)+n+.9*i*Math.sin(l-e)]);for(let a=l;a<=o;a+=e)u.push([H(s,c)+t+r*Math.cos(a),H(s,c)+n+i*Math.sin(a)]);return u.push([t+r*Math.cos(o),n+i*Math.sin(o)]),u.push([t+r*Math.cos(o),n+i*Math.sin(o)]),Oe(u,null,c)}e(Ae,`V`);function je(e,t,n,r,i,a,o,s){let c=[],l=[s.maxRandomnessOffset||1,(s.maxRandomnessOffset||1)+.3],u=[0,0],d=s.disableMultiStroke?1:2,f=s.preserveVertices;for(let p=0;p<d;p++)p===0?c.push({op:`move`,data:[o[0],o[1]]}):c.push({op:`move`,data:[o[0]+(f?0:H(l[0],s)),o[1]+(f?0:H(l[0],s))]}),u=f?[i,a]:[i+H(l[p],s),a+H(l[p],s)],c.push({op:`bcurveTo`,data:[e+H(l[p],s),t+H(l[p],s),n+H(l[p],s),r+H(l[p],s),u[0],u[1]]});return c}e(je,`Z`);function Me(e){return[...e]}e(Me,`Q`);function Ne(e,t=0){let n=e.length;if(n<3)throw Error(`A curve must have at least three points.`);let r=[];if(n===3)r.push(Me(e[0]),Me(e[1]),Me(e[2]),Me(e[2]));else{let n=[];n.push(e[0],e[0]);for(let t=1;t<e.length;t++)n.push(e[t]),t===e.length-1&&n.push(e[t]);let i=[],a=1-t;r.push(Me(n[0]));for(let e=1;e+2<n.length;e++){let t=n[e];i[0]=[t[0],t[1]],i[1]=[t[0]+(a*n[e+1][0]-a*n[e-1][0])/6,t[1]+(a*n[e+1][1]-a*n[e-1][1])/6],i[2]=[n[e+1][0]+(a*n[e][0]-a*n[e+2][0])/6,n[e+1][1]+(a*n[e][1]-a*n[e+2][1])/6],i[3]=[n[e+1][0],n[e+1][1]],r.push(i[1],i[2],i[3])}}return r}e(Ne,`H`);function Pe(e,t){return(e[0]-t[0])**2+(e[1]-t[1])**2}e(Pe,`N`);function Fe(e,t,n){let r=Pe(t,n);if(r===0)return Pe(e,t);let i=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/r;return i=Math.max(0,Math.min(1,i)),Pe(e,W(t,n,i))}e(Fe,`B`);function W(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}e(W,`J`);function Ie(e,t,n,r){let i=r||[];if((function(e,t){let n=e[t+0],r=e[t+1],i=e[t+2],a=e[t+3],o=3*r[0]-2*n[0]-a[0];o*=o;let s=3*r[1]-2*n[1]-a[1];s*=s;let c=3*i[0]-2*a[0]-n[0];c*=c;let l=3*i[1]-2*a[1]-n[1];return l*=l,o<c&&(o=c),s<l&&(s=l),o+s})(e,t)<n){let n=e[t+0];i.length?(a=i[i.length-1],o=n,Math.sqrt(Pe(a,o))>1&&i.push(n)):i.push(n),i.push(e[t+3])}else{let r=e[t+0],a=e[t+1],o=e[t+2],s=e[t+3],c=W(r,a,.5),l=W(a,o,.5),u=W(o,s,.5),d=W(c,l,.5),f=W(l,u,.5),p=W(d,f,.5);Ie([r,c,d,p],0,n,i),Ie([p,f,u,s],0,n,i)}var a,o;return i}e(Ie,`K`);function Le(e,t){return Re(e,0,e.length,t)}e(Le,`U`);function Re(e,t,n,r,i){let a=i||[],o=e[t],s=e[n-1],c=0,l=1;for(let r=t+1;r<n-1;++r){let t=Fe(e[r],o,s);t>c&&(c=t,l=r)}return Math.sqrt(c)>r?(Re(e,t,l+1,r,a),Re(e,l,n,r,a)):(a.length||a.push(o),a.push(s)),a}e(Re,`X`);function ze(e,t=.15,n){let r=[],i=(e.length-1)/3;for(let n=0;n<i;n++)Ie(e,3*n,t,r);return n&&n>0?Re(r,0,r.length,n):r}e(ze,`Y`);var G=`none`,Be=class{static{e(this,`et`)}constructor(e){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:`#000`,strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:`hachure`,fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=e||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(e){return e?Object.assign({},this.defaultOptions,e):this.defaultOptions}_d(e,t,n){return{shape:e,sets:t||[],options:n||this.defaultOptions}}line(e,t,n,r,i){let a=this._o(i);return this._d(`line`,[me(e,t,n,r,a)],a)}rectangle(e,t,n,r,i){let a=this._o(i),o=[],s=ge(e,t,n,r,a);if(a.fill){let i=[[e,t],[e+n,t],[e+n,t+r],[e,t+r]];a.fillStyle===`solid`?o.push(Se([i],a)):o.push(V([i],a))}return a.stroke!==G&&o.push(s),this._d(`rectangle`,o,a)}ellipse(e,t,n,r,i){let a=this._o(i),o=[],s=ve(n,r,a),c=ye(e,t,a,s);if(a.fill)if(a.fillStyle===`solid`){let n=ye(e,t,a,s).opset;n.type=`fillPath`,o.push(n)}else o.push(V([c.estimatedPoints],a));return a.stroke!==G&&o.push(c.opset),this._d(`ellipse`,o,a)}circle(e,t,n,r){let i=this.ellipse(e,t,n,n,r);return i.shape=`circle`,i}linearPath(e,t){let n=this._o(t);return this._d(`linearPath`,[he(e,!1,n)],n)}arc(e,t,n,r,i,a,o=!1,s){let c=this._o(s),l=[],u=be(e,t,n,r,i,a,o,!0,c);if(o&&c.fill)if(c.fillStyle===`solid`){let o=Object.assign({},c);o.disableMultiStroke=!0;let s=be(e,t,n,r,i,a,!0,!1,o);s.type=`fillPath`,l.push(s)}else l.push((function(e,t,n,r,i,a,o){let s=e,c=t,l=Math.abs(n/2),u=Math.abs(r/2);l+=H(.01*l,o),u+=H(.01*u,o);let d=i,f=a;for(;d<0;)d+=2*Math.PI,f+=2*Math.PI;f-d>2*Math.PI&&(d=0,f=2*Math.PI);let p=(f-d)/o.curveStepCount,m=[];for(let e=d;e<=f;e+=p)m.push([s+l*Math.cos(e),c+u*Math.sin(e)]);return m.push([s+l*Math.cos(f),c+u*Math.sin(f)]),m.push([s,c]),V([m],o)})(e,t,n,r,i,a,c));return c.stroke!==G&&l.push(u),this._d(`arc`,l,c)}curve(e,t){let n=this._o(t),r=[],i=_e(e,n);if(n.fill&&n.fill!==G)if(n.fillStyle===`solid`){let t=_e(e,Object.assign(Object.assign({},n),{disableMultiStroke:!0,roughness:n.roughness?n.roughness+n.fillShapeRoughnessGain:0}));r.push({type:`fillPath`,ops:this._mergedShape(t.ops)})}else{let t=[],i=e;if(i.length){let e=typeof i[0][0]==`number`?[i]:i;for(let r of e)r.length<3?t.push(...r):r.length===3?t.push(...ze(Ne([r[0],r[0],r[1],r[2]]),10,(1+n.roughness)/2)):t.push(...ze(Ne(r),10,(1+n.roughness)/2))}t.length&&r.push(V([t],n))}return n.stroke!==G&&r.push(i),this._d(`curve`,r,n)}polygon(e,t){let n=this._o(t),r=[],i=he(e,!0,n);return n.fill&&(n.fillStyle===`solid`?r.push(Se([e],n)):r.push(V([e],n))),n.stroke!==G&&r.push(i),this._d(`polygon`,r,n)}path(t,n){let r=this._o(n),i=[];if(!t)return this._d(`path`,i,r);t=(t||``).replace(/\n/g,` `).replace(/(-\s)/g,`-`).replace(`/(ss)/g`,` `);let a=r.fill&&r.fill!==`transparent`&&r.fill!==G,o=r.stroke!==G,s=!!(r.simplification&&r.simplification<1),c=(function(t,n,r){let i=ue(le(ce(t))),a=[],o=[],s=[0,0],c=[],l=e(()=>{c.length>=4&&o.push(...ze(c,n)),c=[]},`i`),u=e(()=>{l(),o.length&&(a.push(o),o=[])},`c`);for(let{key:e,data:t}of i)switch(e){case`M`:u(),s=[t[0],t[1]],o.push(s);break;case`L`:l(),o.push([t[0],t[1]]);break;case`C`:if(!c.length){let e=o.length?o[o.length-1]:s;c.push([e[0],e[1]])}c.push([t[0],t[1]]),c.push([t[2],t[3]]),c.push([t[4],t[5]]);break;case`Z`:l(),o.push([s[0],s[1]])}if(u(),!r)return a;let d=[];for(let e of a){let t=Le(e,r);t.length&&d.push(t)}return d})(t,1,s?4-4*(r.simplification||1):(1+r.roughness)/2),l=xe(t,r);if(a)if(r.fillStyle===`solid`)if(c.length===1){let e=xe(t,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));i.push({type:`fillPath`,ops:this._mergedShape(e.ops)})}else i.push(Se(c,r));else i.push(V(c,r));return o&&(s?c.forEach((e=>{i.push(he(e,!1,r))})):i.push(l)),this._d(`path`,i,r)}opsToPath(e,t){let n=``;for(let r of e.ops){let e=typeof t==`number`&&t>=0?r.data.map((e=>+e.toFixed(t))):r.data;switch(r.op){case`move`:n+=`M${e[0]} ${e[1]} `;break;case`bcurveTo`:n+=`C${e[0]} ${e[1]}, ${e[2]} ${e[3]}, ${e[4]} ${e[5]} `;break;case`lineTo`:n+=`L${e[0]} ${e[1]} `}}return n.trim()}toPaths(e){let t=e.sets||[],n=e.options||this.defaultOptions,r=[];for(let e of t){let t=null;switch(e.type){case`path`:t={d:this.opsToPath(e),stroke:n.stroke,strokeWidth:n.strokeWidth,fill:G};break;case`fillPath`:t={d:this.opsToPath(e),stroke:G,strokeWidth:0,fill:n.fill||G};break;case`fillSketch`:t=this.fillSketch(e,n)}t&&r.push(t)}return r}fillSketch(e,t){let n=t.fillWeight;return n<0&&(n=t.strokeWidth/2),{d:this.opsToPath(e),stroke:t.fill||G,strokeWidth:n,fill:G}}_mergedShape(e){return e.filter(((e,t)=>t===0||e.op!==`move`))}},Ve=class{static{e(this,`st`)}constructor(e,t){this.canvas=e,this.ctx=this.canvas.getContext(`2d`),this.gen=new Be(t)}draw(e){let t=e.sets||[],n=e.options||this.getDefaultOptions(),r=this.ctx,i=e.options.fixedDecimalPlaceDigits;for(let a of t)switch(a.type){case`path`:r.save(),r.strokeStyle=n.stroke===`none`?`transparent`:n.stroke,r.lineWidth=n.strokeWidth,n.strokeLineDash&&r.setLineDash(n.strokeLineDash),n.strokeLineDashOffset&&(r.lineDashOffset=n.strokeLineDashOffset),this._drawToContext(r,a,i),r.restore();break;case`fillPath`:{r.save(),r.fillStyle=n.fill||``;let t=e.shape===`curve`||e.shape===`polygon`||e.shape===`path`?`evenodd`:`nonzero`;this._drawToContext(r,a,i,t),r.restore();break}case`fillSketch`:this.fillSketch(r,a,n)}}fillSketch(e,t,n){let r=n.fillWeight;r<0&&(r=n.strokeWidth/2),e.save(),n.fillLineDash&&e.setLineDash(n.fillLineDash),n.fillLineDashOffset&&(e.lineDashOffset=n.fillLineDashOffset),e.strokeStyle=n.fill||``,e.lineWidth=r,this._drawToContext(e,t,n.fixedDecimalPlaceDigits),e.restore()}_drawToContext(e,t,n,r=`nonzero`){e.beginPath();for(let r of t.ops){let t=typeof n==`number`&&n>=0?r.data.map((e=>+e.toFixed(n))):r.data;switch(r.op){case`move`:e.moveTo(t[0],t[1]);break;case`bcurveTo`:e.bezierCurveTo(t[0],t[1],t[2],t[3],t[4],t[5]);break;case`lineTo`:e.lineTo(t[0],t[1])}}t.type===`fillPath`?e.fill(r):e.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(e,t,n,r,i){let a=this.gen.line(e,t,n,r,i);return this.draw(a),a}rectangle(e,t,n,r,i){let a=this.gen.rectangle(e,t,n,r,i);return this.draw(a),a}ellipse(e,t,n,r,i){let a=this.gen.ellipse(e,t,n,r,i);return this.draw(a),a}circle(e,t,n,r){let i=this.gen.circle(e,t,n,r);return this.draw(i),i}linearPath(e,t){let n=this.gen.linearPath(e,t);return this.draw(n),n}polygon(e,t){let n=this.gen.polygon(e,t);return this.draw(n),n}arc(e,t,n,r,i,a,o=!1,s){let c=this.gen.arc(e,t,n,r,i,a,o,s);return this.draw(c),c}curve(e,t){let n=this.gen.curve(e,t);return this.draw(n),n}path(e,t){let n=this.gen.path(e,t);return this.draw(n),n}},He=`http://www.w3.org/2000/svg`,Ue=class{static{e(this,`ot`)}constructor(e,t){this.svg=e,this.gen=new Be(t)}draw(e){let t=e.sets||[],n=e.options||this.getDefaultOptions(),r=this.svg.ownerDocument||window.document,i=r.createElementNS(He,`g`),a=e.options.fixedDecimalPlaceDigits;for(let o of t){let t=null;switch(o.type){case`path`:t=r.createElementNS(He,`path`),t.setAttribute(`d`,this.opsToPath(o,a)),t.setAttribute(`stroke`,n.stroke),t.setAttribute(`stroke-width`,n.strokeWidth+``),t.setAttribute(`fill`,`none`),n.strokeLineDash&&t.setAttribute(`stroke-dasharray`,n.strokeLineDash.join(` `).trim()),n.strokeLineDashOffset&&t.setAttribute(`stroke-dashoffset`,`${n.strokeLineDashOffset}`);break;case`fillPath`:t=r.createElementNS(He,`path`),t.setAttribute(`d`,this.opsToPath(o,a)),t.setAttribute(`stroke`,`none`),t.setAttribute(`stroke-width`,`0`),t.setAttribute(`fill`,n.fill||``),e.shape!==`curve`&&e.shape!==`polygon`||t.setAttribute(`fill-rule`,`evenodd`);break;case`fillSketch`:t=this.fillSketch(r,o,n)}t&&i.appendChild(t)}return i}fillSketch(e,t,n){let r=n.fillWeight;r<0&&(r=n.strokeWidth/2);let i=e.createElementNS(He,`path`);return i.setAttribute(`d`,this.opsToPath(t,n.fixedDecimalPlaceDigits)),i.setAttribute(`stroke`,n.fill||``),i.setAttribute(`stroke-width`,r+``),i.setAttribute(`fill`,`none`),n.fillLineDash&&i.setAttribute(`stroke-dasharray`,n.fillLineDash.join(` `).trim()),n.fillLineDashOffset&&i.setAttribute(`stroke-dashoffset`,`${n.fillLineDashOffset}`),i}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(e,t){return this.gen.opsToPath(e,t)}line(e,t,n,r,i){let a=this.gen.line(e,t,n,r,i);return this.draw(a)}rectangle(e,t,n,r,i){let a=this.gen.rectangle(e,t,n,r,i);return this.draw(a)}ellipse(e,t,n,r,i){let a=this.gen.ellipse(e,t,n,r,i);return this.draw(a)}circle(e,t,n,r){let i=this.gen.circle(e,t,n,r);return this.draw(i)}linearPath(e,t){let n=this.gen.linearPath(e,t);return this.draw(n)}polygon(e,t){let n=this.gen.polygon(e,t);return this.draw(n)}arc(e,t,n,r,i,a,o=!1,s){let c=this.gen.arc(e,t,n,r,i,a,o,s);return this.draw(c)}curve(e,t){let n=this.gen.curve(e,t);return this.draw(n)}path(e,t){let n=this.gen.path(e,t);return this.draw(n)}},K={canvas:e((e,t)=>new Ve(e,t),`canvas`),svg:e((e,t)=>new Ue(e,t),`svg`),generator:e(e=>new Be(e),`generator`),newSeed:e(()=>Be.newSeed(),`newSeed`)},We=e((e,t)=>{var n=e.x,r=e.y,i=t.x-n,a=t.y-r,o=e.width/2,s=e.height/2,c,l;return Math.abs(a)*o>Math.abs(i)*s?(a<0&&(s=-s),c=a===0?0:s*i/a,l=s):(i<0&&(o=-o),c=o,l=i===0?0:o*a/i),{x:n+c,y:r+l}},`intersectRect`);function Ge(e,t){t&&e.attr(`style`,t)}e(Ge,`applyStyle`);async function Ke(e){let n=t(document.createElementNS(`http://www.w3.org/2000/svg`,`foreignObject`)),i=n.append(`xhtml:div`),c=o(),l=e.label;e.label&&r(e.label)&&(l=await s(e.label.replace(a.lineBreakRegex,`
`),c));let u=`<span class="`+(e.isNode?`nodeLabel`:`edgeLabel`)+`" `+(e.labelStyle?`style="`+e.labelStyle+`"`:``)+`>`+l+`</span>`;return i.html(d(u,c)),Ge(i,e.labelStyle),i.style(`display`,`inline-block`),i.style(`padding-right`,`1px`),i.style(`white-space`,`nowrap`),i.attr(`xmlns`,`http://www.w3.org/1999/xhtml`),n.node()}e(Ke,`addHtmlLabel`);var qe=e(async(e,t,r,i)=>{let a=e||``;if(typeof a==`object`&&(a=a[0]),u(o().flowchart.htmlLabels))return a=a.replace(/\\n|\n/g,`<br />`),n.info(`vertexText`+a),await Ke({isNode:i,label:p(a).replace(/fa[blrs]?:fa-[\w-]+/g,e=>`<i class='${e.replace(`:`,` `)}'></i>`),labelStyle:t&&t.replace(`fill:`,`color:`)});{let e=document.createElementNS(`http://www.w3.org/2000/svg`,`text`);e.setAttribute(`style`,t.replace(`color:`,`fill:`));let n=[];n=typeof a==`string`?a.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(a)?a:[];for(let t of n){let n=document.createElementNS(`http://www.w3.org/2000/svg`,`tspan`);n.setAttributeNS(`http://www.w3.org/XML/1998/namespace`,`xml:space`,`preserve`),n.setAttribute(`dy`,`1em`),n.setAttribute(`x`,`0`),r?n.setAttribute(`class`,`title-row`):n.setAttribute(`class`,`row`),n.textContent=t.trim(),e.appendChild(n)}return e}},`createLabel`),q=e((e,t,n,r,i)=>[`M`,e+i,t,`H`,e+n-i,`A`,i,i,0,0,1,e+n,t+i,`V`,t+r-i,`A`,i,i,0,0,1,e+n-i,t+r,`H`,e+i,`A`,i,i,0,0,1,e,t+r-i,`V`,t+i,`A`,i,i,0,0,1,e+i,t,`Z`].join(` `),`createRoundedRectPathD`),Je=e(async(e,r)=>{n.info(`Creating subgraph rect for `,r.id,r);let i=o(),{themeVariables:a,handDrawnSeed:s}=i,{clusterBkg:c,clusterBorder:l}=a,{labelStyles:d,nodeStyles:f,borderStyles:p,backgroundStyles:m}=S(r),h=e.insert(`g`).attr(`class`,`cluster `+r.cssClasses).attr(`id`,r.id).attr(`data-look`,r.look),g=u(i.flowchart.htmlLabels),v=h.insert(`g`).attr(`class`,`cluster-label `),b=await _(v,r.label,{style:r.labelStyle,useHtmlLabels:g,isNode:!0}),x=b.getBBox();if(u(i.flowchart.htmlLabels)){let e=b.children[0],n=t(b);x=e.getBoundingClientRect(),n.attr(`width`,x.width),n.attr(`height`,x.height)}let w=r.width<=x.width+r.padding?x.width+r.padding:r.width;r.width<=x.width+r.padding?r.diff=(w-r.width)/2-r.padding:r.diff=-r.padding;let T=r.height,E=r.x-w/2,D=r.y-T/2;n.trace(`Data `,r,JSON.stringify(r));let O;if(r.look===`handDrawn`){let e=K.svg(h),t=C(r,{roughness:.7,fill:c,stroke:l,fillWeight:3,seed:s}),i=e.path(q(E,D,w,T,0),t);O=h.insert(()=>(n.debug(`Rough node insert CXC`,i),i),`:first-child`),O.select(`path:nth-child(2)`).attr(`style`,p.join(`;`)),O.select(`path`).attr(`style`,m.join(`;`).replace(`fill`,`stroke`))}else O=h.insert(`rect`,`:first-child`),O.attr(`style`,f).attr(`rx`,r.rx).attr(`ry`,r.ry).attr(`x`,E).attr(`y`,D).attr(`width`,w).attr(`height`,T);let{subGraphTitleTopMargin:k}=y(i);if(v.attr(`transform`,`translate(${r.x-x.width/2}, ${r.y-r.height/2+k})`),d){let e=v.select(`span`);e&&e.attr(`style`,d)}let A=O.node().getBBox();return r.offsetX=0,r.width=A.width,r.height=A.height,r.offsetY=x.height-r.padding/2,r.intersect=function(e){return We(r,e)},{cluster:h,labelBBox:x}},`rect`),Ye=e((e,t)=>{let n=e.insert(`g`).attr(`class`,`note-cluster`).attr(`id`,t.id),r=n.insert(`rect`,`:first-child`),i=0*t.padding,a=i/2;r.attr(`rx`,t.rx).attr(`ry`,t.ry).attr(`x`,t.x-t.width/2-a).attr(`y`,t.y-t.height/2-a).attr(`width`,t.width+i).attr(`height`,t.height+i).attr(`fill`,`none`);let o=r.node().getBBox();return t.width=o.width,t.height=o.height,t.intersect=function(e){return We(t,e)},{cluster:n,labelBBox:{width:0,height:0}}},`noteGroup`),Xe=e(async(e,n)=>{let r=o(),{themeVariables:i,handDrawnSeed:a}=r,{altBackground:s,compositeBackground:c,compositeTitleBackground:l,nodeBorder:d}=i,f=e.insert(`g`).attr(`class`,n.cssClasses).attr(`id`,n.id).attr(`data-id`,n.id).attr(`data-look`,n.look),p=f.insert(`g`,`:first-child`),m=f.insert(`g`).attr(`class`,`cluster-label`),h=f.append(`rect`),g=m.node().appendChild(await qe(n.label,n.labelStyle,void 0,!0)),_=g.getBBox();if(u(r.flowchart.htmlLabels)){let e=g.children[0],n=t(g);_=e.getBoundingClientRect(),n.attr(`width`,_.width),n.attr(`height`,_.height)}let v=0*n.padding,y=v/2,b=(n.width<=_.width+n.padding?_.width+n.padding:n.width)+v;n.width<=_.width+n.padding?n.diff=(b-n.width)/2-n.padding:n.diff=-n.padding;let x=n.height+v,S=n.height+v-_.height-6,C=n.x-b/2,w=n.y-x/2;n.width=b;let T=n.y-n.height/2-y+_.height+2,E;if(n.look===`handDrawn`){let e=n.cssClasses.includes(`statediagram-cluster-alt`),t=K.svg(f),r=n.rx||n.ry?t.path(q(C,w,b,x,10),{roughness:.7,fill:l,fillStyle:`solid`,stroke:d,seed:a}):t.rectangle(C,w,b,x,{seed:a});E=f.insert(()=>r,`:first-child`);let i=t.rectangle(C,T,b,S,{fill:e?s:c,fillStyle:e?`hachure`:`solid`,stroke:d,seed:a});E=f.insert(()=>r,`:first-child`),h=f.insert(()=>i)}else E=p.insert(`rect`,`:first-child`),E.attr(`class`,`outer`).attr(`x`,C).attr(`y`,w).attr(`width`,b).attr(`height`,x).attr(`data-look`,n.look),h.attr(`class`,`inner`).attr(`x`,C).attr(`y`,T).attr(`width`,b).attr(`height`,S);return m.attr(`transform`,`translate(${n.x-_.width/2}, ${w+1-(u(r.flowchart.htmlLabels)?0:3)})`),n.height=E.node().getBBox().height,n.offsetX=0,n.offsetY=_.height-n.padding/2,n.labelBBox=_,n.intersect=function(e){return We(n,e)},{cluster:f,labelBBox:_}},`roundedWithTitle`),Ze=e(async(e,r)=>{n.info(`Creating subgraph rect for `,r.id,r);let i=o(),{themeVariables:a,handDrawnSeed:s}=i,{clusterBkg:c,clusterBorder:l}=a,{labelStyles:d,nodeStyles:f,borderStyles:p,backgroundStyles:m}=S(r),h=e.insert(`g`).attr(`class`,`cluster `+r.cssClasses).attr(`id`,r.id).attr(`data-look`,r.look),g=u(i.flowchart.htmlLabels),v=h.insert(`g`).attr(`class`,`cluster-label `),b=await _(v,r.label,{style:r.labelStyle,useHtmlLabels:g,isNode:!0,width:r.width}),x=b.getBBox();if(u(i.flowchart.htmlLabels)){let e=b.children[0],n=t(b);x=e.getBoundingClientRect(),n.attr(`width`,x.width),n.attr(`height`,x.height)}let w=r.width<=x.width+r.padding?x.width+r.padding:r.width;r.width<=x.width+r.padding?r.diff=(w-r.width)/2-r.padding:r.diff=-r.padding;let T=r.height,E=r.x-w/2,D=r.y-T/2;n.trace(`Data `,r,JSON.stringify(r));let O;if(r.look===`handDrawn`){let e=K.svg(h),t=C(r,{roughness:.7,fill:c,stroke:l,fillWeight:4,seed:s}),i=e.path(q(E,D,w,T,r.rx),t);O=h.insert(()=>(n.debug(`Rough node insert CXC`,i),i),`:first-child`),O.select(`path:nth-child(2)`).attr(`style`,p.join(`;`)),O.select(`path`).attr(`style`,m.join(`;`).replace(`fill`,`stroke`))}else O=h.insert(`rect`,`:first-child`),O.attr(`style`,f).attr(`rx`,r.rx).attr(`ry`,r.ry).attr(`x`,E).attr(`y`,D).attr(`width`,w).attr(`height`,T);let{subGraphTitleTopMargin:k}=y(i);if(v.attr(`transform`,`translate(${r.x-x.width/2}, ${r.y-r.height/2+k})`),d){let e=v.select(`span`);e&&e.attr(`style`,d)}let A=O.node().getBBox();return r.offsetX=0,r.width=A.width,r.height=A.height,r.offsetY=x.height-r.padding/2,r.intersect=function(e){return We(r,e)},{cluster:h,labelBBox:x}},`kanbanSection`),Qe={rect:Je,squareRect:Je,roundedWithTitle:Xe,noteGroup:Ye,divider:e((e,t)=>{let{themeVariables:n,handDrawnSeed:r}=o(),{nodeBorder:i}=n,a=e.insert(`g`).attr(`class`,t.cssClasses).attr(`id`,t.id).attr(`data-look`,t.look),s=a.insert(`g`,`:first-child`),c=0*t.padding,l=t.width+c;t.diff=-t.padding;let u=t.height+c,d=t.x-l/2,f=t.y-u/2;t.width=l;let p;if(t.look===`handDrawn`){let e=K.svg(a).rectangle(d,f,l,u,{fill:`lightgrey`,roughness:.5,strokeLineDash:[5],stroke:i,seed:r});p=a.insert(()=>e,`:first-child`)}else p=s.insert(`rect`,`:first-child`),p.attr(`class`,`divider`).attr(`x`,d).attr(`y`,f).attr(`width`,l).attr(`height`,u).attr(`data-look`,t.look);return t.height=p.node().getBBox().height,t.offsetX=0,t.offsetY=0,t.intersect=function(e){return We(t,e)},{cluster:a,labelBBox:{}}},`divider`),kanbanSection:Ze},$e=new Map,et=e(async(e,t)=>{let n=await Qe[t.shape||`rect`](e,t);return $e.set(t.id,n),n},`insertCluster`),tt=e(()=>{$e=new Map},`clear`);function nt(e,t){return e.intersect(t)}e(nt,`intersectNode`);var rt=nt;function it(e,t,n,r){var i=e.x,a=e.y,o=i-r.x,s=a-r.y,c=Math.sqrt(t*t*s*s+n*n*o*o),l=Math.abs(t*n*o/c);r.x<i&&(l=-l);var u=Math.abs(t*n*s/c);return r.y<a&&(u=-u),{x:i+l,y:a+u}}e(it,`intersectEllipse`);var at=it;function ot(e,t,n){return at(e,t,t,n)}e(ot,`intersectCircle`);var st=ot;function ct(e,t,n,r){{let i=t.y-e.y,a=e.x-t.x,o=t.x*e.y-e.x*t.y,s=i*n.x+a*n.y+o,c=i*r.x+a*r.y+o,l=1e-6;if(s!==0&&c!==0&&lt(s,c))return;let u=r.y-n.y,d=n.x-r.x,f=r.x*n.y-n.x*r.y,p=u*e.x+d*e.y+f,m=u*t.x+d*t.y+f;if(Math.abs(p)<l&&Math.abs(m)<l&&lt(p,m))return;let h=i*d-u*a;if(h===0)return;let g=Math.abs(h/2),_=a*f-d*o,v=_<0?(_-g)/h:(_+g)/h;return _=u*o-i*f,{x:v,y:_<0?(_-g)/h:(_+g)/h}}}e(ct,`intersectLine`);function lt(e,t){return e*t>0}e(lt,`sameSign`);var ut=ct;function dt(e,t,n){let r=e.x,i=e.y,a=[],o=1/0,s=1/0;typeof t.forEach==`function`?t.forEach(function(e){o=Math.min(o,e.x),s=Math.min(s,e.y)}):(o=Math.min(o,t.x),s=Math.min(s,t.y));let c=r-e.width/2-o,l=i-e.height/2-s;for(let r=0;r<t.length;r++){let i=t[r],o=t[r<t.length-1?r+1:0],s=ut(e,n,{x:c+i.x,y:l+i.y},{x:c+o.x,y:l+o.y});s&&a.push(s)}return a.length?(a.length>1&&a.sort(function(e,t){let r=e.x-n.x,i=e.y-n.y,a=Math.sqrt(r*r+i*i),o=t.x-n.x,s=t.y-n.y,c=Math.sqrt(o*o+s*s);return a<c?-1:a===c?0:1}),a[0]):e}e(dt,`intersectPolygon`);var J={node:rt,circle:st,ellipse:at,polygon:dt,rect:We};function ft(e,t){let{labelStyles:r}=S(t);t.labelStyle=r;let i=D(t),a=i;i||(a=`anchor`);let o=e.insert(`g`).attr(`class`,a).attr(`id`,t.domId||t.id),{cssStyles:s}=t,c=K.svg(o),l=C(t,{fill:`black`,stroke:`none`,fillStyle:`solid`});t.look!==`handDrawn`&&(l.roughness=0);let u=c.circle(0,0,2,l),d=o.insert(()=>u,`:first-child`);return d.attr(`class`,`anchor`).attr(`style`,m(s)),E(t,d),t.intersect=function(e){return n.info(`Circle intersect`,t,1,e),J.circle(t,1,e)},o}e(ft,`anchor`);function pt(e,t,n,r,i,a,o){let s=(e+n)/2,c=(t+r)/2,l=Math.atan2(r-t,n-e),u=(n-e)/2,d=(r-t)/2,f=u/i,p=d/a,m=Math.sqrt(f**2+p**2);if(m>1)throw Error(`The given radii are too small to create an arc between the points.`);let h=Math.sqrt(1-m**2),g=s+h*a*Math.sin(l)*(o?-1:1),_=c-h*i*Math.cos(l)*(o?-1:1),v=Math.atan2((t-_)/a,(e-g)/i),y=Math.atan2((r-_)/a,(n-g)/i)-v;o&&y<0&&(y+=2*Math.PI),!o&&y>0&&(y-=2*Math.PI);let b=[];for(let e=0;e<20;e++){let t=v+e/19*y,n=g+i*Math.cos(t),r=_+a*Math.sin(t);b.push({x:n,y:r})}return b}e(pt,`generateArcPoints`);async function mt(e,t){let{labelStyles:n,nodeStyles:r}=S(t);t.labelStyle=n;let{shapeSvg:i,bbox:a}=await w(e,t,D(t)),o=a.width+t.padding+20,s=a.height+t.padding,c=s/2,l=c/(2.5+s/50),{cssStyles:u}=t,d=[{x:o/2,y:-s/2},{x:-o/2,y:-s/2},...pt(-o/2,-s/2,-o/2,s/2,l,c,!1),{x:o/2,y:s/2},...pt(o/2,s/2,o/2,-s/2,l,c,!0)],f=K.svg(i),p=C(t,{});t.look!==`handDrawn`&&(p.roughness=0,p.fillStyle=`solid`);let m=O(d),h=f.path(m,p),g=i.insert(()=>h,`:first-child`);return g.attr(`class`,`basic label-container`),u&&t.look!==`handDrawn`&&g.selectAll(`path`).attr(`style`,u),r&&t.look!==`handDrawn`&&g.selectAll(`path`).attr(`style`,r),g.attr(`transform`,`translate(${l/2}, 0)`),E(t,g),t.intersect=function(e){return J.polygon(t,d,e)},i}e(mt,`bowTieRect`);function Y(e,t,n,r){return e.insert(`polygon`,`:first-child`).attr(`points`,r.map(function(e){return e.x+`,`+e.y}).join(` `)).attr(`class`,`label-container`).attr(`transform`,`translate(`+-t/2+`,`+n/2+`)`)}e(Y,`insertPolygonShape`);async function ht(e,t){let{labelStyles:n,nodeStyles:r}=S(t);t.labelStyle=n;let{shapeSvg:i,bbox:a}=await w(e,t,D(t)),o=a.height+t.padding,s=a.width+t.padding+12,c=s,l=-o,u=[{x:12,y:l},{x:c,y:l},{x:c,y:0},{x:0,y:0},{x:0,y:l+12},{x:12,y:l}],d,{cssStyles:f}=t;if(t.look===`handDrawn`){let e=K.svg(i),n=C(t,{}),r=O(u),a=e.path(r,n);d=i.insert(()=>a,`:first-child`).attr(`transform`,`translate(${-s/2}, ${o/2})`),f&&d.attr(`style`,f)}else d=Y(i,s,o,u);return r&&d.attr(`style`,r),E(t,d),t.intersect=function(e){return J.polygon(t,u,e)},i}e(ht,`card`);function gt(e,t){let{nodeStyles:n}=S(t);t.label=``;let r=e.insert(`g`).attr(`class`,D(t)).attr(`id`,t.domId??t.id),{cssStyles:i}=t,a=Math.max(28,t.width??0),o=[{x:0,y:a/2},{x:a/2,y:0},{x:0,y:-a/2},{x:-a/2,y:0}],s=K.svg(r),c=C(t,{});t.look!==`handDrawn`&&(c.roughness=0,c.fillStyle=`solid`);let l=O(o),u=s.path(l,c),d=r.insert(()=>u,`:first-child`);return i&&t.look!==`handDrawn`&&d.selectAll(`path`).attr(`style`,i),n&&t.look!==`handDrawn`&&d.selectAll(`path`).attr(`style`,n),t.width=28,t.height=28,t.intersect=function(e){return J.polygon(t,o,e)},r}e(gt,`choice`);async function _t(e,t,r){let{labelStyles:i,nodeStyles:a}=S(t);t.labelStyle=i;let{shapeSvg:o,bbox:s,halfPadding:c}=await w(e,t,D(t)),l=r?.padding??c,u=s.width/2+l,d,{cssStyles:f}=t;if(t.look===`handDrawn`){let e=K.svg(o),n=C(t,{}),r=e.circle(0,0,u*2,n);d=o.insert(()=>r,`:first-child`),d.attr(`class`,`basic label-container`).attr(`style`,m(f))}else d=o.insert(`circle`,`:first-child`).attr(`class`,`basic label-container`).attr(`style`,a).attr(`r`,u).attr(`cx`,0).attr(`cy`,0);return E(t,d),t.calcIntersect=function(e,t){let n=e.width/2;return J.circle(e,n,t)},t.intersect=function(e){return n.info(`Circle intersect`,t,u,e),J.circle(t,u,e)},o}e(_t,`circle`);function vt(e){let t=Math.cos(Math.PI/4),n=Math.sin(Math.PI/4),r=e*2,i={x:r/2*t,y:r/2*n},a={x:-(r/2)*t,y:r/2*n},o={x:-(r/2)*t,y:-(r/2)*n},s={x:r/2*t,y:-(r/2)*n};return`M ${a.x},${a.y} L ${s.x},${s.y}
                   M ${i.x},${i.y} L ${o.x},${o.y}`}e(vt,`createLine`);function yt(e,t){let{labelStyles:r,nodeStyles:i}=S(t);t.labelStyle=r,t.label=``;let a=e.insert(`g`).attr(`class`,D(t)).attr(`id`,t.domId??t.id),o=Math.max(30,t?.width??0),{cssStyles:s}=t,c=K.svg(a),l=C(t,{});t.look!==`handDrawn`&&(l.roughness=0,l.fillStyle=`solid`);let u=c.circle(0,0,o*2,l),d=vt(o),f=c.path(d,l),p=a.insert(()=>u,`:first-child`);return p.insert(()=>f),s&&t.look!==`handDrawn`&&p.selectAll(`path`).attr(`style`,s),i&&t.look!==`handDrawn`&&p.selectAll(`path`).attr(`style`,i),E(t,p),t.intersect=function(e){return n.info(`crossedCircle intersect`,t,{radius:o,point:e}),J.circle(t,o,e)},a}e(yt,`crossedCircle`);function X(e,t,n,r=100,i=0,a=180){let o=[],s=i*Math.PI/180,c=(a*Math.PI/180-s)/(r-1);for(let i=0;i<r;i++){let r=s+i*c,a=e+n*Math.cos(r),l=t+n*Math.sin(r);o.push({x:-a,y:-l})}return o}e(X,`generateCirclePoints`);async function bt(e,t){let{labelStyles:n,nodeStyles:r}=S(t);t.labelStyle=n;let{shapeSvg:i,bbox:a,label:o}=await w(e,t,D(t)),s=a.width+(t.padding??0),c=a.height+(t.padding??0),l=Math.max(5,c*.1),{cssStyles:u}=t,d=[...X(s/2,-c/2,l,30,-90,0),{x:-s/2-l,y:l},...X(s/2+l*2,-l,l,20,-180,-270),...X(s/2+l*2,l,l,20,-90,-180),{x:-s/2-l,y:-c/2},...X(s/2,c/2,l,20,0,90)],f=[{x:s/2,y:-c/2-l},{x:-s/2,y:-c/2-l},...X(s/2,-c/2,l,20,-90,0),{x:-s/2-l,y:-l},...X(s/2+s*.1,-l,l,20,-180,-270),...X(s/2+s*.1,l,l,20,-90,-180),{x:-s/2-l,y:c/2},...X(s/2,c/2,l,20,0,90),{x:-s/2,y:c/2+l},{x:s/2,y:c/2+l}],p=K.svg(i),m=C(t,{fill:`none`});t.look!==`handDrawn`&&(m.roughness=0,m.fillStyle=`solid`);let h=O(d).replace(`Z`,``),g=p.path(h,m),_=O(f),v=p.path(_,{...m}),y=i.insert(`g`,`:first-child`);return y.insert(()=>v,`:first-child`).attr(`stroke-opacity`,0),y.insert(()=>g,`:first-child`),y.attr(`class`,`text`),u&&t.look!==`handDrawn`&&y.selectAll(`path`).attr(`style`,u),r&&t.look!==`handDrawn`&&y.selectAll(`path`).attr(`style`,r),y.attr(`transform`,`translate(${l}, 0)`),o.attr(`transform`,`translate(${-s/2+l-(a.x-(a.left??0))},${-c/2+(t.padding??0)/2-(a.y-(a.top??0))})`),E(t,y),t.intersect=function(e){return J.polygon(t,f,e)},i}e(bt,`curlyBraceLeft`);function Z(e,t,n,r=100,i=0,a=180){let o=[],s=i*Math.PI/180,c=(a*Math.PI/180-s)/(r-1);for(let i=0;i<r;i++){let r=s+i*c,a=e+n*Math.cos(r),l=t+n*Math.sin(r);o.push({x:a,y:l})}return o}e(Z,`generateCirclePoints`);async function xt(e,t){let{labelStyles:n,nodeStyles:r}=S(t);t.labelStyle=n;let{shapeSvg:i,bbox:a,label:o}=await w(e,t,D(t)),s=a.width+(t.padding??0),c=a.height+(t.padding??0),l=Math.max(5,c*.1),{cssStyles:u}=t,d=[...Z(s/2,-c/2,l,20,-90,0),{x:s/2+l,y:-l},...Z(s/2+l*2,-l,l,20,-180,-270),...Z(s/2+l*2,l,l,20,-90,-180),{x:s/2+l,y:c/2},...Z(s/2,c/2,l,20,0,90)],f=[{x:-s/2,y:-c/2-l},{x:s/2,y:-c/2-l},...Z(s/2,-c/2,l,20,-90,0),{x:s/2+l,y:-l},...Z(s/2+l*2,-l,l,20,-180,-270),...Z(s/2+l*2,l,l,20,-90,-180),{x:s/2+l,y:c/2},...Z(s/2,c/2,l,20,0,90),{x:s/2,y:c/2+l},{x:-s/2,y:c/2+l}],p=K.svg(i),m=C(t,{fill:`none`});t.look!==`handDrawn`&&(m.roughness=0,m.fillStyle=`solid`);let h=O(d).replace(`Z`,``),g=p.path(h,m),_=O(f),v=p.path(_,{...m}),y=i.insert(`g`,`:first-child`);return y.insert(()=>v,`:first-child`).attr(`stroke-opacity`,0),y.insert(()=>g,`:first-child`),y.attr(`class`,`text`),u&&t.look!==`handDrawn`&&y.selectAll(`path`).attr(`style`,u),r&&t.look!==`handDrawn`&&y.selectAll(`path`).attr(`style`,r),y.attr(`transform`,`translate(${-l}, 0)`),o.attr(`transform`,`translate(${-s/2+(t.padding??0)/2-(a.x-(a.left??0))},${-c/2+(t.padding??0)/2-(a.y-(a.top??0))})`),E(t,y),t.intersect=function(e){return J.polygon(t,f,e)},i}e(xt,`curlyBraceRight`);function Q(e,t,n,r=100,i=0,a=180){let o=[],s=i*Math.PI/180,c=(a*Math.PI/180-s)/(r-1);for(let i=0;i<r;i++){let r=s+i*c,a=e+n*Math.cos(r),l=t+n*Math.sin(r);o.push({x:-a,y:-l})}return o}e(Q,`generateCirclePoints`);async function St(e,t){let{labelStyles:n,nodeStyles:r}=S(t);t.labelStyle=n;let{shapeSvg:i,bbox:a,label:o}=await w(e,t,D(t)),s=a.width+(t.padding??0),c=a.height+(t.padding??0),l=Math.max(5,c*.1),{cssStyles:u}=t,d=[...Q(s/2,-c/2,l,30,-90,0),{x:-s/2-l,y:l},...Q(s/2+l*2,-l,l,20,-180,-270),...Q(s/2+l*2,l,l,20,-90,-180),{x:-s/2-l,y:-c/2},...Q(s/2,c/2,l,20,0,90)],f=[...Q(-s/2+l+l/2,-c/2,l,20,-90,-180),{x:s/2-l/2,y:l},...Q(-s/2-l/2,-l,l,20,0,90),...Q(-s/2-l/2,l,l,20,-90,0),{x:s/2-l/2,y:-l},...Q(-s/2+l+l/2,c/2,l,30,-180,-270)],p=[{x:s/2,y:-c/2-l},{x:-s/2,y:-c/2-l},...Q(s/2,-c/2,l,20,-90,0),{x:-s/2-l,y:-l},...Q(s/2+l*2,-l,l,20,-180,-270),...Q(s/2+l*2,l,l,20,-90,-180),{x:-s/2-l,y:c/2},...Q(s/2,c/2,l,20,0,90),{x:-s/2,y:c/2+l},{x:s/2-l-l/2,y:c/2+l},...Q(-s/2+l+l/2,-c/2,l,20,-90,-180),{x:s/2-l/2,y:l},...Q(-s/2-l/2,-l,l,20,0,90),...Q(-s/2-l/2,l,l,20,-90,0),{x:s/2-l/2,y:-l},...Q(-s/2+l+l/2,c/2,l,30,-180,-270)],m=K.svg(i),h=C(t,{fill:`none`});t.look!==`handDrawn`&&(h.roughness=0,h.fillStyle=`solid`);let g=O(d).replace(`Z`,``),_=m.path(g,h),v=O(f).replace(`Z`,``),y=m.path(v,h),b=O(p),x=m.path(b,{...h}),T=i.insert(`g`,`:first-child`);return T.insert(()=>x,`:first-child`).attr(`stroke-opacity`,0),T.insert(()=>_,`:first-child`),T.insert(()=>y,`:first-child`),T.attr(`class`,`text`),u&&t.look!==`handDrawn`&&T.selectAll(`path`).attr(`style`,u),r&&t.look!==`handDrawn`&&T.selectAll(`path`).attr(`style`,r),T.attr(`transform`,`translate(${l-l/4}, 0)`),o.attr(`transform`,`translate(${-s/2+(t.padding??0)/2-(a.x-(a.left??0))},${-c/2+(t.padding??0)/2-(a.y-(a.top??0))})`),E(t,T),t.intersect=function(e){return J.polygon(t,p,e)},i}e(St,`curlyBraces`);async function Ct(e,t){let{labelStyles:n,nodeStyles:r}=S(t);t.labelStyle=n;let{shapeSvg:i,bbox:a}=await w(e,t,D(t)),o=Math.max(80,(a.width+(t.padding??0)*2)*1.25,t?.width??0),s=Math.max(20,a.height+(t.padding??0)*2,t?.height??0),c=s/2,{cssStyles:l}=t,u=K.svg(i),d=C(t,{});t.look!==`handDrawn`&&(d.roughness=0,d.fillStyle=`solid`);let f=o,p=s,m=f-c,h=p/4,g=[{x:m,y:0},{x:h,y:0},{x:0,y:p/2},{x:h,y:p},{x:m,y:p},...A(-m,-p/2,c,50,270,90)],_=O(g),v=u.path(_,d),y=i.insert(()=>v,`:first-child`);return y.attr(`class`,`basic label-container`),l&&t.look!==`handDrawn`&&y.selectChildren(`path`).attr(`style`,l),r&&t.look!==`handDrawn`&&y.selectChildren(`path`).attr(`style`,r),y.attr(`transform`,`translate(${-o/2}, ${-s/2})`),E(t,y),t.intersect=function(e){return J.polygon(t,g,e)},i}e(Ct,`curvedTrapezoid`);var wt=e((e,t,n,r,i,a)=>[`M${e},${t+a}`,`a${i},${a} 0,0,0 ${n},0`,`a${i},${a} 0,0,0 ${-n},0`,`l0,${r}`,`a${i},${a} 0,0,0 ${n},0`,`l0,${-r}`].join(` `),`createCylinderPathD`),Tt=e((e,t,n,r,i,a)=>[`M${e},${t+a}`,`M${e+n},${t+a}`,`a${i},${a} 0,0,0 ${-n},0`,`l0,${r}`,`a${i},${a} 0,0,0 ${n},0`,`l0,${-r}`].join(` `),`createOuterCylinderPathD`),Et=e((e,t,n,r,i,a)=>[`M${e-n/2},${-r/2}`,`a${i},${a} 0,0,0 ${n},0`].join(` `),`createInnerCylinderPathD`);async function Dt(e,t){let{labelStyles:n,nodeStyles:r}=S(t);t.labelStyle=n;let{shapeSvg:i,bbox:a,label:o}=await w(e,t,D(t)),s=Math.max(a.width+t.padding,t.width??0),c=s/2,l=c/(2.5+s/50),u=Math.max(a.height+l+t.padding,t.height??0),d,{cssStyles:f}=t;if(t.look===`handDrawn`){let e=K.svg(i),n=Tt(0,0,s,u,c,l),r=Et(0,l,s,u,c,l),a=e.path(n,C(t,{})),o=e.path(r,C(t,{fill:`none`}));d=i.insert(()=>o,`:first-child`),d=i.insert(()=>a,`:first-child`),d.attr(`class`,`basic label-container`),f&&d.attr(`style`,f)}else{let e=wt(0,0,s,u,c,l);d=i.insert(`path`,`:first-child`).attr(`d`,e).attr(`class`,`basic label-container`).attr(`style`,m(f)).attr(`style`,r)}return d.attr(`label-offset-y`,l),d.attr(`transform`,`translate(${-s/2}, ${-(u/2+l)})`),E(t,d),o.attr(`transform`,`translate(${-(a.width/2)-(a.x-(a.left??0))}, ${-(a.height/2)+(t.padding??0)/1.5-(a.y-(a.top??0))})`),t.intersect=function(e){let n=J.rect(t,e),r=n.x-(t.x??0);if(c!=0&&(Math.abs(r)<(t.width??0)/2||Math.abs(r)==(t.width??0)/2&&Math.abs(n.y-(t.y??0))>(t.height??0)/2-l)){let i=l*l*(1-r*r/(c*c));i>0&&(i=Math.sqrt(i)),i=l-i,e.y-(t.y??0)>0&&(i=-i),n.y+=i}return n},i}e(Dt,`cylinder`);async function Ot(e,t){let{labelStyles:n,nodeStyles:r}=S(t);t.labelStyle=n;let{shapeSvg:i,bbox:a,label:o}=await w(e,t,D(t)),s=a.width+t.padding,c=a.height+t.padding,l=c*.2,u=-s/2,d=-c/2-l/2,{cssStyles:f}=t,p=K.svg(i),m=C(t,{});t.look!==`handDrawn`&&(m.roughness=0,m.fillStyle=`solid`);let h=[{x:u,y:d+l},{x:-u,y:d+l},{x:-u,y:-d},{x:u,y:-d},{x:u,y:d},{x:-u,y:d},{x:-u,y:d+l}],g=p.polygon(h.map(e=>[e.x,e.y]),m),_=i.insert(()=>g,`:first-child`);return _.attr(`class`,`basic label-container`),f&&t.look!==`handDrawn`&&_.selectAll(`path`).attr(`style`,f),r&&t.look!==`handDrawn`&&_.selectAll(`path`).attr(`style`,r),o.attr(`transform`,`translate(${u+(t.padding??0)/2-(a.x-(a.left??0))}, ${d+l+(t.padding??0)/2-(a.y-(a.top??0))})`),E(t,_),t.intersect=function(e){return J.rect(t,e)},i}e(Ot,`dividedRectangle`);async function kt(e,t){let{labelStyles:r,nodeStyles:i}=S(t);t.labelStyle=r;let{shapeSvg:a,bbox:o,halfPadding:s}=await w(e,t,D(t)),c=o.width/2+s+5,l=o.width/2+s,u,{cssStyles:d}=t;if(t.look===`handDrawn`){let e=K.svg(a),n=C(t,{roughness:.2,strokeWidth:2.5}),r=C(t,{roughness:.2,strokeWidth:1.5}),i=e.circle(0,0,c*2,n),o=e.circle(0,0,l*2,r);u=a.insert(`g`,`:first-child`),u.attr(`class`,m(t.cssClasses)).attr(`style`,m(d)),u.node()?.appendChild(i),u.node()?.appendChild(o)}else{u=a.insert(`g`,`:first-child`);let e=u.insert(`circle`,`:first-child`),t=u.insert(`circle`);u.attr(`class`,`basic label-container`).attr(`style`,i),e.attr(`class`,`outer-circle`).attr(`style`,i).attr(`r`,c).attr(`cx`,0).attr(`cy`,0),t.attr(`class`,`inner-circle`).attr(`style`,i).attr(`r`,l).attr(`cx`,0).attr(`cy`,0)}return E(t,u),t.intersect=function(e){return n.info(`DoubleCircle intersect`,t,c,e),J.circle(t,c,e)},a}e(kt,`doublecircle`);function At(e,t,{config:{themeVariables:r}}){let{labelStyles:i,nodeStyles:a}=S(t);t.label=``,t.labelStyle=i;let o=e.insert(`g`).attr(`class`,D(t)).attr(`id`,t.domId??t.id),{cssStyles:s}=t,c=K.svg(o),{nodeBorder:l}=r,u=C(t,{fillStyle:`solid`});t.look!==`handDrawn`&&(u.roughness=0);let d=c.circle(0,0,14,u),f=o.insert(()=>d,`:first-child`);return f.selectAll(`path`).attr(`style`,`fill: ${l} !important;`),s&&s.length>0&&t.look!==`handDrawn`&&f.selectAll(`path`).attr(`style`,s),a&&t.look!==`handDrawn`&&f.selectAll(`path`).attr(`style`,a),E(t,f),t.intersect=function(e){return n.info(`filledCircle intersect`,t,{radius:7,point:e}),J.circle(t,7,e)},o}e(At,`filledCircle`);async function jt(e,t){let{labelStyles:r,nodeStyles:i}=S(t);t.labelStyle=r;let{shapeSvg:a,bbox:o,label:s}=await w(e,t,D(t)),c=o.width+(t.padding??0),l=c+o.height,u=c+o.height,d=[{x:0,y:-l},{x:u,y:-l},{x:u/2,y:0}],{cssStyles:f}=t,p=K.svg(a),m=C(t,{});t.look!==`handDrawn`&&(m.roughness=0,m.fillStyle=`solid`);let h=O(d),g=p.path(h,m),_=a.insert(()=>g,`:first-child`).attr(`transform`,`translate(${-l/2}, ${l/2})`);return f&&t.look!==`handDrawn`&&_.selectChildren(`path`).attr(`style`,f),i&&t.look!==`handDrawn`&&_.selectChildren(`path`).attr(`style`,i),t.width=c,t.height=l,E(t,_),s.attr(`transform`,`translate(${-o.width/2-(o.x-(o.left??0))}, ${-l/2+(t.padding??0)/2+(o.y-(o.top??0))})`),t.intersect=function(e){return n.info(`Triangle intersect`,t,d,e),J.polygon(t,d,e)},a}e(jt,`flippedTriangle`);function Mt(e,t,{dir:n,config:{state:r,themeVariables:i}}){let{nodeStyles:a}=S(t);t.label=``;let o=e.insert(`g`).attr(`class`,D(t)).attr(`id`,t.domId??t.id),{cssStyles:s}=t,c=Math.max(70,t?.width??0),l=Math.max(10,t?.height??0);n===`LR`&&(c=Math.max(10,t?.width??0),l=Math.max(70,t?.height??0));let u=-1*c/2,d=-1*l/2,f=K.svg(o),p=C(t,{stroke:i.lineColor,fill:i.lineColor});t.look!==`handDrawn`&&(p.roughness=0,p.fillStyle=`solid`);let m=f.rectangle(u,d,c,l,p),h=o.insert(()=>m,`:first-child`);s&&t.look!==`handDrawn`&&h.selectAll(`path`).attr(`style`,s),a&&t.look!==`handDrawn`&&h.selectAll(`path`).attr(`style`,a),E(t,h);let g=r?.padding??0;return t.width&&t.height&&(t.width+=g/2||0,t.height+=g/2||0),t.intersect=function(e){return J.rect(t,e)},o}e(Mt,`forkJoin`);async function Nt(e,t){let{labelStyles:r,nodeStyles:i}=S(t);t.labelStyle=r;let{shapeSvg:a,bbox:o}=await w(e,t,D(t)),s=Math.max(80,o.width+(t.padding??0)*2,t?.width??0),c=Math.max(50,o.height+(t.padding??0)*2,t?.height??0),l=c/2,{cssStyles:u}=t,d=K.svg(a),f=C(t,{});t.look!==`handDrawn`&&(f.roughness=0,f.fillStyle=`solid`);let p=[{x:-s/2,y:-c/2},{x:s/2-l,y:-c/2},...A(-s/2+l,0,l,50,90,270),{x:s/2-l,y:c/2},{x:-s/2,y:c/2}],m=O(p),h=d.path(m,f),g=a.insert(()=>h,`:first-child`);return g.attr(`class`,`basic label-container`),u&&t.look!==`handDrawn`&&g.selectChildren(`path`).attr(`style`,u),i&&t.look!==`handDrawn`&&g.selectChildren(`path`).attr(`style`,i),E(t,g),t.intersect=function(e){return n.info(`Pill intersect`,t,{radius:l,point:e}),J.polygon(t,p,e)},a}e(Nt,`halfRoundedRectangle`);async function Pt(e,t){let{labelStyles:n,nodeStyles:r}=S(t);t.labelStyle=n;let{shapeSvg:i,bbox:a}=await w(e,t,D(t)),o=a.height+(t.padding??0),s=a.width+(t.padding??0)*2.5,{cssStyles:c}=t,l=K.svg(i),u=C(t,{});t.look!==`handDrawn`&&(u.roughness=0,u.fillStyle=`solid`);let d=s/2,f=d/6;d+=f;let p=o/2,m=p/2,h=d-m,g=[{x:-h,y:-p},{x:0,y:-p},{x:h,y:-p},{x:d,y:0},{x:h,y:p},{x:0,y:p},{x:-h,y:p},{x:-d,y:0}],_=O(g),v=l.path(_,u),y=i.insert(()=>v,`:first-child`);return y.attr(`class`,`basic label-container`),c&&t.look!==`handDrawn`&&y.selectChildren(`path`).attr(`style`,c),r&&t.look!==`handDrawn`&&y.selectChildren(`path`).attr(`style`,r),t.width=s,t.height=o,E(t,y),t.intersect=function(e){return J.polygon(t,g,e)},i}e(Pt,`hexagon`);async function Ft(e,t){let{labelStyles:r,nodeStyles:i}=S(t);t.label=``,t.labelStyle=r;let{shapeSvg:a}=await w(e,t,D(t)),o=Math.max(30,t?.width??0),s=Math.max(30,t?.height??0),{cssStyles:c}=t,l=K.svg(a),u=C(t,{});t.look!==`handDrawn`&&(u.roughness=0,u.fillStyle=`solid`);let d=[{x:0,y:0},{x:o,y:0},{x:0,y:s},{x:o,y:s}],f=O(d),p=l.path(f,u),m=a.insert(()=>p,`:first-child`);return m.attr(`class`,`basic label-container`),c&&t.look!==`handDrawn`&&m.selectChildren(`path`).attr(`style`,c),i&&t.look!==`handDrawn`&&m.selectChildren(`path`).attr(`style`,i),m.attr(`transform`,`translate(${-o/2}, ${-s/2})`),E(t,m),t.intersect=function(e){return n.info(`Pill intersect`,t,{points:d}),J.polygon(t,d,e)},a}e(Ft,`hourglass`);async function It(e,t,{config:{themeVariables:r,flowchart:i}}){let{labelStyles:a}=S(t);t.labelStyle=a;let o=t.assetHeight??48,s=t.assetWidth??48,c=Math.max(o,s),l=i?.wrappingWidth;t.width=Math.max(c,l??0);let{shapeSvg:u,bbox:d,label:f}=await w(e,t,`icon-shape default`),p=t.pos===`t`,m=c,h=c,{nodeBorder:g}=r,{stylesMap:_}=x(t),y=-h/2,b=-m/2,T=t.label?8:0,D=K.svg(u),O=C(t,{stroke:`none`,fill:`none`});t.look!==`handDrawn`&&(O.roughness=0,O.fillStyle=`solid`);let k=D.rectangle(y,b,h,m,O),A=Math.max(h,d.width),j=m+d.height+T,M=D.rectangle(-A/2,-j/2,A,j,{...O,fill:`transparent`,stroke:`none`}),N=u.insert(()=>k,`:first-child`),P=u.insert(()=>M);if(t.icon){let e=u.append(`g`);e.html(`<g>${await v(t.icon,{height:c,width:c,fallbackPrefix:``})}</g>`);let n=e.node().getBBox(),r=n.width,i=n.height,a=n.x,o=n.y;e.attr(`transform`,`translate(${-r/2-a},${p?d.height/2+T/2-i/2-o:-d.height/2-T/2-i/2-o})`),e.attr(`style`,`color: ${_.get(`stroke`)??g};`)}return f.attr(`transform`,`translate(${-d.width/2-(d.x-(d.left??0))},${p?-j/2:j/2-d.height})`),N.attr(`transform`,`translate(0,${p?d.height/2+T/2:-d.height/2-T/2})`),E(t,P),t.intersect=function(e){if(n.info(`iconSquare intersect`,t,e),!t.label)return J.rect(t,e);let r=t.x??0,i=t.y??0,a=t.height??0,o=[];return o=p?[{x:r-d.width/2,y:i-a/2},{x:r+d.width/2,y:i-a/2},{x:r+d.width/2,y:i-a/2+d.height+T},{x:r+h/2,y:i-a/2+d.height+T},{x:r+h/2,y:i+a/2},{x:r-h/2,y:i+a/2},{x:r-h/2,y:i-a/2+d.height+T},{x:r-d.width/2,y:i-a/2+d.height+T}]:[{x:r-h/2,y:i-a/2},{x:r+h/2,y:i-a/2},{x:r+h/2,y:i-a/2+m},{x:r+d.width/2,y:i-a/2+m},{x:r+d.width/2/2,y:i+a/2},{x:r-d.width/2,y:i+a/2},{x:r-d.width/2,y:i-a/2+m},{x:r-h/2,y:i-a/2+m}],J.polygon(t,o,e)},u}e(It,`icon`);async function Lt(e,t,{config:{themeVariables:r,flowchart:i}}){let{labelStyles:a}=S(t);t.labelStyle=a;let o=t.assetHeight??48,s=t.assetWidth??48,c=Math.max(o,s),l=i?.wrappingWidth;t.width=Math.max(c,l??0);let{shapeSvg:u,bbox:d,label:f}=await w(e,t,`icon-shape default`),p=t.label?8:0,m=t.pos===`t`,{nodeBorder:h,mainBkg:g}=r,{stylesMap:_}=x(t),y=K.svg(u),b=C(t,{});t.look!==`handDrawn`&&(b.roughness=0,b.fillStyle=`solid`),b.stroke=_.get(`fill`)??g;let T=u.append(`g`);t.icon&&T.html(`<g>${await v(t.icon,{height:c,width:c,fallbackPrefix:``})}</g>`);let D=T.node().getBBox(),O=D.width,k=D.height,A=D.x,j=D.y,M=Math.max(O,k)*Math.SQRT2+40,N=y.circle(0,0,M,b),P=Math.max(M,d.width),F=M+d.height+p,I=y.rectangle(-P/2,-F/2,P,F,{...b,fill:`transparent`,stroke:`none`}),L=u.insert(()=>N,`:first-child`),R=u.insert(()=>I);return T.attr(`transform`,`translate(${-O/2-A},${m?d.height/2+p/2-k/2-j:-d.height/2-p/2-k/2-j})`),T.attr(`style`,`color: ${_.get(`stroke`)??h};`),f.attr(`transform`,`translate(${-d.width/2-(d.x-(d.left??0))},${m?-F/2:F/2-d.height})`),L.attr(`transform`,`translate(0,${m?d.height/2+p/2:-d.height/2-p/2})`),E(t,R),t.intersect=function(e){return n.info(`iconSquare intersect`,t,e),J.rect(t,e)},u}e(Lt,`iconCircle`);async function Rt(e,t,{config:{themeVariables:r,flowchart:i}}){let{labelStyles:a}=S(t);t.labelStyle=a;let o=t.assetHeight??48,s=t.assetWidth??48,c=Math.max(o,s),l=i?.wrappingWidth;t.width=Math.max(c,l??0);let{shapeSvg:u,bbox:d,halfPadding:f,label:p}=await w(e,t,`icon-shape default`),m=t.pos===`t`,h=c+f*2,g=c+f*2,{nodeBorder:_,mainBkg:y}=r,{stylesMap:b}=x(t),T=-g/2,D=-h/2,O=t.label?8:0,k=K.svg(u),A=C(t,{});t.look!==`handDrawn`&&(A.roughness=0,A.fillStyle=`solid`),A.stroke=b.get(`fill`)??y;let j=k.path(q(T,D,g,h,5),A),M=Math.max(g,d.width),N=h+d.height+O,P=k.rectangle(-M/2,-N/2,M,N,{...A,fill:`transparent`,stroke:`none`}),F=u.insert(()=>j,`:first-child`).attr(`class`,`icon-shape2`),I=u.insert(()=>P);if(t.icon){let e=u.append(`g`);e.html(`<g>${await v(t.icon,{height:c,width:c,fallbackPrefix:``})}</g>`);let n=e.node().getBBox(),r=n.width,i=n.height,a=n.x,o=n.y;e.attr(`transform`,`translate(${-r/2-a},${m?d.height/2+O/2-i/2-o:-d.height/2-O/2-i/2-o})`),e.attr(`style`,`color: ${b.get(`stroke`)??_};`)}return p.attr(`transform`,`translate(${-d.width/2-(d.x-(d.left??0))},${m?-N/2:N/2-d.height})`),F.attr(`transform`,`translate(0,${m?d.height/2+O/2:-d.height/2-O/2})`),E(t,I),t.intersect=function(e){if(n.info(`iconSquare intersect`,t,e),!t.label)return J.rect(t,e);let r=t.x??0,i=t.y??0,a=t.height??0,o=[];return o=m?[{x:r-d.width/2,y:i-a/2},{x:r+d.width/2,y:i-a/2},{x:r+d.width/2,y:i-a/2+d.height+O},{x:r+g/2,y:i-a/2+d.height+O},{x:r+g/2,y:i+a/2},{x:r-g/2,y:i+a/2},{x:r-g/2,y:i-a/2+d.height+O},{x:r-d.width/2,y:i-a/2+d.height+O}]:[{x:r-g/2,y:i-a/2},{x:r+g/2,y:i-a/2},{x:r+g/2,y:i-a/2+h},{x:r+d.width/2,y:i-a/2+h},{x:r+d.width/2/2,y:i+a/2},{x:r-d.width/2,y:i+a/2},{x:r-d.width/2,y:i-a/2+h},{x:r-g/2,y:i-a/2+h}],J.polygon(t,o,e)},u}e(Rt,`iconRounded`);async function zt(e,t,{config:{themeVariables:r,flowchart:i}}){let{labelStyles:a}=S(t);t.labelStyle=a;let o=t.assetHeight??48,s=t.assetWidth??48,c=Math.max(o,s),l=i?.wrappingWidth;t.width=Math.max(c,l??0);let{shapeSvg:u,bbox:d,halfPadding:f,label:p}=await w(e,t,`icon-shape default`),m=t.pos===`t`,h=c+f*2,g=c+f*2,{nodeBorder:_,mainBkg:y}=r,{stylesMap:b}=x(t),T=-g/2,D=-h/2,O=t.label?8:0,k=K.svg(u),A=C(t,{});t.look!==`handDrawn`&&(A.roughness=0,A.fillStyle=`solid`),A.stroke=b.get(`fill`)??y;let j=k.path(q(T,D,g,h,.1),A),M=Math.max(g,d.width),N=h+d.height+O,P=k.rectangle(-M/2,-N/2,M,N,{...A,fill:`transparent`,stroke:`none`}),F=u.insert(()=>j,`:first-child`),I=u.insert(()=>P);if(t.icon){let e=u.append(`g`);e.html(`<g>${await v(t.icon,{height:c,width:c,fallbackPrefix:``})}</g>`);let n=e.node().getBBox(),r=n.width,i=n.height,a=n.x,o=n.y;e.attr(`transform`,`translate(${-r/2-a},${m?d.height/2+O/2-i/2-o:-d.height/2-O/2-i/2-o})`),e.attr(`style`,`color: ${b.get(`stroke`)??_};`)}return p.attr(`transform`,`translate(${-d.width/2-(d.x-(d.left??0))},${m?-N/2:N/2-d.height})`),F.attr(`transform`,`translate(0,${m?d.height/2+O/2:-d.height/2-O/2})`),E(t,I),t.intersect=function(e){if(n.info(`iconSquare intersect`,t,e),!t.label)return J.rect(t,e);let r=t.x??0,i=t.y??0,a=t.height??0,o=[];return o=m?[{x:r-d.width/2,y:i-a/2},{x:r+d.width/2,y:i-a/2},{x:r+d.width/2,y:i-a/2+d.height+O},{x:r+g/2,y:i-a/2+d.height+O},{x:r+g/2,y:i+a/2},{x:r-g/2,y:i+a/2},{x:r-g/2,y:i-a/2+d.height+O},{x:r-d.width/2,y:i-a/2+d.height+O}]:[{x:r-g/2,y:i-a/2},{x:r+g/2,y:i-a/2},{x:r+g/2,y:i-a/2+h},{x:r+d.width/2,y:i-a/2+h},{x:r+d.width/2/2,y:i+a/2},{x:r-d.width/2,y:i+a/2},{x:r-d.width/2,y:i-a/2+h},{x:r-g/2,y:i-a/2+h}],J.polygon(t,o,e)},u}e(zt,`iconSquare`);async function Bt(e,t,{config:{flowchart:r}}){let i=new Image;i.src=t?.img??``,await i.decode();let a=Number(i.naturalWidth.toString().replace(`px`,``)),o=Number(i.naturalHeight.toString().replace(`px`,``));t.imageAspectRatio=a/o;let{labelStyles:s}=S(t);t.labelStyle=s;let c=r?.wrappingWidth;t.defaultWidth=r?.wrappingWidth;let l=Math.max(t.label?c??0:0,t?.assetWidth??a),u=t.constraint===`on`&&t?.assetHeight?t.assetHeight*t.imageAspectRatio:l,d=t.constraint===`on`?u/t.imageAspectRatio:t?.assetHeight??o;t.width=Math.max(u,c??0);let{shapeSvg:f,bbox:p,label:m}=await w(e,t,`image-shape default`),h=t.pos===`t`,g=-u/2,_=-d/2,v=t.label?8:0,y=K.svg(f),b=C(t,{});t.look!==`handDrawn`&&(b.roughness=0,b.fillStyle=`solid`);let x=y.rectangle(g,_,u,d,b),T=Math.max(u,p.width),D=d+p.height+v,O=y.rectangle(-T/2,-D/2,T,D,{...b,fill:`none`,stroke:`none`}),k=f.insert(()=>x,`:first-child`),A=f.insert(()=>O);if(t.img){let e=f.append(`image`);e.attr(`href`,t.img),e.attr(`width`,u),e.attr(`height`,d),e.attr(`preserveAspectRatio`,`none`),e.attr(`transform`,`translate(${-u/2},${h?D/2-d:-D/2})`)}return m.attr(`transform`,`translate(${-p.width/2-(p.x-(p.left??0))},${h?-d/2-p.height/2-v/2:d/2-p.height/2+v/2})`),k.attr(`transform`,`translate(0,${h?p.height/2+v/2:-p.height/2-v/2})`),E(t,A),t.intersect=function(e){if(n.info(`iconSquare intersect`,t,e),!t.label)return J.rect(t,e);let r=t.x??0,i=t.y??0,a=t.height??0,o=[];return o=h?[{x:r-p.width/2,y:i-a/2},{x:r+p.width/2,y:i-a/2},{x:r+p.width/2,y:i-a/2+p.height+v},{x:r+u/2,y:i-a/2+p.height+v},{x:r+u/2,y:i+a/2},{x:r-u/2,y:i+a/2},{x:r-u/2,y:i-a/2+p.height+v},{x:r-p.width/2,y:i-a/2+p.height+v}]:[{x:r-u/2,y:i-a/2},{x:r+u/2,y:i-a/2},{x:r+u/2,y:i-a/2+d},{x:r+p.width/2,y:i-a/2+d},{x:r+p.width/2/2,y:i+a/2},{x:r-p.width/2,y:i+a/2},{x:r-p.width/2,y:i-a/2+d},{x:r-u/2,y:i-a/2+d}],J.polygon(t,o,e)},f}e(Bt,`imageSquare`);async function Vt(e,t){let{labelStyles:n,nodeStyles:r}=S(t);t.labelStyle=n;let{shapeSvg:i,bbox:a}=await w(e,t,D(t)),o=Math.max(a.width+(t.padding??0)*2,t?.width??0),s=Math.max(a.height+(t.padding??0)*2,t?.height??0),c=[{x:0,y:0},{x:o,y:0},{x:o+3*s/6,y:-s},{x:-3*s/6,y:-s}],l,{cssStyles:u}=t;if(t.look===`handDrawn`){let e=K.svg(i),n=C(t,{}),r=O(c),a=e.path(r,n);l=i.insert(()=>a,`:first-child`).attr(`transform`,`translate(${-o/2}, ${s/2})`),u&&l.attr(`style`,u)}else l=Y(i,o,s,c);return r&&l.attr(`style`,r),t.width=o,t.height=s,E(t,l),t.intersect=function(e){return J.polygon(t,c,e)},i}e(Vt,`inv_trapezoid`);async function Ht(e,t,n){let{labelStyles:r,nodeStyles:i}=S(t);t.labelStyle=r;let{shapeSvg:a,bbox:o}=await w(e,t,D(t)),s=Math.max(o.width+n.labelPaddingX*2,t?.width||0),c=Math.max(o.height+n.labelPaddingY*2,t?.height||0),l=-s/2,u=-c/2,d,{rx:f,ry:p}=t,{cssStyles:h}=t;if(n?.rx&&n.ry&&(f=n.rx,p=n.ry),t.look===`handDrawn`){let e=K.svg(a),n=C(t,{}),r=f||p?e.path(q(l,u,s,c,f||0),n):e.rectangle(l,u,s,c,n);d=a.insert(()=>r,`:first-child`),d.attr(`class`,`basic label-container`).attr(`style`,m(h))}else d=a.insert(`rect`,`:first-child`),d.attr(`class`,`basic label-container`).attr(`style`,i).attr(`rx`,m(f)).attr(`ry`,m(p)).attr(`x`,l).attr(`y`,u).attr(`width`,s).attr(`height`,c);return E(t,d),t.calcIntersect=function(e,t){return J.rect(e,t)},t.intersect=function(e){return J.rect(t,e)},a}e(Ht,`drawRect`);async function Ut(e,t){let{shapeSvg:n,bbox:r,label:i}=await w(e,t,`label`),a=n.insert(`rect`,`:first-child`);return a.attr(`width`,.1).attr(`height`,.1),n.attr(`class`,`label edgeLabel`),i.attr(`transform`,`translate(${-(r.width/2)-(r.x-(r.left??0))}, ${-(r.height/2)-(r.y-(r.top??0))})`),E(t,a),t.intersect=function(e){return J.rect(t,e)},n}e(Ut,`labelRect`);async function Wt(e,t){let{labelStyles:n,nodeStyles:r}=S(t);t.labelStyle=n;let{shapeSvg:i,bbox:a}=await w(e,t,D(t)),o=Math.max(a.width+(t.padding??0),t?.width??0),s=Math.max(a.height+(t.padding??0),t?.height??0),c=[{x:0,y:0},{x:o+3*s/6,y:0},{x:o,y:-s},{x:-(3*s)/6,y:-s}],l,{cssStyles:u}=t;if(t.look===`handDrawn`){let e=K.svg(i),n=C(t,{}),r=O(c),a=e.path(r,n);l=i.insert(()=>a,`:first-child`).attr(`transform`,`translate(${-o/2}, ${s/2})`),u&&l.attr(`style`,u)}else l=Y(i,o,s,c);return r&&l.attr(`style`,r),t.width=o,t.height=s,E(t,l),t.intersect=function(e){return J.polygon(t,c,e)},i}e(Wt,`lean_left`);async function Gt(e,t){let{labelStyles:n,nodeStyles:r}=S(t);t.labelStyle=n;let{shapeSvg:i,bbox:a}=await w(e,t,D(t)),o=Math.max(a.width+(t.padding??0),t?.width??0),s=Math.max(a.height+(t.padding??0),t?.height??0),c=[{x:-3*s/6,y:0},{x:o,y:0},{x:o+3*s/6,y:-s},{x:0,y:-s}],l,{cssStyles:u}=t;if(t.look===`handDrawn`){let e=K.svg(i),n=C(t,{}),r=O(c),a=e.path(r,n);l=i.insert(()=>a,`:first-child`).attr(`transform`,`translate(${-o/2}, ${s/2})`),u&&l.attr(`style`,u)}else l=Y(i,o,s,c);return r&&l.attr(`style`,r),t.width=o,t.height=s,E(t,l),t.intersect=function(e){return J.polygon(t,c,e)},i}e(Gt,`lean_right`);function Kt(e,t){let{labelStyles:r,nodeStyles:i}=S(t);t.label=``,t.labelStyle=r;let a=e.insert(`g`).attr(`class`,D(t)).attr(`id`,t.domId??t.id),{cssStyles:o}=t,s=Math.max(35,t?.width??0),c=Math.max(35,t?.height??0),l=[{x:s,y:0},{x:0,y:c+7/2},{x:s-14,y:c+7/2},{x:0,y:2*c},{x:s,y:c-7/2},{x:14,y:c-7/2}],u=K.svg(a),d=C(t,{});t.look!==`handDrawn`&&(d.roughness=0,d.fillStyle=`solid`);let f=O(l),p=u.path(f,d),m=a.insert(()=>p,`:first-child`);return o&&t.look!==`handDrawn`&&m.selectAll(`path`).attr(`style`,o),i&&t.look!==`handDrawn`&&m.selectAll(`path`).attr(`style`,i),m.attr(`transform`,`translate(-${s/2},${-c})`),E(t,m),t.intersect=function(e){return n.info(`lightningBolt intersect`,t,e),J.polygon(t,l,e)},a}e(Kt,`lightningBolt`);var qt=e((e,t,n,r,i,a,o)=>[`M${e},${t+a}`,`a${i},${a} 0,0,0 ${n},0`,`a${i},${a} 0,0,0 ${-n},0`,`l0,${r}`,`a${i},${a} 0,0,0 ${n},0`,`l0,${-r}`,`M${e},${t+a+o}`,`a${i},${a} 0,0,0 ${n},0`].join(` `),`createCylinderPathD`),Jt=e((e,t,n,r,i,a,o)=>[`M${e},${t+a}`,`M${e+n},${t+a}`,`a${i},${a} 0,0,0 ${-n},0`,`l0,${r}`,`a${i},${a} 0,0,0 ${n},0`,`l0,${-r}`,`M${e},${t+a+o}`,`a${i},${a} 0,0,0 ${n},0`].join(` `),`createOuterCylinderPathD`),Yt=e((e,t,n,r,i,a)=>[`M${e-n/2},${-r/2}`,`a${i},${a} 0,0,0 ${n},0`].join(` `),`createInnerCylinderPathD`);async function Xt(e,t){let{labelStyles:n,nodeStyles:r}=S(t);t.labelStyle=n;let{shapeSvg:i,bbox:a,label:o}=await w(e,t,D(t)),s=Math.max(a.width+(t.padding??0),t.width??0),c=s/2,l=c/(2.5+s/50),u=Math.max(a.height+l+(t.padding??0),t.height??0),d=u*.1,f,{cssStyles:p}=t;if(t.look===`handDrawn`){let e=K.svg(i),n=Jt(0,0,s,u,c,l,d),r=Yt(0,l,s,u,c,l),a=C(t,{}),o=e.path(n,a),m=e.path(r,a);i.insert(()=>m,`:first-child`).attr(`class`,`line`),f=i.insert(()=>o,`:first-child`),f.attr(`class`,`basic label-container`),p&&f.attr(`style`,p)}else{let e=qt(0,0,s,u,c,l,d);f=i.insert(`path`,`:first-child`).attr(`d`,e).attr(`class`,`basic label-container`).attr(`style`,m(p)).attr(`style`,r)}return f.attr(`label-offset-y`,l),f.attr(`transform`,`translate(${-s/2}, ${-(u/2+l)})`),E(t,f),o.attr(`transform`,`translate(${-(a.width/2)-(a.x-(a.left??0))}, ${-(a.height/2)+l-(a.y-(a.top??0))})`),t.intersect=function(e){let n=J.rect(t,e),r=n.x-(t.x??0);if(c!=0&&(Math.abs(r)<(t.width??0)/2||Math.abs(r)==(t.width??0)/2&&Math.abs(n.y-(t.y??0))>(t.height??0)/2-l)){let i=l*l*(1-r*r/(c*c));i>0&&(i=Math.sqrt(i)),i=l-i,e.y-(t.y??0)>0&&(i=-i),n.y+=i}return n},i}e(Xt,`linedCylinder`);async function Zt(e,t){let{labelStyles:n,nodeStyles:r}=S(t);t.labelStyle=n;let{shapeSvg:i,bbox:a,label:o}=await w(e,t,D(t)),s=Math.max(a.width+(t.padding??0)*2,t?.width??0),c=Math.max(a.height+(t.padding??0)*2,t?.height??0),l=c/4,u=c+l,{cssStyles:d}=t,f=K.svg(i),p=C(t,{});t.look!==`handDrawn`&&(p.roughness=0,p.fillStyle=`solid`);let m=[{x:-s/2-s/2*.1,y:-u/2},{x:-s/2-s/2*.1,y:u/2},...k(-s/2-s/2*.1,u/2,s/2+s/2*.1,u/2,l,.8),{x:s/2+s/2*.1,y:-u/2},{x:-s/2-s/2*.1,y:-u/2},{x:-s/2,y:-u/2},{x:-s/2,y:u/2*1.1},{x:-s/2,y:-u/2}],h=f.polygon(m.map(e=>[e.x,e.y]),p),g=i.insert(()=>h,`:first-child`);return g.attr(`class`,`basic label-container`),d&&t.look!==`handDrawn`&&g.selectAll(`path`).attr(`style`,d),r&&t.look!==`handDrawn`&&g.selectAll(`path`).attr(`style`,r),g.attr(`transform`,`translate(0,${-l/2})`),o.attr(`transform`,`translate(${-s/2+(t.padding??0)+s/2*.1/2-(a.x-(a.left??0))},${-c/2+(t.padding??0)-l/2-(a.y-(a.top??0))})`),E(t,g),t.intersect=function(e){return J.polygon(t,m,e)},i}e(Zt,`linedWaveEdgedRect`);async function Qt(e,t){let{labelStyles:n,nodeStyles:r}=S(t);t.labelStyle=n;let{shapeSvg:i,bbox:a,label:o}=await w(e,t,D(t)),s=Math.max(a.width+(t.padding??0)*2,t?.width??0),c=Math.max(a.height+(t.padding??0)*2,t?.height??0),l=-s/2,u=-c/2,{cssStyles:d}=t,f=K.svg(i),p=C(t,{}),m=[{x:l-5,y:u+5},{x:l-5,y:u+c+5},{x:l+s-5,y:u+c+5},{x:l+s-5,y:u+c},{x:l+s,y:u+c},{x:l+s,y:u+c-5},{x:l+s+5,y:u+c-5},{x:l+s+5,y:u-5},{x:l+5,y:u-5},{x:l+5,y:u},{x:l,y:u},{x:l,y:u+5}],h=[{x:l,y:u+5},{x:l+s-5,y:u+5},{x:l+s-5,y:u+c},{x:l+s,y:u+c},{x:l+s,y:u},{x:l,y:u}];t.look!==`handDrawn`&&(p.roughness=0,p.fillStyle=`solid`);let g=O(m),_=f.path(g,p),v=O(h),y=f.path(v,{...p,fill:`none`}),b=i.insert(()=>y,`:first-child`);return b.insert(()=>_,`:first-child`),b.attr(`class`,`basic label-container`),d&&t.look!==`handDrawn`&&b.selectAll(`path`).attr(`style`,d),r&&t.look!==`handDrawn`&&b.selectAll(`path`).attr(`style`,r),o.attr(`transform`,`translate(${-(a.width/2)-5-(a.x-(a.left??0))}, ${-(a.height/2)+5-(a.y-(a.top??0))})`),E(t,b),t.intersect=function(e){return J.polygon(t,m,e)},i}e(Qt,`multiRect`);async function $t(e,t){let{labelStyles:n,nodeStyles:r}=S(t);t.labelStyle=n;let{shapeSvg:i,bbox:a,label:o}=await w(e,t,D(t)),s=Math.max(a.width+(t.padding??0)*2,t?.width??0),c=Math.max(a.height+(t.padding??0)*2,t?.height??0),l=c/4,u=c+l,d=-s/2,f=-u/2,{cssStyles:p}=t,m=k(d-5,f+u+5,d+s-5,f+u+5,l,.8),h=m?.[m.length-1],g=[{x:d-5,y:f+5},{x:d-5,y:f+u+5},...m,{x:d+s-5,y:h.y-5},{x:d+s,y:h.y-5},{x:d+s,y:h.y-10},{x:d+s+5,y:h.y-10},{x:d+s+5,y:f-5},{x:d+5,y:f-5},{x:d+5,y:f},{x:d,y:f},{x:d,y:f+5}],_=[{x:d,y:f+5},{x:d+s-5,y:f+5},{x:d+s-5,y:h.y-5},{x:d+s,y:h.y-5},{x:d+s,y:f},{x:d,y:f}],v=K.svg(i),y=C(t,{});t.look!==`handDrawn`&&(y.roughness=0,y.fillStyle=`solid`);let b=O(g),x=v.path(b,y),T=O(_),A=v.path(T,y),j=i.insert(()=>x,`:first-child`);return j.insert(()=>A),j.attr(`class`,`basic label-container`),p&&t.look!==`handDrawn`&&j.selectAll(`path`).attr(`style`,p),r&&t.look!==`handDrawn`&&j.selectAll(`path`).attr(`style`,r),j.attr(`transform`,`translate(0,${-l/2})`),o.attr(`transform`,`translate(${-(a.width/2)-5-(a.x-(a.left??0))}, ${-(a.height/2)+5-l/2-(a.y-(a.top??0))})`),E(t,j),t.intersect=function(e){return J.polygon(t,g,e)},i}e($t,`multiWaveEdgedRectangle`);async function en(e,t,{config:{themeVariables:n}}){let{labelStyles:r,nodeStyles:i}=S(t);t.labelStyle=r,t.useHtmlLabels||f().flowchart?.htmlLabels!==!1||(t.centerLabel=!0);let{shapeSvg:a,bbox:o,label:s}=await w(e,t,D(t)),c=Math.max(o.width+(t.padding??0)*2,t?.width??0),l=Math.max(o.height+(t.padding??0)*2,t?.height??0),u=-c/2,d=-l/2,{cssStyles:p}=t,m=K.svg(a),h=C(t,{fill:n.noteBkgColor,stroke:n.noteBorderColor});t.look!==`handDrawn`&&(h.roughness=0,h.fillStyle=`solid`);let g=m.rectangle(u,d,c,l,h),_=a.insert(()=>g,`:first-child`);return _.attr(`class`,`basic label-container`),p&&t.look!==`handDrawn`&&_.selectAll(`path`).attr(`style`,p),i&&t.look!==`handDrawn`&&_.selectAll(`path`).attr(`style`,i),s.attr(`transform`,`translate(${-o.width/2-(o.x-(o.left??0))}, ${-(o.height/2)-(o.y-(o.top??0))})`),E(t,_),t.intersect=function(e){return J.rect(t,e)},a}e(en,`note`);var tn=e((e,t,n)=>[`M${e+n/2},${t}`,`L${e+n},${t-n/2}`,`L${e+n/2},${t-n}`,`L${e},${t-n/2}`,`Z`].join(` `),`createDecisionBoxPathD`);async function nn(e,t){let{labelStyles:n,nodeStyles:r}=S(t);t.labelStyle=n;let{shapeSvg:i,bbox:a}=await w(e,t,D(t)),o=a.width+t.padding+(a.height+t.padding),s=.5,c=[{x:o/2,y:0},{x:o,y:-o/2},{x:o/2,y:-o},{x:0,y:-o/2}],l,{cssStyles:u}=t;if(t.look===`handDrawn`){let e=K.svg(i),n=C(t,{}),r=tn(0,0,o),a=e.path(r,n);l=i.insert(()=>a,`:first-child`).attr(`transform`,`translate(${-o/2+s}, ${o/2})`),u&&l.attr(`style`,u)}else l=Y(i,o,o,c),l.attr(`transform`,`translate(${-o/2+s}, ${o/2})`);return r&&l.attr(`style`,r),E(t,l),t.calcIntersect=function(e,t){let n=e.width,r=[{x:n/2,y:0},{x:n,y:-n/2},{x:n/2,y:-n},{x:0,y:-n/2}],i=J.polygon(e,r,t);return{x:i.x-.5,y:i.y-.5}},t.intersect=function(e){return this.calcIntersect(t,e)},i}e(nn,`question`);async function rn(e,t){let{labelStyles:n,nodeStyles:r}=S(t);t.labelStyle=n;let{shapeSvg:i,bbox:a,label:o}=await w(e,t,D(t)),s=Math.max(a.width+(t.padding??0),t?.width??0),c=Math.max(a.height+(t.padding??0),t?.height??0),l=-s/2,u=-c/2,d=u/2,f=[{x:l+d,y:u},{x:l,y:0},{x:l+d,y:-u},{x:-l,y:-u},{x:-l,y:u}],{cssStyles:p}=t,m=K.svg(i),h=C(t,{});t.look!==`handDrawn`&&(h.roughness=0,h.fillStyle=`solid`);let g=O(f),_=m.path(g,h),v=i.insert(()=>_,`:first-child`);return v.attr(`class`,`basic label-container`),p&&t.look!==`handDrawn`&&v.selectAll(`path`).attr(`style`,p),r&&t.look!==`handDrawn`&&v.selectAll(`path`).attr(`style`,r),v.attr(`transform`,`translate(${-d/2},0)`),o.attr(`transform`,`translate(${-d/2-a.width/2-(a.x-(a.left??0))}, ${-(a.height/2)-(a.y-(a.top??0))})`),E(t,v),t.intersect=function(e){return J.polygon(t,f,e)},i}e(rn,`rect_left_inv_arrow`);async function an(e,r){let{labelStyles:i,nodeStyles:a}=S(r);r.labelStyle=i;let s;s=r.cssClasses?`node `+r.cssClasses:`node default`;let c=e.insert(`g`).attr(`class`,s).attr(`id`,r.domId||r.id),l=c.insert(`g`),d=c.insert(`g`).attr(`class`,`label`).attr(`style`,a),f=r.description,p=r.label,m=d.node().appendChild(await qe(p,r.labelStyle,!0,!0)),h={width:0,height:0};if(u(o()?.flowchart?.htmlLabels)){let e=m.children[0],n=t(m);h=e.getBoundingClientRect(),n.attr(`width`,h.width),n.attr(`height`,h.height)}n.info(`Text 2`,f);let g=f||[],_=m.getBBox(),v=d.node().appendChild(await qe(g.join?g.join(`<br/>`):g,r.labelStyle,!0,!0)),y=v.children[0],b=t(v);h=y.getBoundingClientRect(),b.attr(`width`,h.width),b.attr(`height`,h.height);let x=(r.padding||0)/2;t(v).attr(`transform`,`translate( `+(h.width>_.width?0:(_.width-h.width)/2)+`, `+(_.height+x+5)+`)`),t(m).attr(`transform`,`translate( `+(h.width<_.width?0:-(_.width-h.width)/2)+`, 0)`),h=d.node().getBBox(),d.attr(`transform`,`translate(`+-h.width/2+`, `+(-h.height/2-x+3)+`)`);let w=h.width+(r.padding||0),T=h.height+(r.padding||0),D=-h.width/2-x,O=-h.height/2-x,k,A;if(r.look===`handDrawn`){let e=K.svg(c),t=C(r,{}),i=e.path(q(D,O,w,T,r.rx||0),t),a=e.line(-h.width/2-x,-h.height/2-x+_.height+x,h.width/2+x,-h.height/2-x+_.height+x,t);A=c.insert(()=>(n.debug(`Rough node insert CXC`,i),a),`:first-child`),k=c.insert(()=>(n.debug(`Rough node insert CXC`,i),i),`:first-child`)}else k=l.insert(`rect`,`:first-child`),A=l.insert(`line`),k.attr(`class`,`outer title-state`).attr(`style`,a).attr(`x`,-h.width/2-x).attr(`y`,-h.height/2-x).attr(`width`,h.width+(r.padding||0)).attr(`height`,h.height+(r.padding||0)),A.attr(`class`,`divider`).attr(`x1`,-h.width/2-x).attr(`x2`,h.width/2+x).attr(`y1`,-h.height/2-x+_.height+x).attr(`y2`,-h.height/2-x+_.height+x);return E(r,k),r.intersect=function(e){return J.rect(r,e)},c}e(an,`rectWithTitle`);function on(e,t,n,r,i,a,o){let s=(e+n)/2,c=(t+r)/2,l=Math.atan2(r-t,n-e),u=(n-e)/2,d=(r-t)/2,f=u/i,p=d/a,m=Math.sqrt(f**2+p**2);if(m>1)throw Error(`The given radii are too small to create an arc between the points.`);let h=Math.sqrt(1-m**2),g=s+h*a*Math.sin(l)*(o?-1:1),_=c-h*i*Math.cos(l)*(o?-1:1),v=Math.atan2((t-_)/a,(e-g)/i),y=Math.atan2((r-_)/a,(n-g)/i)-v;o&&y<0&&(y+=2*Math.PI),!o&&y>0&&(y-=2*Math.PI);let b=[];for(let e=0;e<20;e++){let t=v+e/19*y,n=g+i*Math.cos(t),r=_+a*Math.sin(t);b.push({x:n,y:r})}return b}e(on,`generateArcPoints`);async function sn(e,t){let{labelStyles:n,nodeStyles:r}=S(t);t.labelStyle=n;let{shapeSvg:i,bbox:a}=await w(e,t,D(t)),o=t?.padding??0,s=t?.padding??0,c=(t?.width?t?.width:a.width)+o*2,l=(t?.height?t?.height:a.height)+s*2,u=t.radius||5,d=t.taper||5,{cssStyles:f}=t,p=K.svg(i),m=C(t,{});t.stroke&&(m.stroke=t.stroke),t.look!==`handDrawn`&&(m.roughness=0,m.fillStyle=`solid`);let h=[{x:-c/2+d,y:-l/2},{x:c/2-d,y:-l/2},...on(c/2-d,-l/2,c/2,-l/2+d,u,u,!0),{x:c/2,y:-l/2+d},{x:c/2,y:l/2-d},...on(c/2,l/2-d,c/2-d,l/2,u,u,!0),{x:c/2-d,y:l/2},{x:-c/2+d,y:l/2},...on(-c/2+d,l/2,-c/2,l/2-d,u,u,!0),{x:-c/2,y:l/2-d},{x:-c/2,y:-l/2+d},...on(-c/2,-l/2+d,-c/2+d,-l/2,u,u,!0)],g=O(h),_=p.path(g,m),v=i.insert(()=>_,`:first-child`);return v.attr(`class`,`basic label-container outer-path`),f&&t.look!==`handDrawn`&&v.selectChildren(`path`).attr(`style`,f),r&&t.look!==`handDrawn`&&v.selectChildren(`path`).attr(`style`,r),E(t,v),t.intersect=function(e){return J.polygon(t,h,e)},i}e(sn,`roundedRect`);async function cn(e,t){let{labelStyles:n,nodeStyles:r}=S(t);t.labelStyle=n;let{shapeSvg:i,bbox:a,label:o}=await w(e,t,D(t)),s=t?.padding??0,c=Math.max(a.width+(t.padding??0)*2,t?.width??0),l=Math.max(a.height+(t.padding??0)*2,t?.height??0),u=-a.width/2-s,d=-a.height/2-s,{cssStyles:f}=t,p=K.svg(i),h=C(t,{});t.look!==`handDrawn`&&(h.roughness=0,h.fillStyle=`solid`);let g=[{x:u,y:d},{x:u+c+8,y:d},{x:u+c+8,y:d+l},{x:u-8,y:d+l},{x:u-8,y:d},{x:u,y:d},{x:u,y:d+l}],_=p.polygon(g.map(e=>[e.x,e.y]),h),v=i.insert(()=>_,`:first-child`);return v.attr(`class`,`basic label-container`).attr(`style`,m(f)),r&&t.look!==`handDrawn`&&v.selectAll(`path`).attr(`style`,r),f&&t.look!==`handDrawn`&&v.selectAll(`path`).attr(`style`,r),o.attr(`transform`,`translate(${-c/2+4+(t.padding??0)-(a.x-(a.left??0))},${-l/2+(t.padding??0)-(a.y-(a.top??0))})`),E(t,v),t.intersect=function(e){return J.rect(t,e)},i}e(cn,`shadedProcess`);async function ln(e,t){let{labelStyles:n,nodeStyles:r}=S(t);t.labelStyle=n;let{shapeSvg:i,bbox:a,label:o}=await w(e,t,D(t)),s=Math.max(a.width+(t.padding??0)*2,t?.width??0),c=Math.max(a.height+(t.padding??0)*2,t?.height??0),l=-s/2,u=-c/2,{cssStyles:d}=t,f=K.svg(i),p=C(t,{});t.look!==`handDrawn`&&(p.roughness=0,p.fillStyle=`solid`);let m=[{x:l,y:u},{x:l,y:u+c},{x:l+s,y:u+c},{x:l+s,y:u-c/2}],h=O(m),g=f.path(h,p),_=i.insert(()=>g,`:first-child`);return _.attr(`class`,`basic label-container`),d&&t.look!==`handDrawn`&&_.selectChildren(`path`).attr(`style`,d),r&&t.look!==`handDrawn`&&_.selectChildren(`path`).attr(`style`,r),_.attr(`transform`,`translate(0, ${c/4})`),o.attr(`transform`,`translate(${-s/2+(t.padding??0)-(a.x-(a.left??0))}, ${-c/4+(t.padding??0)-(a.y-(a.top??0))})`),E(t,_),t.intersect=function(e){return J.polygon(t,m,e)},i}e(ln,`slopedRect`);async function un(e,t){return Ht(e,t,{rx:0,ry:0,classes:``,labelPaddingX:t.labelPaddingX??(t?.padding||0)*2,labelPaddingY:(t?.padding||0)*1})}e(un,`squareRect`);async function dn(e,t){let{labelStyles:n,nodeStyles:r}=S(t);t.labelStyle=n;let{shapeSvg:i,bbox:a}=await w(e,t,D(t)),o=a.height+t.padding,s=a.width+o/4+t.padding,c=o/2,{cssStyles:l}=t,u=K.svg(i),d=C(t,{});t.look!==`handDrawn`&&(d.roughness=0,d.fillStyle=`solid`);let f=[{x:-s/2+c,y:-o/2},{x:s/2-c,y:-o/2},...A(-s/2+c,0,c,50,90,270),{x:s/2-c,y:o/2},...A(s/2-c,0,c,50,270,450)],p=O(f),m=u.path(p,d),h=i.insert(()=>m,`:first-child`);return h.attr(`class`,`basic label-container outer-path`),l&&t.look!==`handDrawn`&&h.selectChildren(`path`).attr(`style`,l),r&&t.look!==`handDrawn`&&h.selectChildren(`path`).attr(`style`,r),E(t,h),t.intersect=function(e){return J.polygon(t,f,e)},i}e(dn,`stadium`);async function fn(e,t){return Ht(e,t,{rx:5,ry:5,classes:`flowchart-node`})}e(fn,`state`);function pn(e,t,{config:{themeVariables:n}}){let{labelStyles:r,nodeStyles:i}=S(t);t.labelStyle=r;let{cssStyles:a}=t,{lineColor:o,stateBorder:s,nodeBorder:c}=n,l=e.insert(`g`).attr(`class`,`node default`).attr(`id`,t.domId||t.id),u=K.svg(l),d=C(t,{});t.look!==`handDrawn`&&(d.roughness=0,d.fillStyle=`solid`);let f=u.circle(0,0,14,{...d,stroke:o,strokeWidth:2}),p=s??c,m=u.circle(0,0,5,{...d,fill:p,stroke:p,strokeWidth:2,fillStyle:`solid`}),h=l.insert(()=>f,`:first-child`);return h.insert(()=>m),a&&h.selectAll(`path`).attr(`style`,a),i&&h.selectAll(`path`).attr(`style`,i),E(t,h),t.intersect=function(e){return J.circle(t,7,e)},l}e(pn,`stateEnd`);function mn(e,t,{config:{themeVariables:n}}){let{lineColor:r}=n,i=e.insert(`g`).attr(`class`,`node default`).attr(`id`,t.domId||t.id),a;if(t.look===`handDrawn`){let e=K.svg(i).circle(0,0,14,b(r));a=i.insert(()=>e),a.attr(`class`,`state-start`).attr(`r`,7).attr(`width`,14).attr(`height`,14)}else a=i.insert(`circle`,`:first-child`),a.attr(`class`,`state-start`).attr(`r`,7).attr(`width`,14).attr(`height`,14);return E(t,a),t.intersect=function(e){return J.circle(t,7,e)},i}e(mn,`stateStart`);async function hn(e,t){let{labelStyles:n,nodeStyles:r}=S(t);t.labelStyle=n;let{shapeSvg:i,bbox:a}=await w(e,t,D(t)),o=(t?.padding||0)/2,s=a.width+t.padding,c=a.height+t.padding,l=-a.width/2-o,u=-a.height/2-o,d=[{x:0,y:0},{x:s,y:0},{x:s,y:-c},{x:0,y:-c},{x:0,y:0},{x:-8,y:0},{x:s+8,y:0},{x:s+8,y:-c},{x:-8,y:-c},{x:-8,y:0}];if(t.look===`handDrawn`){let e=K.svg(i),n=C(t,{}),r=e.rectangle(l-8,u,s+16,c,n),a=e.line(l,u,l,u+c,n),o=e.line(l+s,u,l+s,u+c,n);i.insert(()=>a,`:first-child`),i.insert(()=>o,`:first-child`);let d=i.insert(()=>r,`:first-child`),{cssStyles:f}=t;d.attr(`class`,`basic label-container`).attr(`style`,m(f)),E(t,d)}else{let e=Y(i,s,c,d);r&&e.attr(`style`,r),E(t,e)}return t.intersect=function(e){return J.polygon(t,d,e)},i}e(hn,`subroutine`);async function gn(e,t){let{labelStyles:n,nodeStyles:r}=S(t);t.labelStyle=n;let{shapeSvg:i,bbox:a}=await w(e,t,D(t)),o=Math.max(a.width+(t.padding??0)*2,t?.width??0),s=Math.max(a.height+(t.padding??0)*2,t?.height??0),c=-o/2,l=-s/2,u=.2*s,d=.2*s,{cssStyles:f}=t,p=K.svg(i),m=C(t,{}),h=[{x:c-u/2,y:l},{x:c+o+u/2,y:l},{x:c+o+u/2,y:l+s},{x:c-u/2,y:l+s}],g=[{x:c+o-u/2,y:l+s},{x:c+o+u/2,y:l+s},{x:c+o+u/2,y:l+s-d}];t.look!==`handDrawn`&&(m.roughness=0,m.fillStyle=`solid`);let _=O(h),v=p.path(_,m),y=O(g),b=p.path(y,{...m,fillStyle:`solid`}),x=i.insert(()=>b,`:first-child`);return x.insert(()=>v,`:first-child`),x.attr(`class`,`basic label-container`),f&&t.look!==`handDrawn`&&x.selectAll(`path`).attr(`style`,f),r&&t.look!==`handDrawn`&&x.selectAll(`path`).attr(`style`,r),E(t,x),t.intersect=function(e){return J.polygon(t,h,e)},i}e(gn,`taggedRect`);async function _n(e,t){let{labelStyles:n,nodeStyles:r}=S(t);t.labelStyle=n;let{shapeSvg:i,bbox:a,label:o}=await w(e,t,D(t)),s=Math.max(a.width+(t.padding??0)*2,t?.width??0),c=Math.max(a.height+(t.padding??0)*2,t?.height??0),l=c/4,u=.2*s,d=.2*c,f=c+l,{cssStyles:p}=t,m=K.svg(i),h=C(t,{});t.look!==`handDrawn`&&(h.roughness=0,h.fillStyle=`solid`);let g=[{x:-s/2-s/2*.1,y:f/2},...k(-s/2-s/2*.1,f/2,s/2+s/2*.1,f/2,l,.8),{x:s/2+s/2*.1,y:-f/2},{x:-s/2-s/2*.1,y:-f/2}],_=-s/2+s/2*.1,v=-f/2-d*.4,y=[{x:_+s-u,y:(v+c)*1.4},{x:_+s,y:v+c-d},{x:_+s,y:(v+c)*.9},...k(_+s,(v+c)*1.3,_+s-u,(v+c)*1.5,-c*.03,.5)],b=O(g),x=m.path(b,h),T=O(y),A=m.path(T,{...h,fillStyle:`solid`}),j=i.insert(()=>A,`:first-child`);return j.insert(()=>x,`:first-child`),j.attr(`class`,`basic label-container`),p&&t.look!==`handDrawn`&&j.selectAll(`path`).attr(`style`,p),r&&t.look!==`handDrawn`&&j.selectAll(`path`).attr(`style`,r),j.attr(`transform`,`translate(0,${-l/2})`),o.attr(`transform`,`translate(${-s/2+(t.padding??0)-(a.x-(a.left??0))},${-c/2+(t.padding??0)-l/2-(a.y-(a.top??0))})`),E(t,j),t.intersect=function(e){return J.polygon(t,g,e)},i}e(_n,`taggedWaveEdgedRectangle`);async function vn(e,t){let{labelStyles:n,nodeStyles:r}=S(t);t.labelStyle=n;let{shapeSvg:i,bbox:a}=await w(e,t,D(t)),o=Math.max(a.width+t.padding,t?.width||0),s=Math.max(a.height+t.padding,t?.height||0),c=-o/2,l=-s/2,u=i.insert(`rect`,`:first-child`);return u.attr(`class`,`text`).attr(`style`,r).attr(`rx`,0).attr(`ry`,0).attr(`x`,c).attr(`y`,l).attr(`width`,o).attr(`height`,s),E(t,u),t.intersect=function(e){return J.rect(t,e)},i}e(vn,`text`);var yn=e((e,t,n,r,i,a)=>`M${e},${t}
    a${i},${a} 0,0,1 0,${-r}
    l${n},0
    a${i},${a} 0,0,1 0,${r}
    M${n},${-r}
    a${i},${a} 0,0,0 0,${r}
    l${-n},0`,`createCylinderPathD`),bn=e((e,t,n,r,i,a)=>[`M${e},${t}`,`M${e+n},${t}`,`a${i},${a} 0,0,0 0,${-r}`,`l${-n},0`,`a${i},${a} 0,0,0 0,${r}`,`l${n},0`].join(` `),`createOuterCylinderPathD`),xn=e((e,t,n,r,i,a)=>[`M${e+n/2},${-r/2}`,`a${i},${a} 0,0,0 0,${r}`].join(` `),`createInnerCylinderPathD`);async function Sn(e,t){let{labelStyles:n,nodeStyles:r}=S(t);t.labelStyle=n;let{shapeSvg:i,bbox:a,label:o,halfPadding:s}=await w(e,t,D(t)),c=t.look===`neo`?s*2:s,l=a.height+c,u=l/2,d=u/(2.5+l/50),f=a.width+d+c,{cssStyles:p}=t,h;if(t.look===`handDrawn`){let e=K.svg(i),n=bn(0,0,f,l,d,u),r=xn(0,0,f,l,d,u),a=e.path(n,C(t,{})),o=e.path(r,C(t,{fill:`none`}));h=i.insert(()=>o,`:first-child`),h=i.insert(()=>a,`:first-child`),h.attr(`class`,`basic label-container`),p&&h.attr(`style`,p)}else{let e=yn(0,0,f,l,d,u);h=i.insert(`path`,`:first-child`).attr(`d`,e).attr(`class`,`basic label-container`).attr(`style`,m(p)).attr(`style`,r),h.attr(`class`,`basic label-container`),p&&h.selectAll(`path`).attr(`style`,p),r&&h.selectAll(`path`).attr(`style`,r)}return h.attr(`label-offset-x`,d),h.attr(`transform`,`translate(${-f/2}, ${l/2} )`),o.attr(`transform`,`translate(${-(a.width/2)-d-(a.x-(a.left??0))}, ${-(a.height/2)-(a.y-(a.top??0))})`),E(t,h),t.intersect=function(e){let n=J.rect(t,e),r=n.y-(t.y??0);if(u!=0&&(Math.abs(r)<(t.height??0)/2||Math.abs(r)==(t.height??0)/2&&Math.abs(n.x-(t.x??0))>(t.width??0)/2-d)){let i=d*d*(1-r*r/(u*u));i!=0&&(i=Math.sqrt(Math.abs(i))),i=d-i,e.x-(t.x??0)>0&&(i=-i),n.x+=i}return n},i}e(Sn,`tiltedCylinder`);async function Cn(e,t){let{labelStyles:n,nodeStyles:r}=S(t);t.labelStyle=n;let{shapeSvg:i,bbox:a}=await w(e,t,D(t)),o=a.width+t.padding,s=a.height+t.padding,c=[{x:-3*s/6,y:0},{x:o+3*s/6,y:0},{x:o,y:-s},{x:0,y:-s}],l,{cssStyles:u}=t;if(t.look===`handDrawn`){let e=K.svg(i),n=C(t,{}),r=O(c),a=e.path(r,n);l=i.insert(()=>a,`:first-child`).attr(`transform`,`translate(${-o/2}, ${s/2})`),u&&l.attr(`style`,u)}else l=Y(i,o,s,c);return r&&l.attr(`style`,r),t.width=o,t.height=s,E(t,l),t.intersect=function(e){return J.polygon(t,c,e)},i}e(Cn,`trapezoid`);async function wn(e,t){let{labelStyles:n,nodeStyles:r}=S(t);t.labelStyle=n;let{shapeSvg:i,bbox:a}=await w(e,t,D(t)),o=Math.max(60,a.width+(t.padding??0)*2,t?.width??0),s=Math.max(20,a.height+(t.padding??0)*2,t?.height??0),{cssStyles:c}=t,l=K.svg(i),u=C(t,{});t.look!==`handDrawn`&&(u.roughness=0,u.fillStyle=`solid`);let d=[{x:-o/2*.8,y:-s/2},{x:o/2*.8,y:-s/2},{x:o/2,y:-s/2*.6},{x:o/2,y:s/2},{x:-o/2,y:s/2},{x:-o/2,y:-s/2*.6}],f=O(d),p=l.path(f,u),m=i.insert(()=>p,`:first-child`);return m.attr(`class`,`basic label-container`),c&&t.look!==`handDrawn`&&m.selectChildren(`path`).attr(`style`,c),r&&t.look!==`handDrawn`&&m.selectChildren(`path`).attr(`style`,r),E(t,m),t.intersect=function(e){return J.polygon(t,d,e)},i}e(wn,`trapezoidalPentagon`);async function Tn(e,t){let{labelStyles:r,nodeStyles:i}=S(t);t.labelStyle=r;let{shapeSvg:a,bbox:s,label:c}=await w(e,t,D(t)),l=u(o().flowchart?.htmlLabels),d=s.width+(t.padding??0),f=d+s.height,p=d+s.height,m=[{x:0,y:0},{x:p,y:0},{x:p/2,y:-f}],{cssStyles:h}=t,g=K.svg(a),_=C(t,{});t.look!==`handDrawn`&&(_.roughness=0,_.fillStyle=`solid`);let v=O(m),y=g.path(v,_),b=a.insert(()=>y,`:first-child`).attr(`transform`,`translate(${-f/2}, ${f/2})`);return h&&t.look!==`handDrawn`&&b.selectChildren(`path`).attr(`style`,h),i&&t.look!==`handDrawn`&&b.selectChildren(`path`).attr(`style`,i),t.width=d,t.height=f,E(t,b),c.attr(`transform`,`translate(${-s.width/2-(s.x-(s.left??0))}, ${f/2-(s.height+(t.padding??0)/(l?2:1)-(s.y-(s.top??0)))})`),t.intersect=function(e){return n.info(`Triangle intersect`,t,m,e),J.polygon(t,m,e)},a}e(Tn,`triangle`);async function En(e,t){let{labelStyles:n,nodeStyles:r}=S(t);t.labelStyle=n;let{shapeSvg:i,bbox:a,label:o}=await w(e,t,D(t)),s=Math.max(a.width+(t.padding??0)*2,t?.width??0),c=Math.max(a.height+(t.padding??0)*2,t?.height??0),l=c/8,u=c+l,{cssStyles:d}=t,f=70-s,p=f>0?f/2:0,m=K.svg(i),h=C(t,{});t.look!==`handDrawn`&&(h.roughness=0,h.fillStyle=`solid`);let g=[{x:-s/2-p,y:u/2},...k(-s/2-p,u/2,s/2+p,u/2,l,.8),{x:s/2+p,y:-u/2},{x:-s/2-p,y:-u/2}],_=O(g),v=m.path(_,h),y=i.insert(()=>v,`:first-child`);return y.attr(`class`,`basic label-container`),d&&t.look!==`handDrawn`&&y.selectAll(`path`).attr(`style`,d),r&&t.look!==`handDrawn`&&y.selectAll(`path`).attr(`style`,r),y.attr(`transform`,`translate(0,${-l/2})`),o.attr(`transform`,`translate(${-s/2+(t.padding??0)-(a.x-(a.left??0))},${-c/2+(t.padding??0)-l-(a.y-(a.top??0))})`),E(t,y),t.intersect=function(e){return J.polygon(t,g,e)},i}e(En,`waveEdgedRectangle`);async function Dn(e,t){let{labelStyles:n,nodeStyles:r}=S(t);t.labelStyle=n;let{shapeSvg:i,bbox:a}=await w(e,t,D(t)),o=Math.max(a.width+(t.padding??0)*2,t?.width??0),s=Math.max(a.height+(t.padding??0)*2,t?.height??0),c=o/s,l=o,u=s;l>u*c?u=l/c:l=u*c,l=Math.max(l,100),u=Math.max(u,50);let d=Math.min(u*.2,u/4),f=u+d*2,{cssStyles:p}=t,m=K.svg(i),h=C(t,{});t.look!==`handDrawn`&&(h.roughness=0,h.fillStyle=`solid`);let g=[{x:-l/2,y:f/2},...k(-l/2,f/2,l/2,f/2,d,1),{x:l/2,y:-f/2},...k(l/2,-f/2,-l/2,-f/2,d,-1)],_=O(g),v=m.path(_,h),y=i.insert(()=>v,`:first-child`);return y.attr(`class`,`basic label-container`),p&&t.look!==`handDrawn`&&y.selectAll(`path`).attr(`style`,p),r&&t.look!==`handDrawn`&&y.selectAll(`path`).attr(`style`,r),E(t,y),t.intersect=function(e){return J.polygon(t,g,e)},i}e(Dn,`waveRectangle`);async function On(e,t){let{labelStyles:n,nodeStyles:r}=S(t);t.labelStyle=n;let{shapeSvg:i,bbox:a,label:o}=await w(e,t,D(t)),s=Math.max(a.width+(t.padding??0)*2,t?.width??0),c=Math.max(a.height+(t.padding??0)*2,t?.height??0),l=-s/2,u=-c/2,{cssStyles:d}=t,f=K.svg(i),p=C(t,{}),m=[{x:l-5,y:u-5},{x:l-5,y:u+c},{x:l+s,y:u+c},{x:l+s,y:u-5}],h=`M${l-5},${u-5} L${l+s},${u-5} L${l+s},${u+c} L${l-5},${u+c} L${l-5},${u-5}
                M${l-5},${u} L${l+s},${u}
                M${l},${u-5} L${l},${u+c}`;t.look!==`handDrawn`&&(p.roughness=0,p.fillStyle=`solid`);let g=f.path(h,p),_=i.insert(()=>g,`:first-child`);return _.attr(`transform`,`translate(${5/2}, ${5/2})`),_.attr(`class`,`basic label-container`),d&&t.look!==`handDrawn`&&_.selectAll(`path`).attr(`style`,d),r&&t.look!==`handDrawn`&&_.selectAll(`path`).attr(`style`,r),o.attr(`transform`,`translate(${-(a.width/2)+5/2-(a.x-(a.left??0))}, ${-(a.height/2)+5/2-(a.y-(a.top??0))})`),E(t,_),t.intersect=function(e){return J.polygon(t,m,e)},i}e(On,`windowPane`);async function kn(e,n){let r=n;if(r.alias&&(n.label=r.alias),n.look===`handDrawn`){let{themeVariables:t}=f(),{background:r}=t;await kn(e,{...n,id:n.id+`-background`,look:`default`,cssStyles:[`stroke: none`,`fill: ${r}`]})}let i=f();n.useHtmlLabels=i.htmlLabels;let a=i.er?.diagramPadding??10,o=i.er?.entityPadding??6,{cssStyles:s}=n,{labelStyles:c,nodeStyles:l}=S(n);if(r.attributes.length===0&&n.label){let t={rx:0,ry:0,labelPaddingX:a,labelPaddingY:a*1.5,classes:``};h(n.label,i)+t.labelPaddingX*2<i.er.minEntityWidth&&(n.width=i.er.minEntityWidth);let r=await Ht(e,n,t);if(!u(i.htmlLabels)){let e=r.select(`text`),t=e.node()?.getBBox();e.attr(`transform`,`translate(${-t.width/2}, 0)`)}return r}i.htmlLabels||(a*=1.25,o*=1.25);let d=D(n);d||=`node default`;let p=e.insert(`g`).attr(`class`,d).attr(`id`,n.domId||n.id),m=await An(p,n.label??``,i,0,0,[`name`],c);m.height+=o;let g=0,_=[],v=[],y=0,b=0,x=0,w=0,T=!0,O=!0;for(let e of r.attributes){let t=await An(p,e.type,i,0,g,[`attribute-type`],c);y=Math.max(y,t.width+a);let n=await An(p,e.name,i,0,g,[`attribute-name`],c);b=Math.max(b,n.width+a);let r=await An(p,e.keys.join(),i,0,g,[`attribute-keys`],c);x=Math.max(x,r.width+a);let s=await An(p,e.comment,i,0,g,[`attribute-comment`],c);w=Math.max(w,s.width+a);let l=Math.max(t.height,n.height,r.height,s.height)+o;v.push({yOffset:g,rowHeight:l}),g+=l}let k=4;x<=a&&(T=!1,x=0,k--),w<=a&&(O=!1,w=0,k--);let A=p.node().getBBox();if(m.width+a*2-(y+b+x+w)>0){let e=m.width+a*2-(y+b+x+w);y+=e/k,b+=e/k,x>0&&(x+=e/k),w>0&&(w+=e/k)}let j=y+b+x+w,M=K.svg(p),N=C(n,{});n.look!==`handDrawn`&&(N.roughness=0,N.fillStyle=`solid`);let P=0;v.length>0&&(P=v.reduce((e,t)=>e+(t?.rowHeight??0),0));let F=Math.max(A.width+a*2,n?.width||0,j),I=Math.max((P??0)+m.height,n?.height||0),L=-F/2,R=-I/2;p.selectAll(`g:not(:first-child)`).each((e,n,r)=>{let i=t(r[n]),s=i.attr(`transform`),c=0,l=0;if(s){let e=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(s);e&&(c=parseFloat(e[1]),l=parseFloat(e[2]),i.attr(`class`).includes(`attribute-name`)?c+=y:i.attr(`class`).includes(`attribute-keys`)?c+=y+b:i.attr(`class`).includes(`attribute-comment`)&&(c+=y+b+x))}i.attr(`transform`,`translate(${L+a/2+c}, ${l+R+m.height+o/2})`)}),p.select(`.name`).attr(`transform`,`translate(`+-m.width/2+`, `+(R+o/2)+`)`);let ee=M.rectangle(L,R,F,I,N),te=p.insert(()=>ee,`:first-child`).attr(`style`,s.join(``)),{themeVariables:ne}=f(),{rowEven:z,rowOdd:re,nodeBorder:ie}=ne;_.push(0);for(let[e,t]of v.entries()){let n=(e+1)%2==0&&t.yOffset!==0,r=M.rectangle(L,m.height+R+t?.yOffset,F,t?.rowHeight,{...N,fill:n?z:re,stroke:ie});p.insert(()=>r,`g.label`).attr(`style`,s.join(``)).attr(`class`,`row-rect-${n?`even`:`odd`}`)}let B=M.line(L,m.height+R,F+L,m.height+R,N);p.insert(()=>B).attr(`class`,`divider`),B=M.line(y+L,m.height+R,y+L,I+R,N),p.insert(()=>B).attr(`class`,`divider`),T&&(B=M.line(y+b+L,m.height+R,y+b+L,I+R,N),p.insert(()=>B).attr(`class`,`divider`)),O&&(B=M.line(y+b+x+L,m.height+R,y+b+x+L,I+R,N),p.insert(()=>B).attr(`class`,`divider`));for(let e of _)B=M.line(L,m.height+R+e,F+L,m.height+R+e,N),p.insert(()=>B).attr(`class`,`divider`);if(E(n,te),l&&n.look!==`handDrawn`){let e=l.split(`;`)?.filter(e=>e.includes(`stroke`))?.map(e=>`${e}`).join(`; `);p.selectAll(`path`).attr(`style`,e??``),p.selectAll(`.row-rect-even path`).attr(`style`,l)}return n.intersect=function(e){return J.rect(n,e)},p}e(kn,`erBox`);async function An(e,n,r,a=0,o=0,s=[],c=``){let l=e.insert(`g`).attr(`class`,`label ${s.join(` `)}`).attr(`transform`,`translate(${a}, ${o})`).attr(`style`,c);n!==i(n)&&(n=i(n),n=n.replaceAll(`<`,`&lt;`).replaceAll(`>`,`&gt;`));let d=l.node().appendChild(await _(l,n,{width:h(n,r)+100,style:c,useHtmlLabels:r.htmlLabels},r));if(n.includes(`&lt;`)||n.includes(`&gt;`)){let e=d.children[0];for(e.textContent=e.textContent.replaceAll(`&lt;`,`<`).replaceAll(`&gt;`,`>`);e.childNodes[0];)e=e.childNodes[0],e.textContent=e.textContent.replaceAll(`&lt;`,`<`).replaceAll(`&gt;`,`>`)}let f=d.getBBox();if(u(r.htmlLabels)){let e=d.children[0];e.style.textAlign=`start`;let n=t(d);f=e.getBoundingClientRect(),n.attr(`width`,f.width),n.attr(`height`,f.height)}return f}e(An,`addText`);async function jn(e,t,n,r,i=n.class.padding??12){let a=r?0:3,o=e.insert(`g`).attr(`class`,D(t)).attr(`id`,t.domId||t.id),s=null,c=null,l=null,u=null,d=0,f=0,p=0;if(s=o.insert(`g`).attr(`class`,`annotation-group text`),t.annotations.length>0){let e=t.annotations[0];await Mn(s,{text:`\xAB${e}\xBB`},0),d=s.node().getBBox().height}c=o.insert(`g`).attr(`class`,`label-group text`),await Mn(c,t,0,[`font-weight: bolder`]);let m=c.node().getBBox();f=m.height,l=o.insert(`g`).attr(`class`,`members-group text`);let h=0;for(let e of t.members){let t=await Mn(l,e,h,[e.parseClassifier()]);h+=t+a}p=l.node().getBBox().height,p<=0&&(p=i/2),u=o.insert(`g`).attr(`class`,`methods-group text`);let g=0;for(let e of t.methods){let t=await Mn(u,e,g,[e.parseClassifier()]);g+=t+a}let _=o.node().getBBox();if(s!==null){let e=s.node().getBBox();s.attr(`transform`,`translate(${-e.width/2})`)}return c.attr(`transform`,`translate(${-m.width/2}, ${d})`),_=o.node().getBBox(),l.attr(`transform`,`translate(0, ${d+f+i*2})`),_=o.node().getBBox(),u.attr(`transform`,`translate(0, ${d+f+(p?p+i*4:i*2)})`),_=o.node().getBBox(),{shapeSvg:o,bbox:_}}e(jn,`textHelper`);async function Mn(n,i,a,o=[]){let s=n.insert(`g`).attr(`class`,`label`).attr(`style`,o.join(`; `)),c=f(),d=`useHtmlLabels`in i?i.useHtmlLabels:u(c.htmlLabels)??!0,m=``;m=`text`in i?i.text:i.label,!d&&m.startsWith(`\\`)&&(m=m.substring(1)),r(m)&&(d=!0);let g=await _(s,l(p(m)),{width:h(m,c)+50,classes:`markdown-node-label`,useHtmlLabels:d},c),v,y=1;if(d){let n=g.children[0],r=t(g);y=n.innerHTML.split(`<br>`).length,n.innerHTML.includes(`</math>`)&&(y+=n.innerHTML.split(`<mrow>`).length-1);let i=n.getElementsByTagName(`img`);if(i){let t=m.replace(/<img[^>]*>/g,``).trim()===``;await Promise.all([...i].map(n=>new Promise(r=>{function i(){if(n.style.display=`flex`,n.style.flexDirection=`column`,t){let e=c.fontSize?.toString()??window.getComputedStyle(document.body).fontSize,t=parseInt(e,10)*5+`px`;n.style.minWidth=t,n.style.maxWidth=t}else n.style.width=`100%`;r(n)}e(i,`setupImage`),setTimeout(()=>{n.complete&&i()}),n.addEventListener(`error`,i),n.addEventListener(`load`,i)})))}v=n.getBoundingClientRect(),r.attr(`width`,v.width),r.attr(`height`,v.height)}else{o.includes(`font-weight: bolder`)&&t(g).selectAll(`tspan`).attr(`font-weight`,``),y=g.children.length;let e=g.children[0];(g.textContent===``||g.textContent.includes(`&gt`))&&(e.textContent=m[0]+m.substring(1).replaceAll(`&gt;`,`>`).replaceAll(`&lt;`,`<`).trim(),m[1]===` `&&(e.textContent=e.textContent[0]+` `+e.textContent.substring(1))),e.textContent===`undefined`&&(e.textContent=``),v=g.getBBox()}return s.attr(`transform`,`translate(0,`+(-v.height/(2*y)+a)+`)`),v.height}e(Mn,`addText`);async function Nn(e,n){let r=o(),i=r.class.padding??12,a=i,s=n.useHtmlLabels??u(r.htmlLabels)??!0,c=n;c.annotations=c.annotations??[],c.members=c.members??[],c.methods=c.methods??[];let{shapeSvg:l,bbox:d}=await jn(e,n,r,s,a),{labelStyles:f,nodeStyles:p}=S(n);n.labelStyle=f,n.cssStyles=c.styles||``;let m=c.styles?.join(`;`)||p||``;n.cssStyles||=m.replaceAll(`!important`,``).split(`;`);let h=c.members.length===0&&c.methods.length===0&&!r.class?.hideEmptyMembersBox,g=K.svg(l),_=C(n,{});n.look!==`handDrawn`&&(_.roughness=0,_.fillStyle=`solid`);let v=d.width,y=d.height;c.members.length===0&&c.methods.length===0?y+=a:c.members.length>0&&c.methods.length===0&&(y+=a*2);let b=-v/2,x=-y/2,w=g.rectangle(b-i,x-i-(h?i:c.members.length===0&&c.methods.length===0?-i/2:0),v+2*i,y+2*i+(h?i*2:c.members.length===0&&c.methods.length===0?-i:0),_),T=l.insert(()=>w,`:first-child`);T.attr(`class`,`basic label-container`);let D=T.node().getBBox();l.selectAll(`.text`).each((e,n,r)=>{let a=t(r[n]),o=a.attr(`transform`),u=0;if(o){let e=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(o);e&&(u=parseFloat(e[2]))}let d=u+x+i-(h?i:c.members.length===0&&c.methods.length===0?-i/2:0);s||(d-=4);let f=b;(a.attr(`class`).includes(`label-group`)||a.attr(`class`).includes(`annotation-group`))&&(f=-a.node()?.getBBox().width/2||0,l.selectAll(`text`).each(function(e,t,n){window.getComputedStyle(n[t]).textAnchor===`middle`&&(f=0)})),a.attr(`transform`,`translate(${f}, ${d})`)});let O=l.select(`.annotation-group`).node().getBBox().height-(h?i/2:0)||0,k=l.select(`.label-group`).node().getBBox().height-(h?i/2:0)||0,A=l.select(`.members-group`).node().getBBox().height-(h?i/2:0)||0;if(c.members.length>0||c.methods.length>0||h){let e=g.line(D.x,O+k+x+i,D.x+D.width,O+k+x+i,_);l.insert(()=>e).attr(`class`,`divider`).attr(`style`,m)}if(h||c.members.length>0||c.methods.length>0){let e=g.line(D.x,O+k+A+x+a*2+i,D.x+D.width,O+k+A+x+i+a*2,_);l.insert(()=>e).attr(`class`,`divider`).attr(`style`,m)}if(c.look!==`handDrawn`&&l.selectAll(`path`).attr(`style`,m),T.select(`:nth-child(2)`).attr(`style`,m),l.selectAll(`.divider`).select(`path`).attr(`style`,m),n.labelStyle?l.selectAll(`span`).attr(`style`,n.labelStyle):l.selectAll(`span`).attr(`style`,m),!s){let e=RegExp(/color\s*:\s*([^;]*)/),t=e.exec(m);if(t){let e=t[0].replace(`color`,`fill`);l.selectAll(`tspan`).attr(`style`,e)}else if(f){let t=e.exec(f);if(t){let e=t[0].replace(`color`,`fill`);l.selectAll(`tspan`).attr(`style`,e)}}}return E(n,T),n.intersect=function(e){return J.rect(n,e)},l}e(Nn,`classBox`);async function Pn(e,n){let{labelStyles:r,nodeStyles:i}=S(n);n.labelStyle=r;let a=n,o=n,s=`verifyMethod`in n,c=D(n),l=e.insert(`g`).attr(`class`,c).attr(`id`,n.domId??n.id),u;u=s?await $(l,`&lt;&lt;${a.type}&gt;&gt;`,0,n.labelStyle):await $(l,`&lt;&lt;Element&gt;&gt;`,0,n.labelStyle);let d=u,f=await $(l,a.name,d,n.labelStyle+`; font-weight: bold;`);if(d+=f+20,s){let e=await $(l,`${a.requirementId?`ID: ${a.requirementId}`:``}`,d,n.labelStyle);d+=e;let t=await $(l,`${a.text?`Text: ${a.text}`:``}`,d,n.labelStyle);d+=t;let r=await $(l,`${a.risk?`Risk: ${a.risk}`:``}`,d,n.labelStyle);d+=r,await $(l,`${a.verifyMethod?`Verification: ${a.verifyMethod}`:``}`,d,n.labelStyle)}else{let e=await $(l,`${o.type?`Type: ${o.type}`:``}`,d,n.labelStyle);d+=e,await $(l,`${o.docRef?`Doc Ref: ${o.docRef}`:``}`,d,n.labelStyle)}let p=(l.node()?.getBBox().width??200)+20,m=(l.node()?.getBBox().height??200)+20,h=-p/2,g=-m/2,_=K.svg(l),v=C(n,{});n.look!==`handDrawn`&&(v.roughness=0,v.fillStyle=`solid`);let y=_.rectangle(h,g,p,m,v),b=l.insert(()=>y,`:first-child`);if(b.attr(`class`,`basic label-container`).attr(`style`,i),l.selectAll(`.label`).each((e,n,r)=>{let i=t(r[n]),a=i.attr(`transform`),o=0,s=0;if(a){let e=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(a);e&&(o=parseFloat(e[1]),s=parseFloat(e[2]))}let c=s-m/2,l=h+20/2;(n===0||n===1)&&(l=o),i.attr(`transform`,`translate(${l}, ${c+20})`)}),d>u+f+20){let e=_.line(h,g+u+f+20,h+p,g+u+f+20,v);l.insert(()=>e).attr(`style`,i)}return E(n,b),n.intersect=function(e){return J.rect(n,e)},l}e(Pn,`requirementBox`);async function $(e,n,r,i=``){if(n===``)return 0;let a=e.insert(`g`).attr(`class`,`label`).attr(`style`,i),s=o(),c=s.htmlLabels??!0,u=await _(a,l(p(n)),{width:h(n,s)+50,classes:`markdown-node-label`,useHtmlLabels:c,style:i},s),d;if(c){let e=u.children[0],n=t(u);d=e.getBoundingClientRect(),n.attr(`width`,d.width),n.attr(`height`,d.height)}else{let e=u.children[0];for(let t of e.children)t.textContent=t.textContent.replaceAll(`&gt;`,`>`).replaceAll(`&lt;`,`<`),i&&t.setAttribute(`style`,i);d=u.getBBox(),d.height+=6}return a.attr(`transform`,`translate(${-d.width/2},${-d.height/2+r})`),d.height}e($,`addText`);var Fn=e(e=>{switch(e){case`Very High`:return`red`;case`High`:return`orange`;case`Medium`:return null;case`Low`:return`blue`;case`Very Low`:return`lightblue`}},`colorFromPriority`);async function In(e,t,{config:n}){let{labelStyles:r,nodeStyles:i}=S(t);t.labelStyle=r||``;let a=t.width;t.width=(t.width??200)-10;let{shapeSvg:o,bbox:s,label:c}=await w(e,t,D(t)),l=t.padding||10,u=``,d;`ticket`in t&&t.ticket&&n?.kanban?.ticketBaseUrl&&(u=n?.kanban?.ticketBaseUrl.replace(`#TICKET#`,t.ticket),d=o.insert(`svg:a`,`:first-child`).attr(`class`,`kanban-ticket-link`).attr(`xlink:href`,u).attr(`target`,`_blank`));let f={useHtmlLabels:t.useHtmlLabels,labelStyle:t.labelStyle||``,width:t.width,img:t.img,padding:t.padding||8,centerLabel:!1},p,m;d?{label:p,bbox:m}=await T(d,`ticket`in t&&t.ticket||``,f):{label:p,bbox:m}=await T(o,`ticket`in t&&t.ticket||``,f);let{label:h,bbox:g}=await T(o,`assigned`in t&&t.assigned||``,f);t.width=a;let _=t?.width||0,v=Math.max(m.height,g.height)/2,y=Math.max(s.height+20,t?.height||0)+v,b=-_/2,x=-y/2;c.attr(`transform`,`translate(`+(l-_/2)+`, `+(-v-s.height/2)+`)`),p.attr(`transform`,`translate(`+(l-_/2)+`, `+(-v+s.height/2)+`)`),h.attr(`transform`,`translate(`+(l+_/2-g.width-20)+`, `+(-v+s.height/2)+`)`);let O,{rx:k,ry:A}=t,{cssStyles:j}=t;if(t.look===`handDrawn`){let e=K.svg(o),n=C(t,{}),r=k||A?e.path(q(b,x,_,y,k||0),n):e.rectangle(b,x,_,y,n);O=o.insert(()=>r,`:first-child`),O.attr(`class`,`basic label-container`).attr(`style`,j||null)}else{O=o.insert(`rect`,`:first-child`),O.attr(`class`,`basic label-container __APA__`).attr(`style`,i).attr(`rx`,k??5).attr(`ry`,A??5).attr(`x`,b).attr(`y`,x).attr(`width`,_).attr(`height`,y);let e=`priority`in t&&t.priority;if(e){let t=o.append(`line`),n=b+2,r=x+Math.floor((k??0)/2),i=x+y-Math.floor((k??0)/2);t.attr(`x1`,n).attr(`y1`,r).attr(`x2`,n).attr(`y2`,i).attr(`stroke-width`,`4`).attr(`stroke`,Fn(e))}}return E(t,O),t.height=y,t.intersect=function(e){return J.rect(t,e)},o}e(In,`kanbanItem`);async function Ln(e,t){let{labelStyles:r,nodeStyles:i}=S(t);t.labelStyle=r;let{shapeSvg:a,bbox:o,halfPadding:s,label:c}=await w(e,t,D(t)),l=o.width+10*s,u=o.height+8*s,d=.15*l,{cssStyles:f}=t,p=o.width+20,h=o.height+20,g=Math.max(l,p),_=Math.max(u,h);c.attr(`transform`,`translate(${-o.width/2}, ${-o.height/2})`);let v,y=`M0 0 
    a${d},${d} 1 0,0 ${g*.25},${-1*_*.1}
    a${d},${d} 1 0,0 ${g*.25},0
    a${d},${d} 1 0,0 ${g*.25},0
    a${d},${d} 1 0,0 ${g*.25},${_*.1}

    a${d},${d} 1 0,0 ${g*.15},${_*.33}
    a${d*.8},${d*.8} 1 0,0 0,${_*.34}
    a${d},${d} 1 0,0 ${-1*g*.15},${_*.33}

    a${d},${d} 1 0,0 ${-1*g*.25},${_*.15}
    a${d},${d} 1 0,0 ${-1*g*.25},0
    a${d},${d} 1 0,0 ${-1*g*.25},0
    a${d},${d} 1 0,0 ${-1*g*.25},${-1*_*.15}

    a${d},${d} 1 0,0 ${-1*g*.1},${-1*_*.33}
    a${d*.8},${d*.8} 1 0,0 0,${-1*_*.34}
    a${d},${d} 1 0,0 ${g*.1},${-1*_*.33}
  H0 V0 Z`;if(t.look===`handDrawn`){let e=K.svg(a),n=C(t,{}),r=e.path(y,n);v=a.insert(()=>r,`:first-child`),v.attr(`class`,`basic label-container`).attr(`style`,m(f))}else v=a.insert(`path`,`:first-child`).attr(`class`,`basic label-container`).attr(`style`,i).attr(`d`,y);return v.attr(`transform`,`translate(${-g/2}, ${-_/2})`),E(t,v),t.calcIntersect=function(e,t){return J.rect(e,t)},t.intersect=function(e){return n.info(`Bang intersect`,t,e),J.rect(t,e)},a}e(Ln,`bang`);async function Rn(e,t){let{labelStyles:r,nodeStyles:i}=S(t);t.labelStyle=r;let{shapeSvg:a,bbox:o,halfPadding:s,label:c}=await w(e,t,D(t)),l=o.width+2*s,u=o.height+2*s,d=.15*l,f=.25*l,p=.35*l,h=.2*l,{cssStyles:g}=t,_,v=`M0 0 
    a${d},${d} 0 0,1 ${l*.25},${-1*l*.1}
    a${p},${p} 1 0,1 ${l*.4},${-1*l*.1}
    a${f},${f} 1 0,1 ${l*.35},${l*.2}

    a${d},${d} 1 0,1 ${l*.15},${u*.35}
    a${h},${h} 1 0,1 ${-1*l*.15},${u*.65}

    a${f},${d} 1 0,1 ${-1*l*.25},${l*.15}
    a${p},${p} 1 0,1 ${-1*l*.5},0
    a${d},${d} 1 0,1 ${-1*l*.25},${-1*l*.15}

    a${d},${d} 1 0,1 ${-1*l*.1},${-1*u*.35}
    a${h},${h} 1 0,1 ${l*.1},${-1*u*.65}
  H0 V0 Z`;if(t.look===`handDrawn`){let e=K.svg(a),n=C(t,{}),r=e.path(v,n);_=a.insert(()=>r,`:first-child`),_.attr(`class`,`basic label-container`).attr(`style`,m(g))}else _=a.insert(`path`,`:first-child`).attr(`class`,`basic label-container`).attr(`style`,i).attr(`d`,v);return c.attr(`transform`,`translate(${-o.width/2}, ${-o.height/2})`),_.attr(`transform`,`translate(${-l/2}, ${-u/2})`),E(t,_),t.calcIntersect=function(e,t){return J.rect(e,t)},t.intersect=function(e){return n.info(`Cloud intersect`,t,e),J.rect(t,e)},a}e(Rn,`cloud`);async function zn(e,t){let{labelStyles:n,nodeStyles:r}=S(t);t.labelStyle=n;let{shapeSvg:i,bbox:a,halfPadding:o,label:s}=await w(e,t,D(t)),c=a.width+8*o,l=a.height+2*o,u=`
    M${-c/2} ${l/2-5}
    v${-l+10}
    q0,-5 5,-5
    h${c-10}
    q5,0 5,5
    v${l-10}
    q0,5 -5,5
    h${-c+10}
    q-5,0 -5,-5
    Z
  `,d=i.append(`path`).attr(`id`,`node-`+t.id).attr(`class`,`node-bkg node-`+t.type).attr(`style`,r).attr(`d`,u);return i.append(`line`).attr(`class`,`node-line-`).attr(`x1`,-c/2).attr(`y1`,l/2).attr(`x2`,c/2).attr(`y2`,l/2),s.attr(`transform`,`translate(${-a.width/2}, ${-a.height/2})`),i.append(()=>s.node()),E(t,d),t.calcIntersect=function(e,t){return J.rect(e,t)},t.intersect=function(e){return J.rect(t,e)},i}e(zn,`defaultMindmapNode`);async function Bn(e,t){return _t(e,t,{padding:t.padding??0})}e(Bn,`mindmapCircle`);var Vn=[{semanticName:`Process`,name:`Rectangle`,shortName:`rect`,description:`Standard process shape`,aliases:[`proc`,`process`,`rectangle`],internalAliases:[`squareRect`],handler:un},{semanticName:`Event`,name:`Rounded Rectangle`,shortName:`rounded`,description:`Represents an event`,aliases:[`event`],internalAliases:[`roundedRect`],handler:sn},{semanticName:`Terminal Point`,name:`Stadium`,shortName:`stadium`,description:`Terminal point`,aliases:[`terminal`,`pill`],handler:dn},{semanticName:`Subprocess`,name:`Framed Rectangle`,shortName:`fr-rect`,description:`Subprocess`,aliases:[`subprocess`,`subproc`,`framed-rectangle`,`subroutine`],handler:hn},{semanticName:`Database`,name:`Cylinder`,shortName:`cyl`,description:`Database storage`,aliases:[`db`,`database`,`cylinder`],handler:Dt},{semanticName:`Start`,name:`Circle`,shortName:`circle`,description:`Starting point`,aliases:[`circ`],handler:_t},{semanticName:`Bang`,name:`Bang`,shortName:`bang`,description:`Bang`,aliases:[`bang`],handler:Ln},{semanticName:`Cloud`,name:`Cloud`,shortName:`cloud`,description:`cloud`,aliases:[`cloud`],handler:Rn},{semanticName:`Decision`,name:`Diamond`,shortName:`diam`,description:`Decision-making step`,aliases:[`decision`,`diamond`,`question`],handler:nn},{semanticName:`Prepare Conditional`,name:`Hexagon`,shortName:`hex`,description:`Preparation or condition step`,aliases:[`hexagon`,`prepare`],handler:Pt},{semanticName:`Data Input/Output`,name:`Lean Right`,shortName:`lean-r`,description:`Represents input or output`,aliases:[`lean-right`,`in-out`],internalAliases:[`lean_right`],handler:Gt},{semanticName:`Data Input/Output`,name:`Lean Left`,shortName:`lean-l`,description:`Represents output or input`,aliases:[`lean-left`,`out-in`],internalAliases:[`lean_left`],handler:Wt},{semanticName:`Priority Action`,name:`Trapezoid Base Bottom`,shortName:`trap-b`,description:`Priority action`,aliases:[`priority`,`trapezoid-bottom`,`trapezoid`],handler:Cn},{semanticName:`Manual Operation`,name:`Trapezoid Base Top`,shortName:`trap-t`,description:`Represents a manual task`,aliases:[`manual`,`trapezoid-top`,`inv-trapezoid`],internalAliases:[`inv_trapezoid`],handler:Vt},{semanticName:`Stop`,name:`Double Circle`,shortName:`dbl-circ`,description:`Represents a stop point`,aliases:[`double-circle`],internalAliases:[`doublecircle`],handler:kt},{semanticName:`Text Block`,name:`Text Block`,shortName:`text`,description:`Text block`,handler:vn},{semanticName:`Card`,name:`Notched Rectangle`,shortName:`notch-rect`,description:`Represents a card`,aliases:[`card`,`notched-rectangle`],handler:ht},{semanticName:`Lined/Shaded Process`,name:`Lined Rectangle`,shortName:`lin-rect`,description:`Lined process shape`,aliases:[`lined-rectangle`,`lined-process`,`lin-proc`,`shaded-process`],handler:cn},{semanticName:`Start`,name:`Small Circle`,shortName:`sm-circ`,description:`Small starting point`,aliases:[`start`,`small-circle`],internalAliases:[`stateStart`],handler:mn},{semanticName:`Stop`,name:`Framed Circle`,shortName:`fr-circ`,description:`Stop point`,aliases:[`stop`,`framed-circle`],internalAliases:[`stateEnd`],handler:pn},{semanticName:`Fork/Join`,name:`Filled Rectangle`,shortName:`fork`,description:`Fork or join in process flow`,aliases:[`join`],internalAliases:[`forkJoin`],handler:Mt},{semanticName:`Collate`,name:`Hourglass`,shortName:`hourglass`,description:`Represents a collate operation`,aliases:[`hourglass`,`collate`],handler:Ft},{semanticName:`Comment`,name:`Curly Brace`,shortName:`brace`,description:`Adds a comment`,aliases:[`comment`,`brace-l`],handler:bt},{semanticName:`Comment Right`,name:`Curly Brace`,shortName:`brace-r`,description:`Adds a comment`,handler:xt},{semanticName:`Comment with braces on both sides`,name:`Curly Braces`,shortName:`braces`,description:`Adds a comment`,handler:St},{semanticName:`Com Link`,name:`Lightning Bolt`,shortName:`bolt`,description:`Communication link`,aliases:[`com-link`,`lightning-bolt`],handler:Kt},{semanticName:`Document`,name:`Document`,shortName:`doc`,description:`Represents a document`,aliases:[`doc`,`document`],handler:En},{semanticName:`Delay`,name:`Half-Rounded Rectangle`,shortName:`delay`,description:`Represents a delay`,aliases:[`half-rounded-rectangle`],handler:Nt},{semanticName:`Direct Access Storage`,name:`Horizontal Cylinder`,shortName:`h-cyl`,description:`Direct access storage`,aliases:[`das`,`horizontal-cylinder`],handler:Sn},{semanticName:`Disk Storage`,name:`Lined Cylinder`,shortName:`lin-cyl`,description:`Disk storage`,aliases:[`disk`,`lined-cylinder`],handler:Xt},{semanticName:`Display`,name:`Curved Trapezoid`,shortName:`curv-trap`,description:`Represents a display`,aliases:[`curved-trapezoid`,`display`],handler:Ct},{semanticName:`Divided Process`,name:`Divided Rectangle`,shortName:`div-rect`,description:`Divided process shape`,aliases:[`div-proc`,`divided-rectangle`,`divided-process`],handler:Ot},{semanticName:`Extract`,name:`Triangle`,shortName:`tri`,description:`Extraction process`,aliases:[`extract`,`triangle`],handler:Tn},{semanticName:`Internal Storage`,name:`Window Pane`,shortName:`win-pane`,description:`Internal storage`,aliases:[`internal-storage`,`window-pane`],handler:On},{semanticName:`Junction`,name:`Filled Circle`,shortName:`f-circ`,description:`Junction point`,aliases:[`junction`,`filled-circle`],handler:At},{semanticName:`Loop Limit`,name:`Trapezoidal Pentagon`,shortName:`notch-pent`,description:`Loop limit step`,aliases:[`loop-limit`,`notched-pentagon`],handler:wn},{semanticName:`Manual File`,name:`Flipped Triangle`,shortName:`flip-tri`,description:`Manual file operation`,aliases:[`manual-file`,`flipped-triangle`],handler:jt},{semanticName:`Manual Input`,name:`Sloped Rectangle`,shortName:`sl-rect`,description:`Manual input step`,aliases:[`manual-input`,`sloped-rectangle`],handler:ln},{semanticName:`Multi-Document`,name:`Stacked Document`,shortName:`docs`,description:`Multiple documents`,aliases:[`documents`,`st-doc`,`stacked-document`],handler:$t},{semanticName:`Multi-Process`,name:`Stacked Rectangle`,shortName:`st-rect`,description:`Multiple processes`,aliases:[`procs`,`processes`,`stacked-rectangle`],handler:Qt},{semanticName:`Stored Data`,name:`Bow Tie Rectangle`,shortName:`bow-rect`,description:`Stored data`,aliases:[`stored-data`,`bow-tie-rectangle`],handler:mt},{semanticName:`Summary`,name:`Crossed Circle`,shortName:`cross-circ`,description:`Summary`,aliases:[`summary`,`crossed-circle`],handler:yt},{semanticName:`Tagged Document`,name:`Tagged Document`,shortName:`tag-doc`,description:`Tagged document`,aliases:[`tag-doc`,`tagged-document`],handler:_n},{semanticName:`Tagged Process`,name:`Tagged Rectangle`,shortName:`tag-rect`,description:`Tagged process`,aliases:[`tagged-rectangle`,`tag-proc`,`tagged-process`],handler:gn},{semanticName:`Paper Tape`,name:`Flag`,shortName:`flag`,description:`Paper tape`,aliases:[`paper-tape`],handler:Dn},{semanticName:`Odd`,name:`Odd`,shortName:`odd`,description:`Odd shape`,internalAliases:[`rect_left_inv_arrow`],handler:rn},{semanticName:`Lined Document`,name:`Lined Document`,shortName:`lin-doc`,description:`Lined document`,aliases:[`lined-document`],handler:Zt}],Hn=e(()=>{let e=[...Object.entries({state:fn,choice:gt,note:en,rectWithTitle:an,labelRect:Ut,iconSquare:zt,iconCircle:Lt,icon:It,iconRounded:Rt,imageSquare:Bt,anchor:ft,kanbanItem:In,mindmapCircle:Bn,defaultMindmapNode:zn,classBox:Nn,erBox:kn,requirementBox:Pn}),...Vn.flatMap(e=>[e.shortName,...`aliases`in e?e.aliases:[],...`internalAliases`in e?e.internalAliases:[]].map(t=>[t,e.handler]))];return Object.fromEntries(e)},`generateShapeMap`)();function Un(e){return e in Hn}e(Un,`isValidShape`);var Wn=new Map;async function Gn(e,t,n){let r,i;t.shape===`rect`&&(t.rx&&t.ry?t.shape=`roundedRect`:t.shape=`squareRect`);let a=t.shape?Hn[t.shape]:void 0;if(!a)throw Error(`No such shape: ${t.shape}. Please check your syntax.`);if(t.link){let o;n.config.securityLevel===`sandbox`?o=`_top`:t.linkTarget&&(o=t.linkTarget||`_blank`),r=e.insert(`svg:a`).attr(`xlink:href`,t.link).attr(`target`,o??null),i=await a(r,t,n)}else i=await a(e,t,n),r=i;return t.tooltip&&i.attr(`title`,t.tooltip),Wn.set(t.id,r),t.haveCallback&&r.attr(`class`,r.attr(`class`)+` clickable`),r}e(Gn,`insertNode`);var Kn=e((e,t)=>{Wn.set(t.id,e)},`setNodeElem`),qn=e(()=>{Wn.clear()},`clear`),Jn=e(e=>{let t=Wn.get(e.id);n.trace(`Transforming node`,e.diff,e,`translate(`+(e.x-e.width/2-5)+`, `+e.width/2+`)`);let r=e.diff||0;return e.clusterNode?t.attr(`transform`,`translate(`+(e.x+r-e.width/2)+`, `+(e.y-e.height/2-8)+`)`):t.attr(`transform`,`translate(`+e.x+`, `+e.y+`)`),r},`positionNode`);export{Un as a,Gn as c,et as d,qn as i,tt as l,E as n,Kn as o,Jn as r,qe as s,w as t,K as u};